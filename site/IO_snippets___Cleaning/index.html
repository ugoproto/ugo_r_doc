



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A R documentation website.">
      
      
        <link rel="canonical" href="https://ugoproto.github.io/ugo_r_doc/IO_snippets___Cleaning/">
      
      
        <meta name="author" content="Ugo Sparks">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0, mkdocs-material-3.0.3">
    
    
      
        <title>I/O Snippets & Cleaning - ugo_r_doc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#importing-data-into-r" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://ugoproto.github.io/ugo_r_doc/" title="ugo_r_doc" class="md-header-nav__button md-logo">
          
            <i class="md-icon">layers</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ugo_r_doc
              </span>
              <span class="md-header-nav__topic">
                I/O Snippets & Cleaning
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/ugoproto/ugo_r_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      ugo_r_doc
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://ugoproto.github.io/ugo_r_doc/" title="ugo_r_doc" class="md-nav__button md-logo">
      
        <i class="md-icon">layers</i>
      
    </a>
    ugo_r_doc
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/ugoproto/ugo_r_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      ugo_r_doc
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../R_CS/" title="R Cheat Sheets" class="md-nav__link">
      R Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../An Introduction to R/" title="An Introduction to R" class="md-nav__link">
      An Introduction to R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Le logiciel R, maitriser le langage, effectuer des analyses (bio)statistiques/" title="Le logiciel R, maitriser le langage, effectuer des analyses (bio)statistiques" class="md-nav__link">
      Le logiciel R, maitriser le langage, effectuer des analyses (bio)statistiques
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Formulas_in_R/" title="Formulas in R" class="md-nav__link">
      Formulas in R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Improved_codes/" title="Improved Codes" class="md-nav__link">
      Improved Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Intermediate_R/" title="Intermediate R" class="md-nav__link">
      Intermediate R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Intermediate_R_-_The_apply_Family/" title="Intermediate R - The apply Family" class="md-nav__link">
      Intermediate R - The apply Family
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      RStudio
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        RStudio
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Code___Plot_Chunk_Options/" title="Code & Plot Chunk Options" class="md-nav__link">
      Code & Plot Chunk Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Working_with_RStudio_IDE/" title="Working with the RStudio IDE" class="md-nav__link">
      Working with the RStudio IDE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Data Wrangling Snippets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Data Wrangling Snippets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        I/O Snippets & Cleaning
      </label>
    
    <a href="./" title="I/O Snippets & Cleaning" class="md-nav__link md-nav__link--active">
      I/O Snippets & Cleaning
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#importing-data-into-r" title="Importing Data Into R" class="md-nav__link">
    Importing Data Into R
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-flat-files" title="Importing Data from Flat Files" class="md-nav__link">
    Importing Data from Flat Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r-functions-by-default" title="R functions, by default." class="md-nav__link">
    R functions, by default.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-utils-package" title="The utils package" class="md-nav__link">
    The utils package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-importing-data-from-the-web" title="(from Importing Data from the Web)" class="md-nav__link">
    (from Importing Data from the Web)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-readr-package" title="The readr package" class="md-nav__link">
    The readr package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-importing-data-from-the-web_1" title="(from Importing Data from the Web)" class="md-nav__link">
    (from Importing Data from the Web)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-datatable-package" title="The data.table package" class="md-nav__link">
    The data.table package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-excel" title="Importing Data from Excel" class="md-nav__link">
    Importing Data from Excel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-readxl-package" title="The readxl package" class="md-nav__link">
    The readxl package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-importing-data-from-the-web_2" title="(from Importing Data from the Web)" class="md-nav__link">
    (from Importing Data from the Web)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-xlconnect-package" title="The XLConnect package" class="md-nav__link">
    The XLConnect package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-other-statistical-software" title="Importing Data from Other Statistical Software" class="md-nav__link">
    Importing Data from Other Statistical Software
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-haven-package" title="The haven package" class="md-nav__link">
    The haven package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#theforeign-package" title="Theforeign package" class="md-nav__link">
    Theforeign package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-relational-data" title="Importing Data from Relational Data" class="md-nav__link">
    Importing Data from Relational Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-dbi-package" title="The DBI package" class="md-nav__link">
    The DBI package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-relational-data-more" title="Importing Data from Relational Data -- More" class="md-nav__link">
    Importing Data from Relational Data -- More
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dbi" title="DBI" class="md-nav__link">
    DBI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsqlite" title="RSQLite" class="md-nav__link">
    RSQLite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysql-with-dbi-or-rmysql" title="MySQL with DBI or RMySQL" class="md-nav__link">
    MySQL with DBI or RMySQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#posgresql-with-dbi-or-rpostgresql" title="PosgreSQL with DBI or RPostgreSQL" class="md-nav__link">
    PosgreSQL with DBI or RPostgreSQL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-the-web" title="Importing Data from the Web" class="md-nav__link">
    Importing Data from the Web
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-httr-package" title="The httr package" class="md-nav__link">
    The httr package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-jsonlite-package" title="The jsonlite package" class="md-nav__link">
    The jsonlite package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyboard-inputting" title="Keyboard Inputting" class="md-nav__link">
    Keyboard Inputting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exporting-data" title="Exporting Data" class="md-nav__link">
    Exporting Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-a-tab-delimited-text-file" title="To a Tab-Delimited Text File" class="md-nav__link">
    To a Tab-Delimited Text File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-an-excel-spreadsheet" title="To an Excel Spreadsheet" class="md-nav__link">
    To an Excel Spreadsheet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-spss" title="To SPSS" class="md-nav__link">
    To SPSS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-sas" title="To SAS" class="md-nav__link">
    To SAS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-stata" title="To Stata" class="md-nav__link">
    To Stata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-data-missing-data" title="Inspecting Data - Missing Data" class="md-nav__link">
    Inspecting Data - Missing Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inspecting" title="Inspecting" class="md-nav__link">
    Inspecting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-dplyr-package" title="The dplyr package" class="md-nav__link">
    The dplyr package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-thorough-cleaning" title="For thorough cleaning" class="md-nav__link">
    For thorough cleaning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labels-levels" title="Labels &amp; Levels" class="md-nav__link">
    Labels &amp; Levels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-work-with-quandl-in-r" title="How to work with Quandl in R" class="md-nav__link">
    How to work with Quandl in R
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-quandl-datasets" title="Importing Quandl Datasets" class="md-nav__link">
    Importing Quandl Datasets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipulating-quandl-datasets" title="Manipulating Quandl Datasets" class="md-nav__link">
    Manipulating Quandl Datasets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-data-in-r" title="Cleaning Data in R" class="md-nav__link">
    Cleaning Data in R
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction-and-exploring-raw-data" title="Introduction and Exploring Raw Data" class="md-nav__link">
    Introduction and Exploring Raw Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tidying-data" title="Tidying Data" class="md-nav__link">
    Tidying Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparing-data-for-analysis" title="Preparing Data for Analysis" class="md-nav__link">
    Preparing Data for Analysis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#putting-it-all-together" title="Putting it All Together" class="md-nav__link">
    Putting it All Together
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Reading_Data_into_R_with_readr/" title="Reading Data into R with readr" class="md-nav__link">
      Reading Data into R with readr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Data_Analysis_in_R,_the_data.table_Way/" title="Data Analysis in R, the data.table Way" class="md-nav__link">
      Data Analysis in R, the data.table Way
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Data_Manipulation_in_R_with_dplyr/" title="Data Manipulation in R with dplyr" class="md-nav__link">
      Data Manipulation in R with dplyr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Data_Wrangling/" title="Data Wrangling" class="md-nav__link">
      Data Wrangling
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Plot Snippets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Plot Snippets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Plot_snippets_-_Basics/" title="Plot Snippets for Exploratory (and some Explanatory) Analyses" class="md-nav__link">
      Plot Snippets for Exploratory (and some Explanatory) Analyses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Plot_snippets_-_ggplot2/" title="Plot Snippets - ggplot2" class="md-nav__link">
      Plot Snippets - ggplot2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Plot_snippets_-_ggvis/" title="Plot Snippets - ggvis" class="md-nav__link">
      Plot Snippets - ggvis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Plot_snippets_-_Colours/" title="Plot Snippets - Colours" class="md-nav__link">
      Plot Snippets - Colours
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../googleVis/" title="googleVis (embed HTML plots)" class="md-nav__link">
      googleVis (embed HTML plots)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gganimate/" title="gganimate" class="md-nav__link">
      gganimate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fast-and-Frugal_Decision_Trees_in_R_with_FFTrees/" title="Fast-and-Frugal Decision Trees" class="md-nav__link">
      Fast-and-Frugal Decision Trees
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Big_Data_Analysis_with_Revolution_R_Enterprise/" title="Big Data Analysis with Revolution R Enterprise" class="md-nav__link">
      Big Data Analysis with Revolution R Enterprise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Time+Series+in+R+The+Power+of+xts+and+zoo.md" title="Time Series in R, The Power of xts and zoo" class="md-nav__link">
      Time Series in R, The Power of xts and zoo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Parallel computing in R/" title="Parallel computing in R" class="md-nav__link">
      Parallel computing in R
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Other Snippets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Other Snippets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Tables/" title="Tables" class="md-nav__link">
      Tables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../embedding/" title="Embedding HTML into HTML" class="md-nav__link">
      Embedding HTML into HTML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../embedding2/" title="Embedding Rmd into Rmd" class="md-nav__link">
      Embedding Rmd into Rmd
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Frequentist_Bayesian/" title="Frequentist vs. Bayesian" class="md-nav__link">
      Frequentist vs. Bayesian
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      A Hands-on Introduction to Statistics with R
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        A Hands-on Introduction to Statistics with R
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Course_One,_Introduction/" title="Statistics with R, Course One, Introduction" class="md-nav__link">
      Statistics with R, Course One, Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Course_Two,_Student_s_T-test/" title="Statistics with R, Course Two, Student's t-test" class="md-nav__link">
      Statistics with R, Course Two, Student's t-test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Course_Three,_Analysis_of_Variance/" title="Statistics with R, Course Three, Analysis of Variance" class="md-nav__link">
      Statistics with R, Course Three, Analysis of Variance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Course_Four,_Repeated_Measures_Anova/" title="Statistics with R, Course Four, Repeated Measures ANOVA" class="md-nav__link">
      Statistics with R, Course Four, Repeated Measures ANOVA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Course_Five,_Correlation_and_Regression/" title="Statistics with R, Course Five, Correlation and Regression" class="md-nav__link">
      Statistics with R, Course Five, Correlation and Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Course_Six,_Multiple_Regression/" title="Statistics with R, Course Six, Multiple Regression" class="md-nav__link">
      Statistics with R, Course Six, Multiple Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Course_Seven,_Moderation_and_Mediation/" title="Statistics with R, Course Seven, Moderation and Mediation" class="md-nav__link">
      Statistics with R, Course Seven, Moderation and Mediation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../A_Hands-on_Introduction_to_Statistics_with_R,_Notes/" title="Statistics with R, Notes" class="md-nav__link">
      Statistics with R, Notes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#importing-data-into-r" title="Importing Data Into R" class="md-nav__link">
    Importing Data Into R
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-flat-files" title="Importing Data from Flat Files" class="md-nav__link">
    Importing Data from Flat Files
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r-functions-by-default" title="R functions, by default." class="md-nav__link">
    R functions, by default.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-utils-package" title="The utils package" class="md-nav__link">
    The utils package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-importing-data-from-the-web" title="(from Importing Data from the Web)" class="md-nav__link">
    (from Importing Data from the Web)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-readr-package" title="The readr package" class="md-nav__link">
    The readr package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-importing-data-from-the-web_1" title="(from Importing Data from the Web)" class="md-nav__link">
    (from Importing Data from the Web)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-datatable-package" title="The data.table package" class="md-nav__link">
    The data.table package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-excel" title="Importing Data from Excel" class="md-nav__link">
    Importing Data from Excel
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-readxl-package" title="The readxl package" class="md-nav__link">
    The readxl package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-importing-data-from-the-web_2" title="(from Importing Data from the Web)" class="md-nav__link">
    (from Importing Data from the Web)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-xlconnect-package" title="The XLConnect package" class="md-nav__link">
    The XLConnect package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-other-statistical-software" title="Importing Data from Other Statistical Software" class="md-nav__link">
    Importing Data from Other Statistical Software
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-haven-package" title="The haven package" class="md-nav__link">
    The haven package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#theforeign-package" title="Theforeign package" class="md-nav__link">
    Theforeign package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-relational-data" title="Importing Data from Relational Data" class="md-nav__link">
    Importing Data from Relational Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-dbi-package" title="The DBI package" class="md-nav__link">
    The DBI package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-relational-data-more" title="Importing Data from Relational Data -- More" class="md-nav__link">
    Importing Data from Relational Data -- More
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dbi" title="DBI" class="md-nav__link">
    DBI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsqlite" title="RSQLite" class="md-nav__link">
    RSQLite
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysql-with-dbi-or-rmysql" title="MySQL with DBI or RMySQL" class="md-nav__link">
    MySQL with DBI or RMySQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#posgresql-with-dbi-or-rpostgresql" title="PosgreSQL with DBI or RPostgreSQL" class="md-nav__link">
    PosgreSQL with DBI or RPostgreSQL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-data-from-the-web" title="Importing Data from the Web" class="md-nav__link">
    Importing Data from the Web
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-httr-package" title="The httr package" class="md-nav__link">
    The httr package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-jsonlite-package" title="The jsonlite package" class="md-nav__link">
    The jsonlite package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyboard-inputting" title="Keyboard Inputting" class="md-nav__link">
    Keyboard Inputting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exporting-data" title="Exporting Data" class="md-nav__link">
    Exporting Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-a-tab-delimited-text-file" title="To a Tab-Delimited Text File" class="md-nav__link">
    To a Tab-Delimited Text File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-an-excel-spreadsheet" title="To an Excel Spreadsheet" class="md-nav__link">
    To an Excel Spreadsheet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-spss" title="To SPSS" class="md-nav__link">
    To SPSS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-sas" title="To SAS" class="md-nav__link">
    To SAS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-stata" title="To Stata" class="md-nav__link">
    To Stata
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-data-missing-data" title="Inspecting Data - Missing Data" class="md-nav__link">
    Inspecting Data - Missing Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inspecting" title="Inspecting" class="md-nav__link">
    Inspecting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-dplyr-package" title="The dplyr package" class="md-nav__link">
    The dplyr package
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-thorough-cleaning" title="For thorough cleaning" class="md-nav__link">
    For thorough cleaning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labels-levels" title="Labels &amp; Levels" class="md-nav__link">
    Labels &amp; Levels
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-work-with-quandl-in-r" title="How to work with Quandl in R" class="md-nav__link">
    How to work with Quandl in R
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#importing-quandl-datasets" title="Importing Quandl Datasets" class="md-nav__link">
    Importing Quandl Datasets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manipulating-quandl-datasets" title="Manipulating Quandl Datasets" class="md-nav__link">
    Manipulating Quandl Datasets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-data-in-r" title="Cleaning Data in R" class="md-nav__link">
    Cleaning Data in R
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction-and-exploring-raw-data" title="Introduction and Exploring Raw Data" class="md-nav__link">
    Introduction and Exploring Raw Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tidying-data" title="Tidying Data" class="md-nav__link">
    Tidying Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparing-data-for-analysis" title="Preparing Data for Analysis" class="md-nav__link">
    Preparing Data for Analysis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#putting-it-all-together" title="Putting it All Together" class="md-nav__link">
    Putting it All Together
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ugoproto/ugo_r_doc.git/edit/master/docs/IO_snippets___Cleaning.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>I/O Snippets & Cleaning</h1>
                
                <!--
-   [Datasets](#datasets)
-   [Importing Data Into R](#importing-data-into-r)
    -   [1, Importing Data from Flat
        Files](#importing-data-from-flat-files)
    -   [2, Importing Data from Excel](#importing-data-from-excel)
    -   [3, Importing Data from Other Statistical
        Software](#importing-data-from-other-statistical-software)
    -   [4, Importing Data from Relational
        Data](#importing-data-from-relational-data)
    -   [4b, Importing Data from Relational Data --
        More](#b-importing-data-from-relational-data----more)
    -   [5, Importing Data from the Web](#importing-data-from-the-web)
    -   [6, Keyboard Inputting](#keyboard-inputting)
    -   [7, Exporting Data](#exporting-data)
    -   [8, Inspecting Data - Missing
        Data](#inspecting-data---missing-data)
    -   [9, Labels & Levels](#labels-levels)
-   [How to work with Quandl in R](#how-to-work-with-quandl-in-r)
    -   [1, Importing Quandl Datasets](#importing-quandl-datasets)
    -   [2, Manipulating Quandl Datasets](#manipulating-quandl-datasets)
-   [Cleaning Data in R](#cleaning-data-in-r)
    -   [1, Introduction and Exploring Raw
        Data](#introduction-and-exploring-raw-data)
    -   [2, Tidying Data](#tidying-data)
    -   [3, Preparing Data for Analysis](#preparing-data-for-analysis)
    -   [4, Putting it All Together](#putting-it-all-together)
-->

<hr />
<p><strong>Foreword</strong></p>
<ul>
<li>Output options: the &lsquo;tango&rsquo; syntax and the &lsquo;readable&rsquo; theme.</li>
<li>Snippets and results.</li>
</ul>
<hr />
<h4 id="datasets">Datasets<a class="headerlink" href="#datasets" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/00Index.html">R Dataset Packages</a>; by default in R.</li>
<li>Other dataset can be imported with <code class="codehilite">data(Cars93, package = &#39;MASS&#39;)</code> for example.</li>
<li><a href="https://vincentarelbundock.github.io/Rdatasets/datasets.html">csv/doc Datasets</a>.</li>
<li><a href="https://r-dir.com/reference/datasets.html">Free Datasets</a> from the World Bank, Gapminder, Kaggle, Quandl, Reddit, and many more websites.</li>
<li><a href="https://www.r-bloggers.com/datasets-to-practice-your-data-mining/">Datasets</a> to Practice Your Data Mining.</li>
<li><a href="http://college.cengage.com/mathematics/brase/understandable_statistics/7e/students/datasets/slr/frames/frame.html">Houghton Mifflin Data</a> for linear regressions.</li>
<li><a href="http://data.princeton.edu/wws509/datasets/">Regression Datasets</a> for Generalized Linear Models (linear, logistic, poisson, multinomial, survival).</li>
<li><a href="http://www.kdnuggets.com/2015/04/awesome-public-datasets-github.html">Public Datasets on GitHub</a>.</li>
<li><a href="https://github.com/caesar0301/awesome-public-datasets">Awesome Public Datasets</a>.</li>
</ul>
<hr />
<h3 id="importing-data-into-r">Importing Data Into R<a class="headerlink" href="#importing-data-into-r" title="Permanent link">&para;</a></h3>
<p>The packages:</p>
<ul>
<li><code class="codehilite">utils</code>.</li>
<li><code class="codehilite">readr</code>.</li>
<li><code class="codehilite">data.table</code>.</li>
<li><code class="codehilite">readxl</code>.</li>
<li><code class="codehilite">gdata</code>.</li>
<li><code class="codehilite">XLConnect</code>.</li>
<li><code class="codehilite">haven</code>.</li>
<li><code class="codehilite">foreign</code>.</li>
<li><code class="codehilite">DBI</code>.</li>
<li><code class="codehilite">httr</code>.</li>
<li><code class="codehilite">jsonlite</code>.</li>
</ul>
<h3 id="importing-data-from-flat-files">Importing Data from Flat Files<a class="headerlink" href="#importing-data-from-flat-files" title="Permanent link">&para;</a></h3>
<h4 id="r-functions-by-default">R functions, by default.<a class="headerlink" href="#r-functions-by-default" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">read.csv</code>; <code class="codehilite">sep = &#39;,&#39;</code>, <code class="codehilite">dec = &#39;.&#39;</code>.</li>
<li><code class="codehilite">read.delim</code>; .txt, <code class="codehilite">dec = &#39;.&#39;</code>.</li>
<li><code class="codehilite">read.csv2</code>; <code class="codehilite">sep = &#39;;&#39;</code>, <code class="codehilite">dec = &#39;,&#39;</code>.</li>
<li><code class="codehilite">read.delim2</code>; .txt, <code class="codehilite">dec = &#39;,&#39;</code>.</li>
<li>Needs arguments.</li>
</ul>
<p><strong><code class="codehilite">read.csv</code> for .csv files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># List the files in your working directory</span>
<span class="kp">dir</span><span class="p">()</span>

<span class="c1"># Import swimming_pools.csv: pools</span>
<span class="c1"># stringAsFactors = FALSE does not import strings as categorical variables</span>
pools <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&#39;swimming_pools.csv&#39;</span><span class="p">,</span> stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><code class="codehilite">stringsAsFactors</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import swimming_pools.csv correctly: pools</span>
pools <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&#39;swimming_pools.csv&#39;</span><span class="p">,</span> stringsAsFactor <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;,&#39;</span><span class="p">)</span>

<span class="c1"># Import swimming_pools.csv with factors: pools_factor</span>
pools_factor <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&#39;swimming_pools.csv&#39;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;,&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">read.delim</code> for .txt files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import hotdogs.txt: hotdogs</span>
hotdogs <span class="o">&lt;-</span> read.delim<span class="p">(</span><span class="s">&#39;hotdogs.txt&#39;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

<span class="c1"># Name the columns of hotdogs appropriately</span>
<span class="kp">names</span><span class="p">(</span>hotdogs<span class="p">)</span> <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;calories&#39;</span><span class="p">,</span> <span class="s">&#39;sodium&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Arguments.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Load in the hotdogs data set: hotdogs</span>
hotdogs <span class="o">&lt;-</span> read.delim<span class="p">(</span><span class="s">&#39;hotdogs.txt&#39;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;\t&#39;</span><span class="p">,</span> col.names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;calories&#39;</span><span class="p">,</span> <span class="s">&#39;sodium&#39;</span><span class="p">))</span>

<span class="c1"># Select the hot dog with the least calories: lily</span>
lily <span class="o">&lt;-</span> hotdogs<span class="p">[</span><span class="kp">which.min</span><span class="p">(</span>hotdogs<span class="o">$</span>calories<span class="p">),</span> <span class="p">]</span>
<span class="c1"># Select the observation with the most sodium: tom</span>

tom <span class="o">&lt;-</span> hotdogs<span class="p">[</span><span class="kp">which.max</span><span class="p">(</span>hotdogs<span class="o">$</span>sodium<span class="p">),</span> <span class="p">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Previous call to import hotdogs.txt</span>
hotdogs <span class="o">&lt;-</span> read.delim<span class="p">(</span><span class="s">&#39;hotdogs.txt&#39;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> col.names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;calories&#39;</span><span class="p">,</span> <span class="s">&#39;sodium&#39;</span><span class="p">))</span>

<span class="c1"># Print a vector representing the classes of the columns</span>
<span class="kp">sapply</span><span class="p">(</span>hotdogs<span class="p">,</span> <span class="kp">class</span><span class="p">)</span>

<span class="c1"># Edit the colClasses argument to import the data correctly: hotdogs2</span>
hotdogs2 <span class="o">&lt;-</span> read.delim<span class="p">(</span><span class="s">&#39;hotdogs.txt&#39;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> col.names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;calories&#39;</span><span class="p">,</span> <span class="s">&#39;sodium&#39;</span><span class="p">),</span> colClasses <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;factor&#39;</span><span class="p">,</span> <span class="s">&#39;NULL&#39;</span><span class="p">,</span> <span class="s">&#39;numeric&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<h4 id="the-utils-package">The <code class="codehilite">utils</code> package<a class="headerlink" href="#the-utils-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">read.table</code>; <code class="codehilite">sep = &#39;\t&#39;</code>, <code class="codehilite">= &#39;,&#39;</code>, <code class="codehilite">= &#39;;&#39;</code>.</li>
<li>Read any tabular as a d.f.</li>
<li>Needs arguments; lots of argument for precision.</li>
<li>Slow.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>utils<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">read.table</code> .txt files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create a path to the hotdogs.txt file</span>
path <span class="o">&lt;-</span> <span class="kp">file.path</span><span class="p">(</span><span class="s">&#39;hotdogs&#39;</span><span class="p">,</span> <span class="s">&#39;hotdogs.txt&#39;</span><span class="p">)</span>

<span class="c1"># Import the hotdogs.txt file: hotdogs</span>
hotdogs <span class="o">&lt;-</span> read.table<span class="p">(</span>path<span class="p">,</span> header <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;\t&#39;</span><span class="p">,</span> col.names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;calories&#39;</span><span class="p">,</span> <span class="s">&#39;sodium&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="from-importing-data-from-the-web">(from Importing Data from the Web)<a class="headerlink" href="#from-importing-data-from-the-web" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># https URL to the swimming_pools csv file.</span>
url_csv <span class="o">&lt;-</span> <span class="s">&#39;https://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/swimming_pools.csv&#39;</span>

<span class="c1"># Import the file using read.csv(): pools1</span>
pools1 <span class="o">&lt;-</span> read.csv<span class="p">(</span>url_csv<span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="the-readr-package">The <code class="codehilite">readr</code> package<a class="headerlink" href="#the-readr-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">read_delim</code>; <code class="codehilite">delim = &#39;\t&#39;</code>, <code class="codehilite">= &#39;,&#39;</code>.</li>
<li><code class="codehilite">read_csv</code>; read <code class="codehilite">100.000, 200.000</code></li>
<li><code class="codehilite">read_tsv</code>; idem.</li>
<li><code class="codehilite">read_csv2</code>; read <code class="codehilite">100,000; 200,000</code> or European files..</li>
<li><code class="codehilite">read_tsv2</code>; idem.</li>
<li><code class="codehilite">read_lines</code>.</li>
<li><code class="codehilite">read_file</code>.</li>
<li><code class="codehilite">write_csv</code>.</li>
<li><code class="codehilite">write_rds</code>.</li>
<li><code class="codehilite">type_convert</code>.</li>
<li><code class="codehilite">parse_factor</code>.</li>
<li><code class="codehilite">parse_date</code>.</li>
<li><code class="codehilite">parse_number</code>.</li>
<li><code class="codehilite">spec_csv</code>.</li>
<li><code class="codehilite">spec_delim</code>.</li>
<li>Fast, few arguments.</li>
<li>Detect data type.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>readr<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">read_delim</code> .txt files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import potatoes.txt using read_delim(): potatoes</span>
potatoes <span class="o">&lt;-</span> read_delim<span class="p">(</span><span class="s">&#39;potatoes.txt&#39;</span><span class="p">,</span> delim <span class="o">=</span> <span class="s">&#39;\t&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">read_csv</code> .csv files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Column names</span>
properties <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;area&#39;</span><span class="p">,</span> <span class="s">&#39;temp&#39;</span><span class="p">,</span> <span class="s">&#39;size&#39;</span><span class="p">,</span> <span class="s">&#39;storage&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">,</span> <span class="s">&#39;texture&#39;</span><span class="p">,</span> <span class="s">&#39;flavor&#39;</span><span class="p">,</span> <span class="s">&#39;moistness&#39;</span><span class="p">)</span>

<span class="c1"># Import potatoes.csv with read_csv(): potatoes</span>
potatoes <span class="o">&lt;-</span> read_csv<span class="p">(</span><span class="s">&#39;potatoes.csv&#39;</span><span class="p">,</span> col_names <span class="o">=</span> properties<span class="p">)</span>

<span class="c1"># Create a copy of potatoes: potatoes2</span>
potatoes2 <span class="o">&lt;-</span> potatoes

<span class="c1"># Convert the method column of potatoes2 to a factor</span>
potatoes2<span class="o">$</span>method <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span>potatoes2<span class="o">$</span>method<span class="p">)</span>

<span class="c1"># or</span>

potatoes2<span class="o">$</span>method <span class="o">=</span> <span class="kp">as.factor</span><span class="p">(</span>potatoes2<span class="o">$</span>method<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">col_types</code>, <code class="codehilite">skip</code> and <code class="codehilite">n_max</code> in .tsv files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Column names</span>
properties <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;area&#39;</span><span class="p">,</span> <span class="s">&#39;temp&#39;</span><span class="p">,</span> <span class="s">&#39;size&#39;</span><span class="p">,</span> <span class="s">&#39;storage&#39;</span><span class="p">,</span> <span class="s">&#39;method&#39;</span><span class="p">,</span> <span class="s">&#39;texture&#39;</span><span class="p">,</span> <span class="s">&#39;flavor&#39;</span><span class="p">,</span> <span class="s">&#39;moistness&#39;</span><span class="p">)</span>

<span class="c1"># Import 5 observations from potatoes.txt: potatoes_fragment</span>
<span class="c1"># read_tsv or tab-separated values</span>
potatoes_fragment <span class="o">&lt;-</span> read_tsv<span class="p">(</span><span class="s">&#39;potatoes.txt&#39;</span><span class="p">,</span> col_names <span class="o">=</span> properties<span class="p">,</span> skip <span class="o">=</span> <span class="m">7</span><span class="p">,</span> n_max <span class="o">=</span> <span class="m">5</span><span class="p">)</span>

<span class="c1"># Import all data, but force all columns to be character: potatoes_char</span>
potatoes_char <span class="o">&lt;-</span> read_tsv<span class="p">(</span><span class="s">&#39;potatoes.txt&#39;</span><span class="p">,</span> col_types <span class="o">=</span> <span class="s">&#39;cccccccc&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Setting column types</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>cols<span class="p">(</span>
  weight <span class="o">=</span> col_integer<span class="p">(),</span>
  feed <span class="o">=</span> col_character<span class="p">()</span>
<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Removing NA</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>na <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;NA&#39;</span><span class="p">,</span> <span class="s">&#39;null&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">col_types</code> with collectors .tsv files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import without col_types</span>
hotdogs <span class="o">&lt;-</span> read_tsv<span class="p">(</span><span class="s">&#39;hotdogs.txt&#39;</span><span class="p">,</span> col_names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;calories&#39;</span><span class="p">,</span> <span class="s">&#39;sodium&#39;</span><span class="p">))</span>

<span class="c1"># The collectors you will need to import the data</span>
fac <span class="o">&lt;-</span> col_factor<span class="p">(</span>levels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Beef&#39;</span><span class="p">,</span> <span class="s">&#39;Meat&#39;</span><span class="p">,</span> <span class="s">&#39;Poultry&#39;</span><span class="p">))</span>
int <span class="o">&lt;-</span> col_integer<span class="p">()</span>

<span class="c1"># Edit the col_types argument to import the data correctly: hotdogs_factor</span>
<span class="c1"># Change col_types to the correct vector of collectors; coerce the vector into a list</span>
hotdogs_factor <span class="o">&lt;-</span> read_tsv<span class="p">(</span><span class="s">&#39;hotdogs.txt&#39;</span><span class="p">,</span> col_names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="s">&#39;calories&#39;</span><span class="p">,</span> <span class="s">&#39;sodium&#39;</span><span class="p">),</span> col_types <span class="o">=</span> <span class="kt">list</span><span class="p">(</span>fac<span class="p">,</span> int<span class="p">,</span> int<span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong>Skiping columns</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>salaries <span class="o">&lt;-</span> read_tsv<span class="p">(</span><span class="s">&#39;Salaries.txt&#39;</span><span class="p">,</span> col_names <span class="o">=</span> <span class="kc">FALSE</span><span class="p">,</span> col_types <span class="o">=</span> cols<span class="p">(</span>
  X2 <span class="o">=</span> col_skip<span class="p">(),</span>
  X3 <span class="o">=</span> col_skip<span class="p">(),</span> 
  X4 <span class="o">=</span> col_skip<span class="p">()</span>
<span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong>Reading an ordinary text file</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># vector of character strings. </span>
<span class="c1"># Import as a character vector, one item per line: tweets</span>
tweets <span class="o">&lt;-</span> read_lines<span class="p">(</span><span class="s">&#39;tweets.txt&#39;</span><span class="p">)</span>
tweets

<span class="c1"># returns a length 1 vector of the entire file, with line breaks represented as \n</span>
<span class="c1"># Import as a length 1 vector: tweets_all</span>
tweets_all <span class="o">&lt;-</span> read_file<span class="p">(</span><span class="s">&#39;tweets.txt&#39;</span><span class="p">)</span>
tweets_all
</pre></div>
</td></tr></table>

<p><strong>Writing .csv and .tsv files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Save cwts as chickwts.csv</span>
write_csv<span class="p">(</span>cwts<span class="p">,</span> <span class="s">&quot;chickwts.csv&quot;</span><span class="p">)</span>

<span class="c1"># Append cwts2 to chickwts.csv</span>
write_csv<span class="p">(</span>cwts2<span class="p">,</span> <span class="s">&quot;chickwts.csv&quot;</span><span class="p">,</span> append <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Writing .rds files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Save trees as trees.rds</span>
write_rds<span class="p">(</span>trees<span class="p">,</span> <span class="s">&#39;trees.rds&#39;</span><span class="p">)</span>

<span class="c1"># Import trees.rds: trees2</span>
trees2 <span class="o">&lt;-</span> read_rds<span class="p">(</span><span class="s">&#39;trees.rds&#39;</span><span class="p">)</span>

<span class="c1"># Check whether trees and trees2 are the same</span>
<span class="kp">identical</span><span class="p">(</span>trees<span class="p">,</span> trees2<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Coercing columns to different data types</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Convert all columns to double</span>
trees2 <span class="o">&lt;-</span> type_convert<span class="p">(</span>trees<span class="p">,</span> col_types <span class="o">=</span> cols<span class="p">(</span>Girth <span class="o">=</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> Height <span class="o">=</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> Volume <span class="o">=</span> <span class="s">&#39;d&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong>Coercing character columns into factors</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Parse the title column</span>
salaries<span class="o">$</span>title <span class="o">&lt;-</span> parse_factor<span class="p">(</span>salaries<span class="o">$</span>title<span class="p">,</span> levels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Prof&#39;</span><span class="p">,</span> <span class="s">&#39;AsstProf&#39;</span><span class="p">,</span> <span class="s">&#39;AssocProf&#39;</span><span class="p">))</span>

<span class="c1"># Parse the gender column</span>
salaries<span class="o">$</span>gender <span class="o">&lt;-</span> parse_factor<span class="p">(</span>salaries<span class="o">$</span>gender<span class="p">,</span> levels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Male&#39;</span><span class="p">,</span> <span class="s">&#39;Female&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong>Creating Date objects</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Change type of date column</span>
weather<span class="o">$</span>date <span class="o">&lt;-</span> parse_date<span class="p">(</span>weather<span class="o">$</span><span class="kp">date</span><span class="p">,</span> format <span class="o">=</span> <span class="s">&#39;%m/%d/%Y&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Parsing number formats</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Parse amount column as a number</span>
debt<span class="o">$</span>amount <span class="o">&lt;-</span> parse_number<span class="p">(</span>debt<span class="o">$</span>amount<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Viewing metadata before importing</strong></p>
<ul>
<li><code class="codehilite">spec_csv</code> for .csv and .tsv files.</li>
<li><code class="codehilite">spec_delim</code> for .txt files (among others).</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Specifications of chickwts</span>
spec_csv<span class="p">(</span><span class="s">&#39;chickwts.csv&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="from-importing-data-from-the-web_1">(from Importing Data from the Web)<a class="headerlink" href="#from-importing-data-from-the-web_1" title="Permanent link">&para;</a></h4>
<p><strong>Import Flat files from the web</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import the csv file: pools</span>
url_csv <span class="o">&lt;-</span> <span class="s">&#39;http://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/swimming_pools.csv&#39;</span>
pools <span class="o">&lt;-</span> read_csv<span class="p">(</span>url_csv<span class="p">)</span>

pools

<span class="c1"># Import the txt file: potatoes</span>
url_delim <span class="o">&lt;-</span> <span class="s">&#39;http://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/potatoes.txt&#39;</span>
potatoes <span class="o">&lt;-</span> read_tsv<span class="p">(</span>url_delim<span class="p">)</span>

potatoes
</pre></div>
</td></tr></table>

<p><strong>Secure importing</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import the file using read_csv(): pools2</span>
pools2 <span class="o">&lt;-</span> read_csv<span class="p">(</span>url_csv<span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="the-datatable-package">The <code class="codehilite">data.table</code> package<a class="headerlink" href="#the-datatable-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">fread</code> == <code class="codehilite">read.table</code>.</li>
<li>.txt files only.</li>
<li>Fast.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>data.table<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">fread</code> for .txt files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import potatoes.txt with fread(): potatoes</span>
potatoes <span class="o">&lt;-</span> fread<span class="p">(</span><span class="s">&#39;potatoes.txt&#39;</span><span class="p">)</span>

<span class="c1"># Print out arranged version of potatoes</span>
potatoes<span class="p">[</span><span class="kp">order</span><span class="p">(</span>moistness<span class="p">),]</span> 

<span class="c1"># Import 20 rows of potatoes.txt with fread(): potatoes_part</span>
potatoes_part <span class="o">&lt;-</span> fread<span class="p">(</span><span class="s">&#39;potatoes.txt&#39;</span><span class="p">,</span> nrows <span class="o">=</span> <span class="m">20</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">fread</code>: more advanced use</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import columns 6, 7 and 8 of potatoes.txt: potatoes</span>
potatoes <span class="o">&lt;-</span> fread<span class="p">(</span><span class="s">&#39;potatoes.txt&#39;</span><span class="p">,</span> select <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">6</span><span class="o">:</span><span class="m">8</span><span class="p">))</span>

<span class="c1"># Keep only tasty potatoes (flavor &gt; 3): tasty_potatoes</span>
tasty_potatoes <span class="o">&lt;-</span> <span class="kp">subset</span><span class="p">(</span>potatoes<span class="p">,</span> potatoes<span class="o">$</span>flavor <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h3 id="importing-data-from-excel">Importing Data from Excel<a class="headerlink" href="#importing-data-from-excel" title="Permanent link">&para;</a></h3>
<h4 id="the-readxl-package">The <code class="codehilite">readxl</code> package<a class="headerlink" href="#the-readxl-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">excel_sheets</code>; list.</li>
<li><code class="codehilite">read_excel</code>; import.</li>
<li>.xlsx files only.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>readxl<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>List the sheets of an Excel file</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Find the names of both spreadsheets: sheets</span>
<span class="c1"># Before, find out what is in the directory with &#39;dir()&#39;</span>
sheets <span class="o">&lt;-</span> excel_sheets<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">)</span>

sheets
</pre></div>
</td></tr></table>

<p><strong>Importing an Excel sheet</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Read the first sheet of latitude.xlsx: latitude_1</span>
latitude_1 <span class="o">&lt;-</span> read_excel<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">,</span> sheet <span class="o">=</span> <span class="m">1</span><span class="p">)</span>

<span class="c1"># Read the second sheet of latitude.xlsx: latitude_2</span>
latitude_2 <span class="o">&lt;-</span> read_excel<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">,</span> sheet <span class="o">=</span> <span class="m">2</span><span class="p">)</span>

<span class="c1"># Put latitude_1 and latitude_2 in a list: lat_list</span>
lat_list <span class="o">&lt;-</span> <span class="kt">list</span><span class="p">(</span>latitude_1<span class="p">,</span> latitude_2<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Reading a workbook</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Read all Excel sheets with lapply(): lat_list</span>
lat_list <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span>excel_sheets<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">),</span> read_excel<span class="p">,</span> path <span class="o">=</span> <span class="s">&#39;latitude.xlsx&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>The <code class="codehilite">col_names</code> argument</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import the the first Excel sheet of latitude_nonames.xlsx (R gives names): latitude_3</span>
latitude_3 <span class="o">&lt;-</span> read_excel<span class="p">(</span><span class="s">&#39;latitude_nonames.xlsx&#39;</span><span class="p">,</span> sheet <span class="o">=</span> <span class="m">1</span><span class="p">,</span> col_names <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

<span class="c1"># Import the the second Excel sheet of latitude_nonames.xlsx (specify col_names): latitude_4 </span>
latitude_4 <span class="o">&lt;-</span> read_excel<span class="p">(</span><span class="s">&#39;latitude_nonames.xlsx&#39;</span><span class="p">,</span> sheet <span class="o">=</span> <span class="m">1</span><span class="p">,</span> col_names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;country&#39;</span><span class="p">,</span> <span class="s">&#39;latitude&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong>The <code class="codehilite">skip</code> argument</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import the second sheet of latitude.xlsx, skipping the first 21 rows: latitude_sel</span>
latitude_sel <span class="o">&lt;-</span> read_excel<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">,</span> skip <span class="o">=</span> <span class="m">21</span><span class="p">,</span> col_names <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="from-importing-data-from-the-web_2">(from Importing Data from the Web)<a class="headerlink" href="#from-importing-data-from-the-web_2" title="Permanent link">&para;</a></h4>
<p><strong>Import Excel files from the web</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Download file behind URL, name it local_latitude.xls</span>
download.file<span class="p">(</span>url_xls<span class="p">,</span> <span class="s">&#39;local_latitude.xls&#39;</span><span class="p">)</span>

<span class="c1"># Import the local .xls file with readxl: excel_readxl</span>
excel_readxl <span class="o">&lt;-</span> read_excel<span class="p">(</span><span class="s">&#39;local_latitude.xls&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Downloading any file, secure or not</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># https URL to the wine RData file.</span>
url_rdata <span class="o">&lt;-</span> <span class="s">&#39;https://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/wine.RData&#39;</span>

<span class="c1"># Download the wine file to your working directory</span>
download.file<span class="p">(</span>url_rdata<span class="p">,</span> <span class="s">&#39;wine_local.RData&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h4 id="the-xlconnect-package">The <code class="codehilite">XLConnect</code> package<a class="headerlink" href="#the-xlconnect-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">loadWorkbook</code>.</li>
<li><code class="codehilite">getSheets</code>.</li>
<li><code class="codehilite">readWorksheet</code>.</li>
<li><code class="codehilite">readWorksheetFromFile</code></li>
<li><code class="codehilite">readNamedRegion</code></li>
<li>
<p><code class="codehilite">readNamedRegionFromFile</code></p>
</li>
<li>
<p>.xls &amp; .xlsx files.</p>
</li>
<li>Like reading a database.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>XLConnectJars<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>XLConnect<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Import a workbook</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Build connection to latitude.xlsx: my_book</span>
my_book <span class="o">&lt;-</span> loadWorkbook<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>List and read Excel sheets</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Build connection to latitude.xlsx</span>
my_book <span class="o">&lt;-</span> loadWorkbook<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">)</span>

<span class="c1"># List the sheets in latitude.xlsx</span>
getSheets<span class="p">(</span>my_book<span class="p">)</span>

<span class="c1"># Import the second sheet in latitude.xlsx</span>
readWorksheet<span class="p">(</span>my_book<span class="p">,</span> sheet <span class="o">=</span> <span class="m">2</span><span class="p">)</span>

<span class="c1"># Import the second column of the first sheet in latitude.xlsx</span>
readWorksheet<span class="p">(</span>my_book<span class="p">,</span> sheet <span class="o">=</span> <span class="m">2</span><span class="p">,</span> startCol <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Add and populate worksheets</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Build connection to latitude.xlsx</span>
my_book <span class="o">&lt;-</span> loadWorkbook<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">)</span>

<span class="c1"># Create data frame: summ</span>
dims1 <span class="o">&lt;-</span> <span class="kp">dim</span><span class="p">(</span>readWorksheet<span class="p">(</span>my_book<span class="p">,</span> <span class="m">1</span><span class="p">))</span>
dims2 <span class="o">&lt;-</span> <span class="kp">dim</span><span class="p">(</span>readWorksheet<span class="p">(</span>my_book<span class="p">,</span> <span class="m">2</span><span class="p">))</span>
summ <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>sheets <span class="o">=</span> getSheets<span class="p">(</span>my_book<span class="p">),</span> 
                   nrows <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>dims1<span class="p">[</span><span class="m">1</span><span class="p">],</span> dims2<span class="p">[</span><span class="m">1</span><span class="p">]),</span> 
                   ncols <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>dims1<span class="p">[</span><span class="m">2</span><span class="p">],</span> dims2<span class="p">[</span><span class="m">2</span><span class="p">]))</span>

<span class="c1"># Add a worksheet to my_book, named &#39;data_summary&#39;</span>
createSheet<span class="p">(</span>my_book<span class="p">,</span> name <span class="o">=</span> <span class="s">&#39;data_summary&#39;</span><span class="p">)</span>

<span class="c1"># Populate &#39;data_summary&#39; with summ data frame</span>
writeWorksheet<span class="p">(</span>my_book<span class="p">,</span> summ<span class="p">,</span> sheet <span class="o">=</span> <span class="s">&#39;data_summary&#39;</span><span class="p">)</span>
<span class="c1"># Save workbook as latitude_with_summ.xlsx</span>

saveWorkbook<span class="p">(</span>my_book<span class="p">,</span> <span class="s">&#39;latitude_with_summ.xlsx&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>One unique function</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Read in the data set and assign to the object</span>
impact <span class="o">&lt;-</span> readWorksheetFromFile<span class="p">(</span><span class="s">&#39;A Hands-on Introduction to Statistics with R.xls&#39;</span><span class="p">,</span> sheet <span class="o">=</span> <span class="s">&#39;impact&#39;</span><span class="p">,</span> header <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> startCol <span class="o">=</span> <span class="m">1</span><span class="p">,</span> startRow <span class="o">=</span> <span class="m">1</span><span class="p">)</span>

<span class="c1"># more arguments</span>
<span class="c1"># endCol = 1</span>
<span class="c1"># endRow = 1</span>
<span class="c1"># autofitRow = </span>
<span class="c1"># autofitCol = </span>
<span class="c1"># region =</span>
<span class="c1"># rownames =</span>
<span class="c1"># colTypes =</span>
<span class="c1"># forceConversion =</span>
<span class="c1"># dateTimeFormat =</span>
<span class="c1"># check.names =</span>
<span class="c1"># useCachedValues =</span>
<span class="c1"># keep =</span>
<span class="c1"># drop =</span>
<span class="c1"># simplify =</span>
<span class="c1"># readStrategy =</span>
</pre></div>
</td></tr></table>

<h3 id="importing-data-from-other-statistical-software">Importing Data from Other Statistical Software<a class="headerlink" href="#importing-data-from-other-statistical-software" title="Permanent link">&para;</a></h3>
<h4 id="the-haven-package">The <code class="codehilite">haven</code> package<a class="headerlink" href="#the-haven-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">read_sas</code>; sas7bdat &amp; sas7bcat files.</li>
<li><code class="codehilite">read_stata</code>; version; dta files.</li>
<li><code class="codehilite">read_dta</code>; idem.</li>
<li><code class="codehilite">read_spss</code>; sav &amp; por files (and see below).</li>
<li><code class="codehilite">read_por</code>.</li>
<li><code class="codehilite">read_sav</code>.</li>
<li>Simple, few arguments.</li>
<li>Create a d.f.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>haven<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Import SAS data with haven</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import sales.sas7bdat: sales</span>
sales <span class="o">&lt;-</span> read_sas<span class="p">(</span><span class="s">&#39;sales.sas7bdat&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Import STATA data with haven</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import the data from the URL: sugar</span>
sugar <span class="o">&lt;-</span> read_dta<span class="p">(</span><span class="s">&#39;http://assets.datacamp.com/course/importing_data_into_r/trade.dta&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Import SPSS data with haven</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Specify the file path using file.path(): path</span>
path <span class="o">&lt;-</span> <span class="kp">file.path</span><span class="p">(</span><span class="s">&#39;datasets&#39;</span><span class="p">,</span> <span class="s">&#39;person.sav&#39;</span><span class="p">)</span>

<span class="c1"># Import person.sav, which is in the datasets folder: traits</span>
traits <span class="o">&lt;-</span> read_sav<span class="p">(</span>path<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Factorize, round two</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import SPSS data from the URL: work</span>
work <span class="o">&lt;-</span> read_sav<span class="p">(</span><span class="s">&#39;http://assets.datacamp.com/course/importing_data_into_r/employee.sav&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="theforeign-package">The<code class="codehilite">foreign</code> package<a class="headerlink" href="#theforeign-package" title="Permanent link">&para;</a></h4>
<ul>
<li>Cannot import SAS, see the <code class="codehilite">sas7bdat</code> package.</li>
<li><code class="codehilite">read.dta</code>; dta files.</li>
<li><code class="codehilite">read.spss</code>; sav &amp; por files.</li>
<li>Comprehensive.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>foreign<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Import STATA data with foreign (1)</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import florida.dta and name the resulting data frame florida</span>
florida <span class="o">&lt;-</span> read.dta<span class="p">(</span><span class="s">&#39;florida.dta&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Import STATA data with foreign (2)</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Specify the file path using file.path(): path</span>
path <span class="o">&lt;-</span> <span class="kp">file.path</span><span class="p">(</span><span class="s">&#39;worldbank&#39;</span><span class="p">,</span> <span class="s">&#39;edequality.dta&#39;</span><span class="p">)</span>

<span class="c1"># Create and print structure of edu_equal_1</span>
edu_equal_1 <span class="o">&lt;-</span> read.dta<span class="p">(</span>path<span class="p">)</span>

<span class="c1"># Create and print structure of edu_equal_2</span>
edu_equal_2 <span class="o">&lt;-</span> read.dta<span class="p">(</span>path<span class="p">,</span> convert.factors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

<span class="c1"># Create and print structure of edu_equal_3</span>
edu_equal_3 <span class="o">&lt;-</span> read.dta<span class="p">(</span>path<span class="p">,</span> convert.underscore <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> 
</pre></div>
</td></tr></table>

<p><strong>Import SPSS data with foreign (1)</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import international.sav as a data frame: demo</span>
demo <span class="o">&lt;-</span> read.spss<span class="p">(</span><span class="s">&#39;international.sav&#39;</span><span class="p">,</span> to.data.frame <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Import SPSS data with foreign (2)</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import international.sav as demo_1</span>
demo_1 <span class="o">&lt;-</span> read.spss<span class="p">(</span><span class="s">&#39;international.sav&#39;</span><span class="p">,</span> to.data.frame <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>

<span class="c1"># Import international.sav as demo_2</span>
demo_2 <span class="o">&lt;-</span> read.spss<span class="p">(</span><span class="s">&#39;international.sav&#39;</span><span class="p">,</span> to.data.frame <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> use.value.labels <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h3 id="importing-data-from-relational-data">Importing Data from Relational Data<a class="headerlink" href="#importing-data-from-relational-data" title="Permanent link">&para;</a></h3>
<h4 id="the-dbi-package">The <code class="codehilite">DBI</code> package<a class="headerlink" href="#the-dbi-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">dbConnect</code>.</li>
<li><code class="codehilite">dbReadTable</code>.</li>
<li><code class="codehilite">dbGetQuery</code>.</li>
<li><code class="codehilite">dbFetch</code>.</li>
<li><code class="codehilite">dbDisconnect</code>.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>DBI<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Step 1: Establish a connection</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Connect to the MySQL database: con</span>
con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span> dbname <span class="o">=</span> <span class="s">&#39;tweater&#39;</span><span class="p">,</span> host <span class="o">=</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span> user <span class="o">=</span> <span class="s">&#39;student&#39;</span><span class="p">,</span> password <span class="o">=</span> <span class="s">&#39;datacamp&#39;</span><span class="p">)</span> 

con
</pre></div>
</td></tr></table>

<p><strong>Step 2: List the database tables</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Connect to the MySQL database: con</span>
con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span> 
                 dbname <span class="o">=</span> <span class="s">&#39;tweater&#39;</span><span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;student&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;datacamp&#39;</span><span class="p">)</span>

<span class="c1"># Build a vector of table names: tables</span>
tables <span class="o">&lt;-</span> dbListTables<span class="p">(</span>con<span class="p">)</span>

<span class="c1"># Display structure of tables</span>
str<span class="p">(</span>tables<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Step 3: Import data from a table</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Connect to the MySQL database: con</span>
con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span> 
                 dbname <span class="o">=</span> <span class="s">&#39;tweater&#39;</span><span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;student&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;datacamp&#39;</span><span class="p">)</span>

<span class="c1"># Import the users table from tweater: users</span>
users <span class="o">&lt;-</span> dbReadTable<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;users&#39;</span><span class="p">)</span>

users

<span class="c1"># Import and print the tweats table from tweater: tweats</span>
tweats <span class="o">&lt;-</span> dbReadTable<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;tweats&#39;</span><span class="p">)</span>

tweats

<span class="c1"># Import and print the comments table from tweater: comments</span>
comments <span class="o">&lt;-</span> dbReadTable<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;comments&#39;</span><span class="p">)</span>

comments
</pre></div>
</td></tr></table>

<p><strong>Your very first SQL query</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span> 
                 dbname <span class="o">=</span> <span class="s">&#39;tweater&#39;</span><span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;student&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;datacamp&#39;</span><span class="p">)</span>

<span class="c1"># Import post column of tweats where date is higher than &#39;2015-09-21&#39;: latest</span>
latest <span class="o">&lt;-</span> dbGetQuery<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;SELECT post FROM tweats WHERE date &gt; \&#39;2015-09-21\&#39;&#39;</span><span class="p">)</span>

latest

<span class="c1"># Import tweat_id column of comments where user_id is 1: elisabeth</span>
elisabeth <span class="o">&lt;-</span> dbGetQuery<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;SELECT tweat_id FROM comments WHERE user_id = 1&#39;</span><span class="p">)</span>

elisabeth
</pre></div>
</td></tr></table>

<p><strong>More advanced SQL queries</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Connect to the database</span>
con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span>
                 dbname <span class="o">=</span> <span class="s">&#39;tweater&#39;</span><span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;student&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;datacamp&#39;</span><span class="p">)</span>

<span class="c1"># Create data frame specific</span>
specific <span class="o">&lt;-</span> dbGetQuery<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;SELECT message FROM comments WHERE tweat_id = 77 AND user_id &gt; 4&#39;</span><span class="p">)</span>

specific

<span class="c1"># Create data frame short</span>
short <span class="o">&lt;-</span> dbGetQuery<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;SELECT id, name FROM users WHERE CHAR_LENGTH(name) &lt; 5&#39;</span><span class="p">)</span>

short
</pre></div>
</td></tr></table>

<p><strong>Send - Fetch - Clear</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Connect to the database</span>
con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span> 
                 dbname <span class="o">=</span> <span class="s">&#39;tweater&#39;</span><span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;student&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;datacamp&#39;</span><span class="p">)</span>

<span class="c1"># Send query to the database with dbSendQuery(): res</span>
res <span class="o">&lt;-</span> dbSendQuery<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;SELECT * FROM comments WHERE user_id &gt; 4&#39;</span><span class="p">)</span>

<span class="c1"># Display information contained in res</span>
dbGetInfo<span class="p">(</span>res<span class="p">)</span>

<span class="c1"># Use dbFetch() twice</span>
<span class="kr">while</span> <span class="p">(</span><span class="o">!</span>dbHasCompleted<span class="p">(</span>res<span class="p">))</span> <span class="p">{</span>
    chunk <span class="o">&lt;-</span> dbFetch<span class="p">(</span>res<span class="p">,</span> n <span class="o">=</span> <span class="m">2</span><span class="p">)</span>
    chunk2 <span class="o">&lt;-</span> dbFetch<span class="p">(</span>res<span class="p">)</span>
    <span class="kp">print</span><span class="p">(</span>chunk<span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Clear res</span>
dbClearResult<span class="p">(</span>res<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Be polite and &hellip;</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Database specifics</span>
dbname <span class="o">&lt;-</span> <span class="s">&#39;tweater&#39;</span>
host <span class="o">&lt;-</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span>
port <span class="o">&lt;-</span> <span class="m">3306</span>
user <span class="o">&lt;-</span> <span class="s">&#39;student&#39;</span>
password <span class="o">&lt;-</span> <span class="s">&#39;datacamp&#39;</span>

<span class="c1"># Connect to the database</span>
con <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span> dbname <span class="o">=</span> <span class="s">&#39;tweater&#39;</span><span class="p">,</span> host <span class="o">=</span> <span class="s">&#39;courses.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> port <span class="o">=</span> <span class="m">3306</span> <span class="p">,</span> user <span class="o">=</span> <span class="s">&#39;student&#39;</span><span class="p">,</span> password <span class="o">=</span> <span class="s">&#39;datacamp&#39;</span><span class="p">)</span>

<span class="c1"># Create the data frame  long_tweats</span>
long_tweats <span class="o">&lt;-</span> dbGetQuery<span class="p">(</span>con<span class="p">,</span> <span class="s">&#39;SELECT post, date FROM tweats WHERE CHAR_LENGTH(post) &gt; 40&#39;</span><span class="p">)</span>

<span class="c1"># Print long_tweats</span>
<span class="kp">print</span><span class="p">(</span>long_tweats<span class="p">)</span>

<span class="c1"># Disconnect from the database</span>
dbDisconnect<span class="p">(</span>con<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Other general packages</strong></p>
<p>The <code class="codehilite">RODBC</code> package provides access to databases (including Microsoft<br />
Access and Microsoft SQL Server) through an ODBC interface.</p>
<p>The <code class="codehilite">RJDBC</code> package provides access to databases through a JDBC<br />
interface.</p>
<p><strong>Specialized packages</strong></p>
<ul>
<li><code class="codehilite">ROracle</code> provides an interface for Oracle.</li>
<li><code class="codehilite">RMySQL</code> provides access to MySQL.</li>
<li><code class="codehilite">RpostgreSQL</code> to PostgreSQL.</li>
<li><code class="codehilite">RSQLite</code> to SQLite.</li>
<li>And there are manu more packages for NoSQL databases such<br />
    as MongoDB.</li>
</ul>
<h3 id="importing-data-from-relational-data-more">Importing Data from Relational Data &ndash; More<a class="headerlink" href="#importing-data-from-relational-data-more" title="Permanent link">&para;</a></h3>
<h4 id="dbi"><code class="codehilite">DBI</code><a class="headerlink" href="#dbi" title="Permanent link">&para;</a></h4>
<p>First, change the working directory with <code class="codehilite">setwd</code>. Install the <code class="codehilite">DBI</code><br />
library.</p>
<p><strong>Connect and read preliminary results</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>DBI<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>sqliter<span class="p">)</span>

<span class="c1"># Assign the sqlite database and full path to a variable</span>
dbfile <span class="o">=</span> <span class="s">&#39;chinook.db&#39;</span>

<span class="c1"># Instantiate the dbDriver to a convenient object</span>
sqlite <span class="o">=</span> dbDriver<span class="p">(</span><span class="s">&#39;SQLite&#39;</span><span class="p">)</span>

<span class="c1"># Assign the connection string to a connection object</span>
sqlitedb <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RSQLite<span class="o">::</span>SQLite<span class="p">(),</span> 
                 dbname <span class="o">=</span> dbfile<span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>sqlitedb<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Extract some data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Assign the results of a SQL query to an object</span>
results <span class="o">=</span> dbSendQuery<span class="p">(</span>sqlitedb<span class="p">,</span> <span class="s">&quot;SELECT * FROM albums&quot;</span><span class="p">)</span>

<span class="c1"># Return results from a custom object to a data.frame</span>
data <span class="o">=</span> fetch<span class="p">(</span>results<span class="p">)</span>

<span class="c1"># Print data frame to console</span>
<span class="kp">head</span><span class="p">(</span>data<span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Clear the results and close the connection</span>
dbClearResult<span class="p">(</span>results<span class="p">)</span>

<span class="c1"># Disconnect from the database</span>
dbDisconnect<span class="p">(</span>sqlitedb<span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="rsqlite"><code class="codehilite">RSQLite</code><a class="headerlink" href="#rsqlite" title="Permanent link">&para;</a></h4>
<p>First, change the working directory with <code class="codehilite">setwd</code>. Install the <code class="codehilite">RSQLite</code><br />
library.</p>
<p><strong>Connect and read preliminary results</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>RSQLite<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>sqliter<span class="p">)</span>

<span class="c1"># Assign the sqlite database and full path to a variable</span>
dbfile <span class="o">=</span> <span class="s">&#39;chinook.db&#39;</span>

<span class="c1"># Instantiate the dbDriver to a convenient object</span>
sqlite <span class="o">=</span> dbDriver<span class="p">(</span><span class="s">&#39;SQLite&#39;</span><span class="p">)</span>

<span class="c1"># Assign the connection string to a connection object</span>
mysqldb <span class="o">=</span> dbConnect<span class="p">(</span>sqlite<span class="p">,</span> dbfile<span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>sqlitedb<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Extract some data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Assign the results of a SQL query to an object</span>
results <span class="o">=</span> dbSendQuery<span class="p">(</span>sqlitedb<span class="p">,</span> <span class="s">&quot;SELECT * FROM albums&quot;</span><span class="p">)</span>

<span class="c1"># Check the object</span>
results
dbGetInfo<span class="p">(</span>results<span class="p">)</span>

<span class="c1"># Return results from a custom object to a data.frame</span>
data <span class="o">=</span> fetch<span class="p">(</span>results<span class="p">)</span>

<span class="c1"># Print data frame to console</span>
<span class="kp">head</span><span class="p">(</span>data<span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Clear the results and close the connection</span>
dbClearResult<span class="p">(</span>results<span class="p">)</span>

<span class="c1"># Disconnect from the database</span>
dbDisconnect<span class="p">(</span>sqlitedb<span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="mysql-with-dbi-or-rmysql">MySQL with <code class="codehilite">DBI</code> or <code class="codehilite">RMySQL</code><a class="headerlink" href="#mysql-with-dbi-or-rmysql" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>DBI<span class="p">)</span>

<span class="c1"># Assign the sqlite database and full path to a variable</span>
dbfile <span class="o">=</span> <span class="s">&#39;chinook.db&#39;</span>

<span class="c1"># Instantiate the dbDriver to a convenient object</span>
mysql <span class="o">=</span> dbDriver<span class="p">(</span><span class="s">&#39;MySQL&#39;</span><span class="p">)</span>

<span class="c1"># Assign the connection string to a connection object</span>
mysqldb <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RMySQL<span class="o">::</span>MySQL<span class="p">(),</span> 
                 dbname <span class="o">=</span> dbfile<span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>mysqldb<span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>mysqldb<span class="p">)</span>

<span class="c1"># Disconnect from the database</span>
dbDisconnect<span class="p">(</span>mysqldb<span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>RMySQL<span class="p">)</span>

<span class="c1"># Assign the sqlite database and full path to a variable</span>
dbfile <span class="o">=</span> <span class="s">&#39;chinook.db&#39;</span>

<span class="c1"># Instantiate the dbDriver to a convenient object</span>
mysql <span class="o">=</span> dbDriver<span class="p">(</span><span class="s">&#39;MySQL&#39;</span><span class="p">)</span>

<span class="c1"># Assign the connection string to a connection object</span>
mysqldb <span class="o">=</span> dbConnect<span class="p">(</span>mysql<span class="p">,</span> dbfile<span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>mysqldb<span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>mysqldb<span class="p">)</span>

<span class="c1"># Disconnect from the database</span>
dbDisconnect<span class="p">(</span>mysqldb<span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="posgresql-with-dbi-or-rpostgresql">PosgreSQL with <code class="codehilite">DBI</code> or <code class="codehilite">RPostgreSQL</code><a class="headerlink" href="#posgresql-with-dbi-or-rpostgresql" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>DBI<span class="p">)</span>

<span class="c1"># Assign the sqlite database and full path to a variable</span>
dbfile <span class="o">=</span> <span class="s">&#39;chinook.db&#39;</span>

<span class="c1"># Instantiate the dbDriver to a convenient object</span>
postgresql <span class="o">=</span> dbDriver<span class="p">(</span><span class="s">&#39;PostgreSQL&#39;</span><span class="p">)</span>

<span class="c1"># Assign the connection string to a connection object</span>
postgresqldb <span class="o">&lt;-</span> dbConnect<span class="p">(</span>RPostgreSQL<span class="o">::</span>PostgreSQL<span class="p">(),</span> 
                 dbname <span class="o">=</span> dbfile<span class="p">,</span> 
                 host <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> 
                 port <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                 user <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 password <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>postgresqldb<span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>postgresqldb<span class="p">)</span>

<span class="c1"># Disconnect from the database</span>
dbDisconnect<span class="p">(</span>postgresqldb<span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>RPostgreSQL<span class="p">)</span>

<span class="c1"># Assign the sqlite database and full path to a variable</span>
dbfile <span class="o">=</span> <span class="s">&#39;chinook.db&#39;</span>

<span class="c1"># Instantiate the dbDriver to a convenient object</span>
postgresql <span class="o">=</span> dbDriver<span class="p">(</span><span class="s">&#39;PostgreSQL&#39;</span><span class="p">)</span>

<span class="c1"># Assign the connection string to a connection object</span>
postgresqldb <span class="o">=</span> dbConnect<span class="p">(</span>postgresql<span class="p">,</span> dbfile<span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>postgresqldb<span class="p">)</span>

<span class="c1"># Request a list of tables using the connection object</span>
dbListTables<span class="p">(</span>postgresqldb<span class="p">)</span>

<span class="c1"># Disconnect from the database</span>
dbDisconnect<span class="p">(</span>postgresqldb<span class="p">)</span>
</pre></div>
</td></tr></table>

<h3 id="importing-data-from-the-web">Importing Data from the Web<a class="headerlink" href="#importing-data-from-the-web" title="Permanent link">&para;</a></h3>
<p>The other package above can download files from the web. The next<br />
packages are web-oriented.</p>
<h4 id="the-httr-package">The <code class="codehilite">httr</code> package<a class="headerlink" href="#the-httr-package" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">GET</code> pages and files from the web.</li>
<li>Concise.</li>
<li>Parse JSON files.</li>
<li>Communicate with APIs.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>httr<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>HTTP? <code class="codehilite">httr</code>!</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Get the url, save response to resp</span>
url <span class="o">&lt;-</span> <span class="s">&#39;http://docs.datacamp.com/teach/&#39;</span>
resp <span class="o">&lt;-</span> GET<span class="p">(</span><span class="kp">url</span><span class="p">)</span>

resp

<span class="c1"># Get the raw content of resp</span>
raw_content <span class="o">&lt;-</span> content<span class="p">(</span>resp<span class="p">,</span> as <span class="o">=</span> <span class="s">&#39;raw&#39;</span><span class="p">)</span>

<span class="c1"># Print the head of content</span>
<span class="kp">head</span><span class="p">(</span>raw_content<span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Get the url</span>
url <span class="o">&lt;-</span> <span class="s">&#39;https://www.omdbapi.com/?t=Annie+Hall&amp;y=&amp;plot=short&amp;r=json&#39;</span>

resp <span class="o">&lt;-</span> GET<span class="p">(</span><span class="kp">url</span><span class="p">)</span>

<span class="c1"># Print resp</span>
resp

<span class="c1"># Print content of resp as text</span>
content<span class="p">(</span>resp<span class="p">,</span> as <span class="o">=</span> <span class="s">&#39;text&#39;</span><span class="p">)</span>

<span class="c1"># Print content of resp</span>
content<span class="p">(</span>resp<span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="the-jsonlite-package">The <code class="codehilite">jsonlite</code> package<a class="headerlink" href="#the-jsonlite-package" title="Permanent link">&para;</a></h4>
<ul>
<li>Robust.</li>
<li>Improve the imported data.</li>
<li><code class="codehilite">fromJSON</code>.</li>
<li>from an R object to <code class="codehilite">toJSON</code></li>
<li><code class="codehilite">prettify</code>.</li>
<li><code class="codehilite">minify</code>.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>jsonlite<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>From <code class="codehilite">JSON</code> to R</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Convert wine_json to a list: wine</span>
wine_json <span class="o">&lt;-</span> <span class="s">&#39;{&#39;</span>name<span class="s">&#39;:&#39;</span>Chateau Migraine<span class="s">&#39;, &#39;</span>year<span class="s">&#39;:1997, &#39;</span>alcohol_pct<span class="s">&#39;:12.4, &#39;</span>color<span class="s">&#39;:&#39;</span>red<span class="s">&#39;, &#39;</span>awarded<span class="s">&#39;:false}&#39;</span>
wine <span class="o">&lt;-</span> fromJSON<span class="p">(</span>wine_json<span class="p">)</span>

str<span class="p">(</span>wine<span class="p">)</span>

<span class="c1"># Import Quandl data: quandl_data</span>
quandl_url <span class="o">&lt;-</span> <span class="s">&#39;http://www.quandl.com/api/v1/datasets/IWS/INTERNET_INDIA.json?auth_token=i83asDsiWUUyfoypkgMz&#39;</span>
quandl_data <span class="o">&lt;-</span> fromJSON<span class="p">(</span>quandl_url<span class="p">)</span>

str<span class="p">(</span>quandl_data<span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Experiment 1</span>
json1 <span class="o">&lt;-</span> <span class="s">&#39;[1, 2, 3, 4, 5, 6]&#39;</span>
fromJSON<span class="p">(</span>json1<span class="p">)</span>

<span class="c1"># Experiment 2</span>
json2 <span class="o">&lt;-</span> <span class="s">&#39;{&#39;</span>a<span class="s">&#39;: [1, 2, 3], &#39;</span>b<span class="s">&#39;: [4, 5, 6]}&#39;</span>
fromJSON<span class="p">(</span>json2<span class="p">)</span>

<span class="c1"># Experiment 3</span>
json3 <span class="o">&lt;-</span> <span class="s">&#39;[[1, 2], [3, 4]]&#39;</span>
fromJSON<span class="p">(</span>json3<span class="p">)</span>

<span class="c1"># Experiment 4</span>
json4 <span class="o">&lt;-</span> <span class="s">&#39;[{&#39;</span>a<span class="s">&#39;: 1, &#39;</span>b<span class="s">&#39;: 2}, {&#39;</span>a<span class="s">&#39;: 3, &#39;</span>b<span class="s">&#39;: 4}, {&#39;</span>a<span class="s">&#39;: 5, &#39;</span>b<span class="s">&#39;: 6}]&#39;</span>
fromJSON<span class="p">(</span>json4<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Ask OMDb</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Definition of the URLs</span>
url_sw4 <span class="o">&lt;-</span> <span class="s">&#39;http://www.omdbapi.com/?i=tt0076759&amp;r=json&#39;</span>
url_sw3 <span class="o">&lt;-</span> <span class="s">&#39;http://www.omdbapi.com/?i=tt0121766&amp;r=json&#39;</span>

<span class="c1"># Import two URLs with fromJSON(): sw4 and sw3</span>
sw4 <span class="o">&lt;-</span> fromJSON<span class="p">(</span>url_sw4<span class="p">)</span>
sw3 <span class="o">&lt;-</span> fromJSON<span class="p">(</span>url_sw3<span class="p">)</span>

<span class="c1"># Print out the Title element of both lists</span>
sw4<span class="o">$</span>Title
sw3<span class="o">$</span>Title

<span class="c1"># Is the release year of sw4 later than sw3</span>
sw4<span class="o">$</span>Year <span class="o">&gt;</span> sw3<span class="o">$</span>Year
</pre></div>
</td></tr></table>

<p><strong>From R to <code class="codehilite">JSON</code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># URL pointing to the .csv file</span>
url_csv <span class="o">&lt;-</span> <span class="s">&#39;http://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/water.csv&#39;</span>

<span class="c1"># Import the .csv file located at url_csv</span>
water <span class="o">&lt;-</span> read.csv<span class="p">(</span>url_csv<span class="p">,</span> stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

<span class="c1"># Generate a summary of water</span>
<span class="kp">summary</span><span class="p">(</span>water<span class="p">)</span>

<span class="c1"># Convert the data file according to the requirements</span>
water_json <span class="o">&lt;-</span> toJSON<span class="p">(</span>water<span class="p">)</span>

water_json
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">Minify</code> and <code class="codehilite">prettify</code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Convert mtcars to a pretty JSON: pretty_json</span>
pretty_json <span class="o">&lt;-</span> toJSON<span class="p">(</span>mtcars<span class="p">,</span> pretty <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>

<span class="c1"># Print pretty_json</span>
pretty_json

<span class="c1"># Minify pretty_json: mini_json</span>
mini_json <span class="o">&lt;-</span> minify<span class="p">(</span>pretty_json<span class="p">)</span>

<span class="c1"># Print mini_json</span>
mini_json
</pre></div>
</td></tr></table>

<h3 id="keyboard-inputting">Keyboard Inputting<a class="headerlink" href="#keyboard-inputting" title="Permanent link">&para;</a></h3>
<p><strong>Coding</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># create a data frame from scratch</span>
age <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">25</span><span class="p">,</span> <span class="m">30</span><span class="p">,</span> <span class="m">56</span><span class="p">)</span>
gender <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;male&quot;</span><span class="p">,</span> <span class="s">&quot;female&quot;</span><span class="p">,</span> <span class="s">&quot;male&quot;</span><span class="p">)</span>
weight <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">160</span><span class="p">,</span> <span class="m">110</span><span class="p">,</span> <span class="m">220</span><span class="p">)</span>
mydata <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>age<span class="p">,</span>gender<span class="p">,</span>weight<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Spreadsheet-like</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># enter data using editor</span>
mydata <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>age <span class="o">=</span> <span class="kt">numeric</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> gender <span class="o">=</span> <span class="kt">character</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> weight <span class="o">=</span> <span class="kt">numeric</span><span class="p">(</span><span class="m">0</span><span class="p">))</span>

mydata <span class="o">&lt;-</span> edit<span class="p">(</span>mydata<span class="p">)</span>
<span class="c1"># note that without the assignment in the line above, the edits are not saved! </span>
</pre></div>
</td></tr></table>

<h3 id="exporting-data">Exporting Data<a class="headerlink" href="#exporting-data" title="Permanent link">&para;</a></h3>
<h4 id="to-a-tab-delimited-text-file">To a Tab-Delimited Text File<a class="headerlink" href="#to-a-tab-delimited-text-file" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>write.table<span class="p">(</span>mydata<span class="p">,</span> <span class="s">&#39;c:/mydata.txt&#39;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="to-an-excel-spreadsheet">To an Excel Spreadsheet<a class="headerlink" href="#to-an-excel-spreadsheet" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>xlsx<span class="p">)</span>

write.xlsx<span class="p">(</span>mydata<span class="p">,</span> <span class="s">&quot;c:/mydata.xlsx&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Worksheet</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>XLConnect<span class="p">)</span>
<span class="c1"># xls or xlsx</span>

<span class="c1"># write a worksheet in steps</span>
wb <span class="o">&lt;-</span> loadWorkbook<span class="p">(</span><span class="s">&#39;XLConnectExample1.xls&#39;</span><span class="p">,</span> create <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
createSheet<span class="p">(</span>wb<span class="p">,</span> name <span class="o">=</span> <span class="s">&#39;chickSheet&#39;</span><span class="p">)</span>
writeWorksheet<span class="p">(</span>wb<span class="p">,</span> ChickWeight<span class="p">,</span> sheet <span class="o">=</span> <span class="s">&#39;chickSheet&#39;</span><span class="p">,</span> startRow <span class="o">=</span> <span class="m">3</span><span class="p">,</span> startCol <span class="o">=</span> <span class="m">4</span><span class="p">)</span>
saveWorkbook<span class="p">(</span>wb<span class="p">)</span>

<span class="c1"># write a worksheet all in one step</span>
ChickWeight <span class="o">&lt;-</span> <span class="m">1</span>

writeWorksheetToFile<span class="p">(</span><span class="s">&#39;XLConnectExample2.xlsx&#39;</span><span class="p">,</span> data <span class="o">=</span> ChickWeight<span class="p">,</span> sheet <span class="o">=</span> <span class="s">&#39;chickSheet&#39;</span><span class="p">,</span> startRow <span class="o">=</span> <span class="m">3</span><span class="p">,</span> startCol <span class="o">=</span> <span class="m">4</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Field</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># write a field in steps</span>
wb <span class="o">=</span> loadWorkbook<span class="p">(</span><span class="s">&#39;XLConnectExample3.xlsx&#39;</span><span class="p">,</span> create <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
createSheet<span class="p">(</span>wb<span class="p">,</span> name <span class="o">=</span> <span class="s">&#39;womenData&#39;</span><span class="p">)</span>
createName<span class="p">(</span>wb<span class="p">,</span> name <span class="o">=</span> <span class="s">&#39;womenName&#39;</span><span class="p">,</span> formula <span class="o">=</span> <span class="s">&#39;womenData!$C$5&#39;</span><span class="p">,</span> overwrite <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
writeNamedRegion<span class="p">(</span>wb<span class="p">,</span> women<span class="p">,</span> name <span class="o">=</span> <span class="s">&quot;womenName&quot;</span><span class="p">)</span>
saveWorkbook<span class="p">(</span>wb<span class="p">)</span>

<span class="c1"># write a field all in one step</span>
writeNamedRegionToFile<span class="p">(</span><span class="s">&quot;XLConnectExample4.xlsx&quot;</span><span class="p">,</span> women<span class="p">,</span> name <span class="o">=</span> <span class="s">&quot;womenName&quot;</span><span class="p">,</span> formula <span class="o">=</span> <span class="s">&quot;womenData!$C$5&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>I/O</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Build connection to latitude.xlsx</span>
my_book <span class="o">&lt;-</span> loadWorkbook<span class="p">(</span><span class="s">&#39;latitude.xlsx&#39;</span><span class="p">)</span>

<span class="c1"># Create data frame: summ</span>
dims1 <span class="o">&lt;-</span> <span class="kp">dim</span><span class="p">(</span>readWorksheet<span class="p">(</span>my_book<span class="p">,</span> <span class="m">1</span><span class="p">))</span>
dims2 <span class="o">&lt;-</span> <span class="kp">dim</span><span class="p">(</span>readWorksheet<span class="p">(</span>my_book<span class="p">,</span> <span class="m">2</span><span class="p">))</span>
summ <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>sheets <span class="o">=</span> getSheets<span class="p">(</span>my_book<span class="p">),</span> 
                   nrows <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>dims1<span class="p">[</span><span class="m">1</span><span class="p">],</span> dims2<span class="p">[</span><span class="m">1</span><span class="p">]),</span> 
                   ncols <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>dims1<span class="p">[</span><span class="m">2</span><span class="p">],</span> dims2<span class="p">[</span><span class="m">2</span><span class="p">]))</span>

<span class="c1"># Add a worksheet to my_book, named &#39;data_summary&#39;</span>
createSheet<span class="p">(</span>my_book<span class="p">,</span> name <span class="o">=</span> <span class="s">&#39;data_summary&#39;</span><span class="p">)</span>

<span class="c1"># Populate &#39;data_summary&#39; with summ data frame</span>
writeWorksheet<span class="p">(</span>my_book<span class="p">,</span> summ<span class="p">,</span> sheet <span class="o">=</span> <span class="s">&#39;data_summary&#39;</span><span class="p">)</span>
<span class="c1"># Save workbook as latitude_with_summ.xlsx</span>

saveWorkbook<span class="p">(</span>my_book<span class="p">,</span> <span class="s">&#39;latitude_with_summ.xlsx&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="to-spss">To SPSS<a class="headerlink" href="#to-spss" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>foreign<span class="p">)</span>

write.foreign<span class="p">(</span>mydata<span class="p">,</span> <span class="s">&quot;c:/mydata.txt&quot;</span><span class="p">,</span> <span class="s">&quot;c:/mydata.sps&quot;</span><span class="p">,</span> package <span class="o">=</span> <span class="s">&quot;SPSS&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="to-sas">To SAS<a class="headerlink" href="#to-sas" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>foreign<span class="p">)</span>

write.foreign<span class="p">(</span>mydata<span class="p">,</span> <span class="s">&quot;c:/mydata.txt&quot;</span><span class="p">,</span> <span class="s">&quot;c:/mydata.sas&quot;</span><span class="p">,</span> package <span class="o">=</span> <span class="s">&quot;SAS&quot;</span><span class="p">)</span> 
</pre></div>
</td></tr></table>

<h4 id="to-stata">To Stata<a class="headerlink" href="#to-stata" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>foreign<span class="p">)</span>

write.dta<span class="p">(</span>mydata<span class="p">,</span> <span class="s">&quot;c:/mydata.dta&quot;</span><span class="p">)</span> 
</pre></div>
</td></tr></table>

<h3 id="inspecting-data-missing-data">Inspecting Data - Missing Data<a class="headerlink" href="#inspecting-data-missing-data" title="Permanent link">&para;</a></h3>
<h4 id="inspecting">Inspecting<a class="headerlink" href="#inspecting" title="Permanent link">&para;</a></h4>
<ul>
<li><code class="codehilite">ls(object)</code>.</li>
<li><code class="codehilite">names(object)</code>.</li>
<li><code class="codehilite">str(object)</code>.</li>
<li><code class="codehilite">levels(object$v1)</code>.</li>
<li><code class="codehilite">dim(object)</code>.</li>
<li><code class="codehilite"><span class="k">class</span>(<span class="n">object</span>)</code>.</li>
<li><code class="codehilite">print(object)</code>.</li>
<li><code class="codehilite">head(object, 10)</code>.</li>
<li><code class="codehilite">tail(object, 20)</code>.</li>
</ul>
<p><strong>Testing for Missing Values</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>y <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="kc">NA</span><span class="p">)</span> <span class="c1"># returns TRUE of x is missing</span>
<span class="kp">is.na</span><span class="p">(</span>y<span class="p">)</span> <span class="c1"># returns a vector (F F F T) </span>
</pre></div>
</td></tr></table>

<p><strong>Recoding Values to Missing</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># recode 99 to missing for variable v1</span>
<span class="c1"># select rows where v1 is 99 and recode column v1</span>
mydata<span class="o">$</span>v1<span class="p">[</span>mydata<span class="o">$</span>v1 <span class="o">==</span> <span class="m">99</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kc">NA</span> 
</pre></div>
</td></tr></table>

<p><strong>Excluding Missing Values from Analyses</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>x <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>

<span class="kp">mean</span><span class="p">(</span>x<span class="p">)</span> <span class="c1"># returns NA</span>
<span class="kp">mean</span><span class="p">(</span>x<span class="p">,</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># returns 2 </span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># list rows of data that have missing values</span>
mydata<span class="p">[</span><span class="o">!</span>complete.cases<span class="p">(</span>mydata<span class="p">),]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># create new dataset without missing data</span>
newdata <span class="o">&lt;-</span> na.omit<span class="p">(</span>mydata<span class="p">)</span> 
</pre></div>
</td></tr></table>

<h4 id="the-dplyr-package">The <code class="codehilite">dplyr</code> package<a class="headerlink" href="#the-dplyr-package" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>

tbl_df<span class="p">(</span>iris<span class="p">)</span> <span class="c1"># almost like head/tail</span>
glimpse<span class="p">(</span>iris<span class="p">)</span> <span class="c1"># almost like str</span>
View<span class="p">(</span>iris<span class="p">)</span> <span class="c1"># open a spreadsheet</span>
</pre></div>
</td></tr></table>

<h4 id="for-thorough-cleaning">For thorough cleaning<a class="headerlink" href="#for-thorough-cleaning" title="Permanent link">&para;</a></h4>
<ul>
<li>The <a href="http://gking.harvard.edu/amelia/">Amelia II</a> software.</li>
<li>The <code class="codehilite">mitools</code> package.</li>
</ul>
<h3 id="labels-levels">Labels &amp; Levels<a class="headerlink" href="#labels-levels" title="Permanent link">&para;</a></h3>
<p><strong>Basic</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># variable v1 is coded 1, 2 or 3</span>
<span class="c1"># we want to attach value labels 1=red, 2=blue, 3=green</span>
mydata<span class="o">$</span>v1 <span class="o">&lt;-</span> <span class="kp">factor</span><span class="p">(</span>mydata<span class="o">$</span>v1<span class="p">,</span> 
                    levels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">),</span>
                    labels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="s">&quot;green&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># variable y is coded 1, 3 or 5</span>
<span class="c1"># we want to attach value labels 1=Low, 3=Medium, 5=High</span>
mydata<span class="o">$</span>v1 <span class="o">&lt;-</span> <span class="kp">ordered</span><span class="p">(</span>mydata<span class="o">$</span>y<span class="p">,</span>
                     levels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span>
                     labels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Low&quot;</span><span class="p">,</span> <span class="s">&quot;Medium&quot;</span><span class="p">,</span> <span class="s">&quot;High&quot;</span><span class="p">))</span> 
</pre></div>
</td></tr></table>

<p><strong>Order</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create a vector of temperature observations</span>
temperature_vector <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;High&#39;</span><span class="p">,</span> <span class="s">&#39;Low&#39;</span><span class="p">,</span> <span class="s">&#39;High&#39;</span><span class="p">,</span> <span class="s">&#39;Low&#39;</span><span class="p">,</span> <span class="s">&#39;Medium&#39;</span><span class="p">)</span>

<span class="c1"># Specify that they are ordinal variables with the given levels</span>
factor_temperature_vector <span class="o">&lt;-</span> <span class="kp">factor</span><span class="p">(</span>temperature_vector<span class="p">,</span> order <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> levels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Low&#39;</span><span class="p">,</span> <span class="s">&#39;Medium&#39;</span><span class="p">,</span> <span class="s">&#39;High&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong>Add comments to an object</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kp">names</span><span class="p">(</span>iris<span class="p">)[</span><span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&quot;This is the label for variable 5&quot;</span>

<span class="kp">names</span><span class="p">(</span>iris<span class="p">)[</span><span class="m">5</span><span class="p">]</span> <span class="c1"># the comment</span>
iris<span class="p">[</span><span class="m">5</span><span class="p">]</span> <span class="c1"># the data</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># labeling the variables</span>
<span class="kn">library</span><span class="p">(</span>Hmisc<span class="p">)</span>

label<span class="p">(</span>iris<span class="o">$</span>Species<span class="p">)</span> <span class="o">&lt;-</span> <span class="s">&quot;Variable label for variable myvar&quot;</span>

describe<span class="p">(</span>iris<span class="o">$</span>Species<span class="p">)</span> <span class="c1"># commented</span>
<span class="c1">#vs</span>
describe<span class="p">(</span>iris<span class="o">$</span>Sepal.Length<span class="p">)</span> <span class="c1"># not commented</span>
</pre></div>
</td></tr></table>

<hr />
<h3 id="how-to-work-with-quandl-in-r">How to work with Quandl in R<a class="headerlink" href="#how-to-work-with-quandl-in-r" title="Permanent link">&para;</a></h3>
<h4 id="importing-quandl-datasets">Importing Quandl Datasets<a class="headerlink" href="#importing-quandl-datasets" title="Permanent link">&para;</a></h4>
<p><a href="https://www.quandl.com/">Quandl</a> delivers financial, economic and<br />
alternative data to the world&rsquo;s top hedge funds, asset managers and<br />
investment banks in several formats:</p>
<ul>
<li>Excel.</li>
<li>R.</li>
<li>Python.</li>
<li>API.</li>
<li>DB.</li>
</ul>
<p>The packages used:</p>
<ul>
<li><code class="codehilite">Quandl</code>.</li>
<li><code class="codehilite">quantmod</code> for plotting.</li>
</ul>
<p><strong>Quandl - A first date</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Load in the Quandl package</span>
<span class="kn">library</span><span class="p">(</span>Quandl<span class="p">)</span>

<span class="c1"># Assign your first dataset to the variable:</span>
mydata <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;NSE/OIL&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Identifying a dataset with its ID</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Assign the Prague Stock Exchange to:</span>
PragueStockExchange <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;PRAGUESE/PX&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Plotting a stock chart</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># The quantmod package</span>
<span class="kn">library</span><span class="p">(</span>quantmod<span class="p">)</span>

<span class="c1"># Load the Facebook data with the help of Quandl</span>
Facebook <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;GOOG/NASDAQ_FB&#39;</span><span class="p">,</span> type <span class="o">=</span> <span class="s">&#39;xts&#39;</span><span class="p">)</span>

<span class="c1"># Plot the chart with the help of candleChart()</span>
candleChart<span class="p">(</span>Facebook<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Searching a Quandl dataset in R</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Look up the first 3 results for &#39;Bitcoin&#39; within the Quandl database:</span>
results <span class="o">&lt;-</span> Quandl.search<span class="p">(</span>query <span class="o">=</span> <span class="s">&#39;Bitcoin&#39;</span><span class="p">,</span> silent <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

<span class="c1"># Print out the results</span>
str<span class="p">(</span>results<span class="p">)</span>

<span class="c1"># Assign the data set with code BCHAIN/TOTBC</span>
BitCoin <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;BCHAIN/TOTBC&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="manipulating-quandl-datasets">Manipulating Quandl Datasets<a class="headerlink" href="#manipulating-quandl-datasets" title="Permanent link">&para;</a></h4>
<p><strong>Manipulating data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Assign to the variable Exchange</span>
Exchange <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;BNP/USDEUR&#39;</span><span class="p">,</span> start_date <span class="o">=</span> <span class="s">&#39;2013-01-01&#39;</span><span class="p">,</span> end_date <span class="o">=</span> <span class="s">&#39;2013-12-01&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Transforming your Quandl dataset</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># API transformation</span>
<span class="c1"># The result:</span>
GDP_Change <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;FRED/CANRGDPR&#39;</span><span class="p">,</span> transformation <span class="o">=</span> <span class="s">&#39;rdiff&#39;</span><span class="p">)</span>
<span class="kp">head</span><span class="p">(</span>GDP_Change<span class="p">)</span>
GDP_Chang <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;FRED/CANRGDPR&#39;</span><span class="p">)</span>
<span class="kp">head</span><span class="p">(</span>GDP_Chang<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>The magic of frequency collapsing</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># The result:</span>
eiaQuarterly <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;DOE/RWTC&#39;</span><span class="p">,</span> collapse <span class="o">=</span> <span class="s">&#39;quarterly&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Truncation and sort</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Assign to TruSo the first 5 observations of the crude oil prices</span>
TruSo <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;DOE/RWTC&#39;</span><span class="p">,</span> sort <span class="o">=</span> <span class="s">&#39;asc&#39;</span><span class="p">,</span> rows <span class="o">=</span> <span class="m">5</span><span class="p">)</span>

<span class="c1"># Print the result</span>
TruSo
</pre></div>
</td></tr></table>

<p><strong>A complex example</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Here you should place the return:</span>
Final <span class="o">&lt;-</span> Quandl<span class="p">(</span><span class="s">&#39;DOE/RWTC&#39;</span><span class="p">,</span> collapse <span class="o">=</span> <span class="s">&#39;daily&#39;</span><span class="p">,</span> transformation <span class="o">=</span> <span class="s">&#39;rdiff&#39;</span><span class="p">,</span> start_date <span class="o">=</span> <span class="s">&#39;2005-01-01&#39;</span><span class="p">,</span> end_date <span class="o">=</span> <span class="s">&#39;2010-03-01&#39;</span><span class="p">,</span> sort <span class="o">=</span> <span class="s">&#39;asc&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<hr />
<h3 id="cleaning-data-in-r">Cleaning Data in R<a class="headerlink" href="#cleaning-data-in-r" title="Permanent link">&para;</a></h3>
<p>The packages used:</p>
<ul>
<li><code class="codehilite">dplyr</code> &amp; <code class="codehilite">tidyr</code> for data wrangling.</li>
<li><code class="codehilite">stringr</code> for regex.</li>
<li><code class="codehilite">lubridate</code> for time and date.</li>
</ul>
<h4 id="introduction-and-exploring-raw-data">Introduction and Exploring Raw Data<a class="headerlink" href="#introduction-and-exploring-raw-data" title="Permanent link">&para;</a></h4>
<p><strong>Here&rsquo;s what messy data look like</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View the first 6 rows of data</span>
<span class="kp">head</span><span class="p">(</span>weather<span class="p">)</span>

<span class="c1"># View the last 6 rows of data</span>
<span class="kp">tail</span><span class="p">(</span>weather<span class="p">)</span>

<span class="c1"># View a condensed summary of the data</span>
str<span class="p">(</span>weather<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Getting a feel for your data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Check the class of bmi</span>
<span class="kp">class</span><span class="p">(</span>bmi<span class="p">)</span>

<span class="c1"># Check the dimensions of bmi</span>
<span class="kp">dim</span><span class="p">(</span>bmi<span class="p">)</span>

<span class="c1"># View the column names of bmi</span>
<span class="kp">names</span><span class="p">(</span>bmi<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Viewing the structure of your data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Check the structure of bmi</span>
str<span class="p">(</span>bmi<span class="p">)</span>

<span class="c1"># Load dplyr</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>

<span class="c1"># Check the structure of bmi, the dplyr way</span>
glimpse<span class="p">(</span>bmi<span class="p">)</span>

<span class="c1"># View a summary of bmi</span>
<span class="kp">summary</span><span class="p">(</span>bmi<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Looking at your data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print bmi to the console</span>
<span class="kp">print</span><span class="p">(</span>bmi<span class="p">)</span>

<span class="c1"># View the first 6 rows</span>
<span class="kp">head</span><span class="p">(</span>bmi<span class="p">,</span> <span class="m">6</span><span class="p">)</span>

<span class="c1"># View the first 15 rows</span>
<span class="kp">head</span><span class="p">(</span>bmi<span class="p">,</span> <span class="m">15</span><span class="p">)</span>

<span class="c1"># View the last 6 rows</span>
<span class="kp">tail</span><span class="p">(</span>bmi<span class="p">,</span> <span class="m">6</span><span class="p">)</span>

<span class="c1"># View the last 10 rows</span>
<span class="kp">tail</span><span class="p">(</span>bmi<span class="p">,</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Visualizing your data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Histogram of BMIs from 2008</span>
hist<span class="p">(</span>bmi<span class="o">$</span>Y2008<span class="p">)</span>

<span class="c1"># Scatter plot comparing BMIs from 1980 to those from 2008</span>
plot<span class="p">(</span>bmi<span class="o">$</span>Y1980<span class="p">,</span> bmi<span class="o">$</span>Y2008<span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="tidying-data">Tidying Data<a class="headerlink" href="#tidying-data" title="Permanent link">&para;</a></h4>
<p><strong>Gathering columns into key-value pairs</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Load tidyr</span>
<span class="kn">library</span><span class="p">(</span>tidyr<span class="p">)</span>

<span class="c1"># Apply gather() to bmi and save the result as bmi_long</span>
bmi_long <span class="o">&lt;-</span> gather<span class="p">(</span>bmi<span class="p">,</span> year<span class="p">,</span> bmi_val<span class="p">,</span> <span class="o">-</span>Country<span class="p">)</span>

<span class="c1"># View the first 20 rows of the result</span>
<span class="kp">head</span><span class="p">(</span>bmi_long<span class="p">,</span> <span class="m">20</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Spreading key-value pairs into columns</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Apply spread() to bmi_long</span>
bmi_wide <span class="o">&lt;-</span> spread<span class="p">(</span>bmi_long<span class="p">,</span> year<span class="p">,</span> bmi_val<span class="p">)</span>

<span class="c1"># View the head of bmi_wide</span>
<span class="kp">head</span><span class="p">(</span>bmi_wide<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Separating columns</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Apply separate() to bmi_cc</span>
bmi_cc_clean <span class="o">&lt;-</span> separate<span class="p">(</span>bmi_cc<span class="p">,</span> col <span class="o">=</span> Country_ISO<span class="p">,</span> into <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;Country&#39;</span><span class="p">,</span> <span class="s">&#39;ISO&#39;</span><span class="p">),</span> sep <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="p">)</span>

<span class="c1"># Print the head of the result</span>
<span class="kp">head</span><span class="p">(</span>bmi_cc_clean<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Uniting columns</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Apply unite() to bmi_cc_clean</span>
bmi_cc <span class="o">&lt;-</span> unite<span class="p">(</span>bmi_cc_clean<span class="p">,</span> Country_ISO<span class="p">,</span> Country<span class="p">,</span> ISO<span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;-&#39;</span><span class="p">)</span>

<span class="c1"># View the head of the result</span>
<span class="kp">head</span><span class="p">(</span>bmi_cc<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Column headers are values, not variable names</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View the head of census</span>
<span class="kp">head</span><span class="p">(</span>census<span class="p">)</span>

<span class="c1"># Gather the month columns</span>
census2 <span class="o">&lt;-</span> gather<span class="p">(</span>census<span class="p">,</span> month<span class="p">,</span> amount<span class="p">,</span> JAN<span class="p">,</span> FEB<span class="p">,</span> MAR<span class="p">,</span> APR<span class="p">,</span> MAY<span class="p">,</span> JUN<span class="p">,</span> JUL<span class="p">,</span> AUG<span class="p">,</span> SEP<span class="p">,</span> OCT<span class="p">,</span> NOV<span class="p">,</span> DEC<span class="p">)</span>

<span class="c1"># Arrange rows by YEAR using dplyr&#39;s arrange</span>
census2 <span class="o">&lt;-</span> arrange<span class="p">(</span>census2<span class="p">,</span> YEAR<span class="p">)</span>

<span class="c1"># View first 20 rows of census2</span>
<span class="kp">head</span><span class="p">(</span>census2<span class="p">,</span> <span class="m">20</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Variables are stored in both rows and columns</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View first 50 rows of census_long</span>
<span class="kp">head</span><span class="p">(</span>census_long<span class="p">,</span> <span class="m">50</span><span class="p">)</span>

<span class="c1"># Spread the type column</span>
census_long2 <span class="o">&lt;-</span> spread<span class="p">(</span>census_long<span class="p">,</span> type<span class="p">,</span> amount<span class="p">)</span>

<span class="c1"># View first 20 rows of census_long2</span>
<span class="kp">head</span><span class="p">(</span>census_long2<span class="p">,</span> <span class="m">20</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Multiple values are stored in one column</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View the head of census_long3</span>
<span class="kp">head</span><span class="p">(</span>census_long3<span class="p">)</span>

<span class="c1"># Separate the yr_month column into two</span>
census_long4 <span class="o">&lt;-</span> separate<span class="p">(</span>census_long3<span class="p">,</span> yr_month<span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;year&#39;</span><span class="p">,</span> <span class="s">&#39;month&#39;</span><span class="p">),</span> <span class="s">&#39;_&#39;</span><span class="p">)</span>

<span class="c1"># View the first 6 rows of the result</span>
<span class="kp">head</span><span class="p">(</span>census_long4<span class="p">,</span> <span class="m">6</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="preparing-data-for-analysis">Preparing Data for Analysis<a class="headerlink" href="#preparing-data-for-analysis" title="Permanent link">&para;</a></h4>
<p><strong>Types of variables in R</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Make this evaluate to character</span>
<span class="kp">class</span><span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">)</span>

<span class="c1"># Make this evaluate to numeric</span>
<span class="kp">class</span><span class="p">(</span><span class="m">8484.00</span><span class="p">)</span>

<span class="c1"># Make this evaluate to integer</span>
<span class="kp">class</span><span class="p">(</span><span class="m">99L</span><span class="p">)</span>

<span class="c1"># Make this evaluate to factor</span>
<span class="kp">class</span><span class="p">(</span><span class="kp">factor</span><span class="p">(</span><span class="s">&#39;factor&#39;</span><span class="p">))</span>

<span class="c1"># Make this evaluate to logical</span>
<span class="kp">class</span><span class="p">(</span><span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Common type conversions</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Preview students with str()</span>
str<span class="p">(</span>students<span class="p">)</span>

<span class="c1"># Coerce Grades to character</span>
students<span class="o">$</span>Grades <span class="o">&lt;-</span> <span class="kp">as.character</span><span class="p">(</span>students<span class="o">$</span>Grades<span class="p">)</span>

<span class="c1"># Coerce Medu to factor</span>
students<span class="o">$</span>Medu <span class="o">&lt;-</span> <span class="kp">as.factor</span><span class="p">(</span>students<span class="o">$</span>Medu<span class="p">)</span>

<span class="c1"># Coerce Fedu to factor</span>
students<span class="o">$</span>Fedu <span class="o">&lt;-</span> <span class="kp">as.factor</span><span class="p">(</span>students<span class="o">$</span>Fedu<span class="p">)</span>

 <span class="c1"># Look at students once more with str()</span>
str<span class="p">(</span>students<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Working with dates</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Preview students2 with str()</span>
str<span class="p">(</span>students2<span class="p">)</span>

<span class="c1"># Load the lubridate package</span>
<span class="kn">library</span><span class="p">(</span>lubridate<span class="p">)</span>

<span class="c1"># Parse as date</span>
ymd<span class="p">(</span><span class="s">&#39;2015-Sep-17&#39;</span><span class="p">)</span>

<span class="c1"># Parse as date and time (with no seconds!)</span>
ymd_hm<span class="p">(</span><span class="s">&#39;2012-July-15, 12.56&#39;</span><span class="p">)</span>

<span class="c1"># Coerce dob to a date (with no time)</span>
students2<span class="o">$</span>dob <span class="o">&lt;-</span> ymd<span class="p">(</span>students2<span class="o">$</span>dob<span class="p">)</span>

<span class="c1"># Coerce nurse_visit to a date and time</span>
students2<span class="o">$</span>nurse_visit <span class="o">&lt;-</span> ymd_hms<span class="p">(</span>students2<span class="o">$</span>nurse_visit<span class="p">)</span>

<span class="c1"># Look at students2 once more with str()</span>
str<span class="p">(</span>students2<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Trimming and padding strings</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Load the stringr package</span>
<span class="kn">library</span><span class="p">(</span>stringr<span class="p">)</span>

<span class="c1"># Trim all leading and trailing whitespace</span>
str_trim<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;   Filip &#39;</span><span class="p">,</span> <span class="s">&#39;Nick  &#39;</span><span class="p">,</span> <span class="s">&#39; Jonathan&#39;</span><span class="p">))</span>

<span class="c1"># Pad these strings with leading zeros</span>
str_pad<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">&#39;23485W&#39;</span><span class="p">,</span> <span class="s">&#39;8823453Q&#39;</span><span class="p">,</span> <span class="s">&#39;994Z&#39;</span><span class="p">),</span> width <span class="o">=</span> <span class="m">9</span><span class="p">,</span> side <span class="o">=</span> <span class="s">&#39;left&#39;</span><span class="p">,</span> pad <span class="o">=</span> <span class="s">&#39;0&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Upper and lower case</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print state abbreviations</span>
states

<span class="c1"># Make states all uppercase and save result to states_upper</span>
states_upper <span class="o">&lt;-</span> <span class="kp">toupper</span><span class="p">(</span>states<span class="p">)</span>
states_upper

<span class="c1"># Make states_upper all lowercase again</span>
<span class="kp">tolower</span><span class="p">(</span>states_upper<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Finding and replacing strings</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># stringr has been loaded for you</span>
<span class="c1"># Look at the head of students2</span>
<span class="kp">head</span><span class="p">(</span>students2<span class="p">)</span>

<span class="c1"># Detect all dates of birth (dob) in 1997</span>
str_detect<span class="p">(</span>students2<span class="o">$</span>dob<span class="p">,</span> <span class="s">&#39;1997&#39;</span><span class="p">)</span>

<span class="c1"># In the sex column, replace &#39;F&#39; with &#39;Female&#39;...</span>
students2<span class="o">$</span>sex <span class="o">&lt;-</span> str_replace<span class="p">(</span>students2<span class="o">$</span>sex<span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">,</span> <span class="s">&#39;Female&#39;</span><span class="p">)</span>

<span class="c1"># ...And &#39;M&#39; with &#39;Male&#39;</span>
students2<span class="o">$</span>sex <span class="o">&lt;-</span> str_replace<span class="p">(</span>students2<span class="o">$</span>sex<span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;Male&#39;</span><span class="p">)</span>

<span class="c1"># View the head of students2</span>
<span class="kp">head</span><span class="p">(</span>students2<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Finding missing values</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Call is.na() on the full social_df to spot all NAs</span>
<span class="kp">is.na</span><span class="p">(</span>social_df<span class="p">)</span>

<span class="c1"># Use the any() function to ask whether there are any NAs in the data</span>
<span class="kp">any</span><span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>social_df<span class="p">))</span>
<span class="kp">sum</span><span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>social_df<span class="p">))</span>

<span class="c1"># View a summary() of the dataset</span>
<span class="kp">summary</span><span class="p">(</span>social_df<span class="p">)</span>

<span class="c1"># Call table() on the status column</span>
<span class="kp">table</span><span class="p">(</span>social_df<span class="o">$</span>status<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Dealing with missing values</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Use str_replace() to replace all missing strings in status with NA</span>
social_df<span class="o">$</span>status <span class="o">&lt;-</span> str_replace<span class="p">(</span>social_df<span class="o">$</span>status<span class="p">,</span> <span class="s">&#39;^$&#39;</span><span class="p">,</span> <span class="kc">NA</span><span class="p">)</span>

<span class="c1"># Print social_df to the console</span>
social_df

<span class="c1"># Use complete.cases() to see which rows have no missing values</span>
complete.cases<span class="p">(</span>social_df<span class="p">)</span>

<span class="c1"># Use na.omit() to remove all rows with any missing values</span>
na.omit<span class="p">(</span>social_df<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Dealing with outliers and obvious errors</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Look at a summary() of students3</span>
<span class="kp">summary</span><span class="p">(</span>students3<span class="p">)</span>

<span class="c1"># View a histogram of the age variable</span>
hist<span class="p">(</span>students3<span class="o">$</span>age<span class="p">,</span> breaks <span class="o">=</span> <span class="m">20</span><span class="p">)</span>

<span class="c1"># View a histogram of the absences variable</span>
hist<span class="p">(</span>students3<span class="o">$</span>absences<span class="p">,</span> breaks <span class="o">=</span> <span class="m">20</span><span class="p">)</span>

<span class="c1"># View a histogram of absences, but force zeros to be bucketed to the right of zero</span>
hist<span class="p">(</span>students3<span class="o">$</span>absences<span class="p">,</span> breaks <span class="o">=</span> <span class="m">20</span><span class="p">,</span> right <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Another look at strange values</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View a boxplot of age</span>
boxplot<span class="p">(</span>students3<span class="o">$</span>age<span class="p">)</span>

<span class="c1"># View a boxplot of absences</span>
boxplot<span class="p">(</span>students3<span class="o">$</span>absences<span class="p">)</span>
</pre></div>
</td></tr></table>

<h4 id="putting-it-all-together">Putting it All Together<a class="headerlink" href="#putting-it-all-together" title="Permanent link">&para;</a></h4>
<p><strong>Get a feel for the data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Verify that weather is a data.frame</span>
<span class="kp">class</span><span class="p">(</span>weather<span class="p">)</span>

<span class="c1"># Check the dimensions</span>
<span class="kp">dim</span><span class="p">(</span>weather<span class="p">)</span>

<span class="c1"># View the column names</span>
<span class="kp">names</span><span class="p">(</span>weather<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Summarize the data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View the structure of the data</span>
str<span class="p">(</span>weather<span class="p">)</span>

<span class="c1"># Load dplyr package</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>

<span class="c1"># Look at the structure using dplyr&#39;s glimpse()</span>
glimpse<span class="p">(</span>weather<span class="p">)</span>

<span class="c1"># View a summary of the data</span>
<span class="kp">summary</span><span class="p">(</span>weather<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Take a closer look</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View first 6 rows</span>
<span class="kp">head</span><span class="p">(</span>weather<span class="p">,</span> <span class="m">6</span><span class="p">)</span>

<span class="c1"># View first 15 rows</span>
<span class="kp">head</span><span class="p">(</span>weather<span class="p">,</span> <span class="m">15</span><span class="p">)</span>

<span class="c1"># View the last 6 rows</span>
<span class="kp">tail</span><span class="p">(</span>weather<span class="p">,</span> <span class="m">6</span><span class="p">)</span>

<span class="c1"># View the last 10 rows</span>
<span class="kp">tail</span><span class="p">(</span>weather<span class="p">,</span> <span class="m">10</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Column names are values</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Load the tidyr package</span>
<span class="kn">library</span><span class="p">(</span>tidyr<span class="p">)</span>

<span class="c1"># Gather the columns</span>
weather2 <span class="o">&lt;-</span> gather<span class="p">(</span>weather<span class="p">,</span> day<span class="p">,</span> value<span class="p">,</span> X1<span class="o">:</span>X31<span class="p">,</span> na.rm <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>

<span class="c1"># View the head</span>
<span class="kp">head</span><span class="p">(</span>weather2<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Values are variable names</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># First remove column of row names</span>
weather2 <span class="o">&lt;-</span> weather2<span class="p">[,</span> <span class="m">-1</span><span class="p">]</span>

<span class="c1"># Spread the data</span>
weather3 <span class="o">&lt;-</span> spread<span class="p">(</span>weather2<span class="p">,</span> measure<span class="p">,</span> value<span class="p">)</span>

<span class="c1"># View the head</span>
<span class="kp">head</span><span class="p">(</span>weather3<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Clean up dates</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Load the stringr and lubridate packages</span>
<span class="kn">library</span><span class="p">(</span>stringr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>lubridate<span class="p">)</span>

<span class="c1"># Remove X&#39;s from day column</span>
<span class="c1"># weather3$day &lt;- str_pad(str_replace(weather3$day, &#39;X&#39;, &#39;&#39;), width = 2, side = &#39;left&#39;, pad = &#39;0&#39;)</span>
weather3<span class="o">$</span>day <span class="o">&lt;-</span> str_replace<span class="p">(</span>weather3<span class="o">$</span>day<span class="p">,</span> <span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Unite the year, month, and day columns</span>
weather4 <span class="o">&lt;-</span> unite<span class="p">(</span>weather3<span class="p">,</span> <span class="kp">date</span><span class="p">,</span> year<span class="p">,</span> month<span class="p">,</span> day<span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;-&#39;</span><span class="p">)</span>

<span class="c1"># Convert date column to proper date format using stringr&#39;s ymd()</span>
weather4<span class="o">$</span>date <span class="o">&lt;-</span> ymd<span class="p">(</span>weather4<span class="o">$</span><span class="kp">date</span><span class="p">)</span>

<span class="c1"># Rearrange columns using dplyr&#39;s select()</span>
weather5 <span class="o">&lt;-</span> select<span class="p">(</span>weather4<span class="p">,</span> <span class="kp">date</span><span class="p">,</span> Events<span class="p">,</span> CloudCover<span class="o">:</span>WindDirDegrees<span class="p">)</span>

<span class="c1"># View the head</span>
<span class="kp">head</span><span class="p">(</span>weather5<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>A closer look at column types</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># View the structure of weather5</span>
str<span class="p">(</span>weather5<span class="p">)</span>

<span class="c1"># Examine the first 20 rows of weather5. Are most of the characters numeric?</span>
<span class="kp">head</span><span class="p">(</span>weather5<span class="p">,</span> <span class="m">20</span><span class="p">)</span>

<span class="c1"># See what happens if we try to convert PrecipitationIn to numeric</span>
<span class="kp">as.numeric</span><span class="p">(</span>weather5<span class="o">$</span>PrecipitationIn<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Column type conversions</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># The dplyr package is already loaded</span>
<span class="c1"># Replace T with 0 (T = trace)</span>
weather5<span class="o">$</span>PrecipitationIn <span class="o">&lt;-</span> str_replace<span class="p">(</span>weather5<span class="o">$</span>PrecipitationIn<span class="p">,</span> <span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="s">&#39;0&#39;</span><span class="p">)</span>

<span class="c1"># Convert characters to numerics</span>
weather6 <span class="o">&lt;-</span> mutate_each<span class="p">(</span>weather5<span class="p">,</span> funs<span class="p">(</span><span class="kp">as.numeric</span><span class="p">),</span> CloudCover<span class="o">:</span>WindDirDegrees<span class="p">)</span>

<span class="c1"># Look at result</span>
str<span class="p">(</span>weather6<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Find missing values</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Count missing values</span>
<span class="kp">sum</span><span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>weather6<span class="p">))</span>

<span class="c1"># Find missing values</span>
<span class="kp">summary</span><span class="p">(</span>weather6<span class="p">)</span>

<span class="c1"># Find indices of NAs in Max.Gust.SpeedMPH</span>
ind <span class="o">&lt;-</span> <span class="kp">which</span><span class="p">(</span><span class="kp">is.na</span><span class="p">(</span>weather6<span class="o">$</span>Max.Gust.SpeedMPH<span class="p">))</span>
ind

<span class="c1"># Look at the full rows for records missing Max.Gust.SpeedMPH</span>
weather6<span class="p">[</span>ind<span class="p">,</span> <span class="p">]</span>
</pre></div>
</td></tr></table>

<p><strong>An obvious error</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Review distibutions for all variables</span>
<span class="kp">summary</span><span class="p">(</span>weather6<span class="p">)</span>

<span class="c1"># Find row with Max.Humidity of 1000</span>
ind <span class="o">&lt;-</span> <span class="kp">which</span><span class="p">(</span>weather6<span class="o">$</span>Max.Humidity <span class="o">==</span> <span class="m">1000</span><span class="p">)</span>

<span class="c1"># Look at the data for that day</span>
weather6<span class="p">[</span>ind<span class="p">,</span> <span class="p">]</span>

<span class="c1"># Change 1000 to 100</span>
weather6<span class="o">$</span>Max.Humidity<span class="p">[</span>ind<span class="p">]</span> <span class="o">&lt;-</span> <span class="m">100</span>
</pre></div>
</td></tr></table>

<p><strong>Another obvious error</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Look at summary of Mean.VisibilityMiles</span>
<span class="kp">summary</span><span class="p">(</span>weather6<span class="o">$</span>Mean.VisibilityMiles<span class="p">)</span>

<span class="c1"># Get index of row with -1 value</span>
ind <span class="o">&lt;-</span> <span class="kp">which</span><span class="p">(</span>weather6<span class="o">$</span>Mean.VisibilityMiles <span class="o">==</span> <span class="m">-1</span><span class="p">)</span>

<span class="c1"># Look at full row</span>
weather6<span class="p">[</span>ind<span class="p">,</span> <span class="p">]</span>

<span class="c1"># Set Mean.VisibilityMiles to the appropriate value</span>
weather6<span class="o">$</span>Mean.VisibilityMiles<span class="p">[</span>ind<span class="p">]</span> <span class="o">&lt;-</span> <span class="m">10</span>
</pre></div>
</td></tr></table>

<p><strong>Check other extreme values</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Review summary of full data once more</span>
<span class="kp">summary</span><span class="p">(</span>weather6<span class="p">)</span>

<span class="c1"># Look at histogram for MeanDew.PointF</span>
hist<span class="p">(</span>weather6<span class="o">$</span>MeanDew.PointF<span class="p">)</span>

<span class="c1"># Look at histogram for Min.TemperatureF</span>
hist<span class="p">(</span>weather6<span class="o">$</span>Min.TemperatureF<span class="p">)</span>

<span class="c1"># Compare to histogram for Mean.TemperatureF</span>
hist<span class="p">(</span>weather6<span class="o">$</span>Mean.TemperatureF<span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Finishing touches</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Clean up column names</span>
<span class="kp">names</span><span class="p">(</span>weather6<span class="p">)</span> <span class="o">&lt;-</span> new_colnames

<span class="c1"># Replace empty cells in Events column</span>
weather6<span class="o">$</span>events<span class="p">[</span>weather6<span class="o">$</span>events <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#39;None&#39;</span>

<span class="c1"># Print the first 6 rows of weather6</span>
<span class="kp">head</span><span class="p">(</span>weather6<span class="p">,</span> <span class="m">6</span><span class="p">)</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Working_with_RStudio_IDE/" title="Working with the RStudio IDE" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Working with the RStudio IDE
              </span>
            </div>
          </a>
        
        
          <a href="../Reading_Data_into_R_with_readr/" title="Reading Data into R with readr" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Reading Data into R with readr
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
             Ugo Sparks
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-93008985-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>