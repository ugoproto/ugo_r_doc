
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A R documentation website.">
      
      
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.0">
    
    
      
        <title>Plot Snippets - ggvis - ugo_r_doc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8b42a75e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Ubuntu";--md-code-font-family:"Ubuntu Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="red">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ugo_r_doc" class="md-header__button md-logo" aria-label="ugo_r_doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 16 7.36-5.73L21 9l-9-7-9 7 1.63 1.27M12 18.54l-7.38-5.73L3 14.07l9 7 9-7-1.63-1.27L12 18.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ugo_r_doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plot Snippets - ggvis
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ugoproto/ugo_r_doc.git/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ugo_r_doc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ugo_r_doc" class="md-nav__button md-logo" aria-label="ugo_r_doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 16 7.36-5.73L21 9l-9-7-9 7 1.63 1.27M12 18.54l-7.38-5.73L3 14.07l9 7 9-7-1.63-1.27L12 18.54z"/></svg>

    </a>
    ugo_r_doc
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ugoproto/ugo_r_doc.git/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ugo_r_doc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Cheat Sheets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cheat Sheets" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Cheat Sheets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../basics_cs/" class="md-nav__link">
        Basics Cheat Sheets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../specializations_cs/" class="md-nav__link">
        Specialization Cheat Sheets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../visualization_cs/" class="md-nav__link">
        Visualization Cheat Sheets
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Code and Vade Mecum
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code and Vade Mecum" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Code and Vade Mecum
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../frequentist_bayesian/" class="md-nav__link">
        Frequentist vs. Bayesian
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intermediate_r/" class="md-nav__link">
        Intermediate R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intermediate_r_the_apply_family/" class="md-nav__link">
        Intermediate R - The apply Family
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Data Wrangling Snippets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Wrangling Snippets" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Data Wrangling Snippets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../io_snippets_cleaning/" class="md-nav__link">
        I/O Snippets & Cleaning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reading_data_into_r_with_readr/" class="md-nav__link">
        Reading Data into R with readr
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_analysis_in_r_the_data_table_way/" class="md-nav__link">
        Data Analysis in R, the data.table Way
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_manipulation_in_r_with_dplyr/" class="md-nav__link">
        Data Manipulation in R with dplyr
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_wrangling/" class="md-nav__link">
        Data Wrangling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Packages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Packages" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Packages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../googlevis/" class="md-nav__link">
        googleVis (embed HTML plots)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gganimate/" class="md-nav__link">
        gganimate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fast_and_frugal_decision_trees_in_r_with_fftrees/" class="md-nav__link">
        Fast-and-Frugal Decision Trees
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../big_data_analysis_with_revolution_r_enterprise/" class="md-nav__link">
        Big Data Analysis with Revolution R Enterprise
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../time_series_in_r_the_power_of_xts_and_zoo/" class="md-nav__link">
        Time Series in R, The Power of xts and zoo
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Plot Snippets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plot Snippets" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Plot Snippets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plot_snippets_basics/" class="md-nav__link">
        Plot Snippets for Exploratory (and some Explanatory) Analyses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plot_snippets_ggplot2/" class="md-nav__link">
        Plot Snippets - ggplot2
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Plot Snippets - ggvis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Plot Snippets - ggvis
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    Dataset
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-ggvis-package" class="md-nav__link">
    The ggvis Package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-grammar-of-graphics" class="md-nav__link">
    The Grammar of Graphics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lines-and-syntax" class="md-nav__link">
    Lines and Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transformations" class="md-nav__link">
    Transformations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactivity-and-layers" class="md-nav__link">
    Interactivity and Layers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customizing-axes-legends-and-scales" class="md-nav__link">
    Customizing Axes, Legends, and Scales
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plot_snippets_colours/" class="md-nav__link">
        Plot Snippets - Colours
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          RStudio
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RStudio" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          RStudio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../working_with_rstudio_ide/" class="md-nav__link">
        Working with the RStudio IDE
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Tables and Figures
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tables and Figures" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Tables and Figures
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tables/" class="md-nav__link">
        Tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../embedding/" class="md-nav__link">
        Embedding HTML into HTML
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../embedding_2/" class="md-nav__link">
        Embedding Rmd into Rmd
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          A Hands-on Introduction to Statistics with R
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="A Hands-on Introduction to Statistics with R" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          A Hands-on Introduction to Statistics with R
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_course_one_introduction/" class="md-nav__link">
        Statistics with R, Course One, Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_course_two_student_s_t-test/" class="md-nav__link">
        Statistics with R, Course Two, Student's t-test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_course_three_analysis_of_variance/" class="md-nav__link">
        Statistics with R, Course Three, Analysis of Variance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_course_four_repeated_measures_anova/" class="md-nav__link">
        Statistics with R, Course Four, Repeated Measures ANOVA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_course_five_correlation_and_regression/" class="md-nav__link">
        Statistics with R, Course Five, Correlation and Regression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_course_six_multiple_regression/" class="md-nav__link">
        Statistics with R, Course Six, Multiple Regression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_course_seven_moderation_and_mediation/" class="md-nav__link">
        Statistics with R, Course Seven, Moderation and Mediation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../a_hands-on_introduction_to_statistics_with_r_notes/" class="md-nav__link">
        Statistics with R, Notes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    Dataset
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-ggvis-package" class="md-nav__link">
    The ggvis Package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-grammar-of-graphics" class="md-nav__link">
    The Grammar of Graphics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lines-and-syntax" class="md-nav__link">
    Lines and Syntax
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transformations" class="md-nav__link">
    Transformations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactivity-and-layers" class="md-nav__link">
    Interactivity and Layers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customizing-axes-legends-and-scales" class="md-nav__link">
    Customizing Axes, Legends, and Scales
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ugoproto/ugo_r_doc.git/edit/master/docs/plot_snippets_ggvis.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Plot Snippets - ggvis</h1>
                
                <!--
-   [Documentation](#documentation)
-   [Dataset](#dataset)
-   [The `ggvis` Package](#the-ggvis-package)
-   [1, The Grammar of Graphics](#the-grammar-of-graphics)
-   [2, Lines and Syntax](#lines-and-syntax)
-   [3, Transformations](#transformations)
-   [4, Interactivity and Layers](#interactivity-and-layers)
-   [5, Customizing Axes, Legends, and
    Scales](#customizing-axes-legends-and-scales)
-->
<hr />
<p><strong>Foreword</strong></p>
<ul>
<li>Output options: the &lsquo;tango&rsquo; syntax and the &lsquo;readable&rsquo; theme.</li>
<li>Snippets and results.</li>
<li><code>ggvis</code> generates html outputs. Graphics presented here are images: .png files; .gif files when specified.</li>
</ul>
<hr />
<h2 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://ggvis.rstudio.com/"><code>ggvis</code> Overview</a>.</li>
<li><a href="http://ggvis.rstudio.com/cookbook.html"><code>ggvis</code> Cookbook</a>.</li>
</ul>
<h2 id="dataset">Dataset<a class="headerlink" href="#dataset" title="Permanent link">&para;</a></h2>
<p>For most examples, we use the <code>mtcars</code>, <code>pressure</code>, <code>faithful</code> datasets.</p>
<h2 id="the-ggvis-package">The <code>ggvis</code> Package<a class="headerlink" href="#the-ggvis-package" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nf">library</span><span class="p">(</span><span class="n">ggvis</span><span class="p">)</span>
</code></pre></div>
<h2 id="the-grammar-of-graphics">The Grammar of Graphics<a class="headerlink" href="#the-grammar-of-graphics" title="Permanent link">&para;</a></h2>
<p><strong>Start to explore</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># change the code below to plot the disp variable of mtcars on the x axis</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">disp</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis1.png" /></p>
<p><strong><code>ggvis</code> and its capabilities</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the code below to make a graph with red points</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;red&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis2.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the code below draw smooths instead of points</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_smooths</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis3.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the code below to make a graph containing both points and a smoothed summary line</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_smooths</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis4.png" /></p>
<p><strong><code>ggvis</code> grammar</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Make a scatterplot of the pressure dataset</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">layer_points</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis5.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Adapt the code you wrote for the first challenge: show bars instead of points</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">layer_bars</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis6.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Adapt the code you wrote for the first challenge: show lines instead of points</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">layer_lines</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis7.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Adapt the code you wrote for the first challenge: map the fill property to the temperature variable</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">temperature</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">layer_points</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis8.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Extend the code you wrote for the previous challenge: map the size property to the pressure variable</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="n">layer_points</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis9.png" /></p>
<p><strong>4 essential components of a graph</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">faithful</span> <span class="o">%&gt;%</span>
    <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;red&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
    <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Duration of eruption (m)&quot;</span><span class="p">,</span>
             <span class="n">values</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">subdivide</span> <span class="o">=</span> <span class="m">9</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Time since previous eruption (m)&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis10.png" /></p>
<h2 id="lines-and-syntax">Lines and Syntax<a class="headerlink" href="#lines-and-syntax" title="Permanent link">&para;</a></h2>
<p><strong>Three operators: <code>%&gt;%</code>, <code>=</code> and <code>:=</code></strong></p>
<div class="highlight"><pre><span></span><code><span class="nf">layer_points</span><span class="p">(</span><span class="nf">ggvis</span><span class="p">(</span><span class="n">faithful</span><span class="p">,</span> <span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis11.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Rewrite the code with the pipe operator     </span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis12.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis13.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Modify this graph to map the size property to the pressure variable</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis14.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis15.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Modify this graph by setting the size property</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">size</span> <span class="o">:=</span> <span class="m">100</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis16.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">pressure</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s">&quot;red&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis17.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Fix this code to set the fill property to red</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;red&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis18.png" /></p>
<p><strong>Referring to different objects</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">red</span> <span class="o">&lt;-</span> <span class="s">&quot;green&quot;</span>
<span class="n">pressure</span><span class="o">$</span><span class="n">red</span> <span class="o">&lt;-</span> <span class="n">pressure</span><span class="o">$</span><span class="n">temperature</span>

<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="n">red</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis19.png" /></p>
<p><strong>Properties for points</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the code to set the fills using pressure$black</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="o">~</span><span class="s">&#39;black&#39;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis20.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Plot the faithful data as described in the second instruction</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">opacity</span> <span class="o">:=</span> <span class="m">0.5</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;black&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis21.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Plot the faithful data as described in the third instruction</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">size</span> <span class="o">:=</span> <span class="m">100</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="n">fillOpacity</span> <span class="o">=</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="n">shape</span> <span class="o">:=</span> <span class="s">&quot;cross&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis22.png" /></p>
<p><strong>Properties for lines</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the code below to use the lines mark</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis23.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Set the properties described in the second instruction in the graph below</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="n">strokeWidth</span> <span class="o">:=</span> <span class="m">2</span><span class="p">,</span> <span class="n">strokeDash</span> <span class="o">:=</span> <span class="m">6</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis24.png" /></p>
<p><strong>Display model fits</strong></p>
<p><code>layer_lines()</code> will always connect the points in your plot from the leftmost point to the rightmost point. This can be undesirable if you are trying to plot a specific shape.</p>
<p><code>layer_paths()</code>: this mark connects the points in the order that they appear in the data set. So the paths mark will connect the point that corresponds to the first row of the data to the point that corresponds to the second row of data, and so on - no matter where those points appear in the graph.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># change the third line of code to plot a map of Texas</span>
<span class="nf">library</span><span class="p">(</span><span class="n">maps</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>

<span class="n">texas</span> <span class="o">&lt;-</span> <span class="n">ggplot2</span><span class="o">::</span><span class="nf">map_data</span><span class="p">(</span><span class="s">&quot;state&quot;</span><span class="p">,</span> <span class="n">region</span> <span class="o">=</span> <span class="s">&quot;texas&quot;</span><span class="p">)</span>

<span class="n">texas</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">long</span><span class="p">,</span> <span class="o">~</span><span class="n">lat</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_paths</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis25.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Same plot, but set the fill property of the texas map to dark orange</span>
<span class="n">texas</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">long</span><span class="p">,</span> <span class="o">~</span><span class="n">lat</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;darkorange&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_paths</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis26.png" /></p>
<p><strong><code>compute_smooth()</code> to simplify model fits</strong></p>
<p><code>compute_model_prediction()</code> is a useful function to use with line graphs. It takes a data frame as input and returns a new data frame as output. The new data frame will contain the x and y values of a line fitted to the data in the original data frame.</p>
<p>Generate the x and y coordinates for a LOESS smooth line.</p>
<div class="highlight"><pre><span></span><code><span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">compute_model_prediction</span><span class="p">(</span><span class="n">eruptions</span> <span class="o">~</span> <span class="n">waiting</span><span class="p">,</span> <span class="n">model</span> <span class="o">=</span> <span class="s">&quot;lm&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">head</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>##       pred_    resp_
## 1  43.00000 1.377986
## 2  43.67089 1.428724
## 3  44.34177 1.479461
## 4  45.01266 1.530199
## 5  45.68354 1.580937
## 6  46.35443 1.631674
## 7  47.02532 1.682412
## 8  47.69620 1.733150
## 9  48.36709 1.783888
## 10 49.03797 1.834625
</code></pre></div>
</td></tr></table>
<div class="highlight"><pre><span></span><code><span class="c1"># Compute the x and y coordinates for a loess smooth line that predicts mpg with the wt</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">compute_smooth</span><span class="p">(</span><span class="n">mpg</span> <span class="o">~</span> <span class="n">wt</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">head</span><span class="p">(</span><span class="m">10</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>##       pred_    resp_
## 1  1.513000 32.08897
## 2  1.562506 31.68786
## 3  1.612013 31.28163
## 4  1.661519 30.87037
## 5  1.711025 30.45419
## 6  1.760532 30.03318
## 7  1.810038 29.60745
## 8  1.859544 29.17711
## 9  1.909051 28.74224
## 10 1.958557 28.30017
</code></pre></div>
</td></tr></table>
<div class="highlight"><pre><span></span><code><span class="c1">#model = &quot;loess&quot; is set by default</span>
</code></pre></div>
<h2 id="transformations">Transformations<a class="headerlink" href="#transformations" title="Permanent link">&para;</a></h2>
<p><strong>Histograms (1)</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Build a histogram of the waiting variable of the faithful data set.</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_histograms</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis29.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Build the same histogram, but with a binwidth (width argument) of 5 units</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_histograms</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis30.png" /></p>
<p><strong>Histograms (2)</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_histograms</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis31.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Transform the code: just compute the bins instead of plotting a histogram</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">compute_bin</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>##    count_ x_ xmin_ xmax_ width_
## 1      13 45  42.5  47.5      5
## 2      24 50  47.5  52.5      5
## 3      29 55  52.5  57.5      5
## 4      21 60  57.5  62.5      5
## 5      13 65  62.5  67.5      5
## 6      13 70  67.5  72.5      5
## 7      42 75  72.5  77.5      5
## 8      58 80  77.5  82.5      5
## 9      38 85  82.5  87.5      5
## 10     17 90  87.5  92.5      5
## 11      4 95  92.5  97.5      5
</code></pre></div>
</td></tr></table>
<div class="highlight"><pre><span></span><code><span class="c1"># Combine the solution to the first challenge with layer_rects() to build a histogram</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">compute_bin</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="o">~</span><span class="n">xmin_</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="o">~</span><span class="n">xmax_</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="o">~</span><span class="n">count_</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_rects</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis33.png" /></p>
<p><strong>Density plots</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Combine compute_density() with layer_lines() to make a density plot of the waiting variable.</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">compute_density</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">pred_</span><span class="p">,</span><span class="o">~</span><span class="n">resp_</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis34.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Build a density plot directly using layer_densities. Use the correct variables and properties.</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_densities</span><span class="p">(</span><span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;green&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis35.png" /></p>
<p><strong>Shortcuts</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Complete the code to plot a bar graph of the cyl factor.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_bars</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis36.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Adapt the solution to the first challenge to just calculate the count values. No plotting!</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">compute_count</span><span class="p">(</span><span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>##   count_ x_
## 1     11  4
## 2      7  6
## 3     14  8
</code></pre></div>
</td></tr></table>
<p><strong><code>ggvis</code> and <code>group_by</code></strong></p>
<div class="highlight"><pre><span></span><code><span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">am</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">am</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_smooths</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis38.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the code to plot a unique smooth line for each value of the cyl variable.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_smooths</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis39.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Adapt the graph to contain a separate density for each value of cyl.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_densities</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis40.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Copy and alter the solution to the second challenge to map the fill property to a categorical version of cyl.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_densities</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis41.png" /></p>
<p><strong><code>group_by()</code> versus <code>interaction()</code></strong></p>
<div class="highlight"><pre><span></span><code><span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_densities</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis42.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Alter the graph: separate density for each unique combination of &#39;cyl&#39; and &#39;am&#39;.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span><span class="n">am</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_densities</span><span class="p">()</span>

<span class="c1">#factor(cyl),factor(am)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis43.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span> <span class="n">am</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_densities</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis44.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Update the graph to map `fill` to the unique combinations of the grouping variables.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span> <span class="n">am</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">interaction</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span><span class="n">am</span><span class="p">))</span> <span class="o">%&gt;%</span> 
  <span class="nf">layer_densities</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis45.png" /></p>
<p><strong>Chaining is a virtue</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">mtcars</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span> <span class="n">am</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">interaction</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span> <span class="n">am</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">layer_densities</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis46.png" /></p>
<p>This call is exactly equivalent to the following piece of code that is very hard to read:</p>
<div class="highlight"><pre><span></span><code><span class="nf">layer_densities</span><span class="p">(</span><span class="nf">ggvis</span><span class="p">(</span><span class="nf">group_by</span><span class="p">(</span><span class="n">mtcars</span><span class="p">,</span> <span class="n">cyl</span><span class="p">,</span> <span class="n">am</span><span class="p">),</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">interaction</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span> <span class="n">am</span><span class="p">)))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis47.png" /></p>
<h2 id="interactivity-and-layers">Interactivity and Layers<a class="headerlink" href="#interactivity-and-layers" title="Permanent link">&para;</a></h2>
<p><strong>The basics of interactive plots</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Run this code and inspect the output. Follow the link in the instructions for the interactive version</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">fillOpacity</span> <span class="o">:=</span> <span class="m">0.5</span><span class="p">,</span> 
        <span class="n">shape</span> <span class="o">:=</span> <span class="nf">input_select</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose shape:&quot;</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;circle&quot;</span><span class="p">,</span> <span class="s">&quot;square&quot;</span><span class="p">,</span> <span class="s">&quot;cross&quot;</span><span class="p">,</span> <span class="s">&quot;diamond&quot;</span><span class="p">,</span> <span class="s">&quot;triangle-up&quot;</span><span class="p">,</span> <span class="s">&quot;triangle-down&quot;</span><span class="p">)))</span> <span class="o">%&gt;%</span> 
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif1.gif" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Copy the first code chunk and alter the code to make the fill property interactive using a select box</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">fillOpacity</span> <span class="o">:=</span> <span class="m">0.5</span><span class="p">,</span> <span class="n">shape</span> <span class="o">:=</span> <span class="nf">input_select</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose shape:&quot;</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;circle&quot;</span><span class="p">,</span> <span class="s">&quot;square&quot;</span><span class="p">,</span> <span class="s">&quot;cross&quot;</span><span class="p">,</span> <span class="s">&quot;diamond&quot;</span><span class="p">,</span> <span class="s">&quot;triangle-up&quot;</span><span class="p">,</span> <span class="s">&quot;triangle-down&quot;</span><span class="p">)),</span> <span class="n">fill</span> <span class="o">:=</span> <span class="nf">input_select</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose color:&quot;</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;black&quot;</span><span class="p">,</span><span class="s">&quot;red&quot;</span><span class="p">,</span><span class="s">&quot;blue&quot;</span><span class="p">,</span><span class="s">&quot;green&quot;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif2.gif" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add radio buttons to control the fill of the plot</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="nf">input_radiobuttons</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose color:&quot;</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;black&quot;</span><span class="p">,</span><span class="s">&quot;red&quot;</span><span class="p">,</span><span class="s">&quot;blue&quot;</span><span class="p">,</span><span class="s">&quot;green&quot;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif3.gif" /></p>
<p><strong>Input widgets in more detail</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="nf">input_radiobuttons</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose color:&quot;</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;black&quot;</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="s">&quot;green&quot;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif4.gif" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the radiobuttons widget to a text widget </span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="nf">input_text</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose color:&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;black&quot;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif5.gif" /></p>
<div class="highlight"><pre><span></span><code><span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis48.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Map the fill property to a select box that returns variable names</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="nf">input_select</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose fill variable:&quot;</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="nf">names</span><span class="p">(</span><span class="n">mtcars</span><span class="p">),</span> <span class="n">map</span> <span class="o">=</span> <span class="n">as.name</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif6.gif" /></p>
<p><strong>Input widgets in more detail (2)</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Map the fill property to a select box that returns variable names</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="nf">input_select</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose fill variable:&quot;</span><span class="p">,</span> <span class="n">choices</span> <span class="o">=</span> <span class="nf">names</span><span class="p">(</span><span class="n">mtcars</span><span class="p">),</span> <span class="n">map</span> <span class="o">=</span> <span class="n">as.name</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif7.gif" /></p>
<p><strong>Control parameters and values</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Map the bindwidth to a numeric field (&quot;Choose a binwidth:&quot;)</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_histograms</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="nf">input_numeric</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose a binwidth:&quot;</span><span class="p">))</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif8.gif" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Map the binwidth to a slider bar (&quot;Choose a binwidth:&quot;) with the correct specifications</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">mpg</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_histograms</span><span class="p">(</span><span class="n">width</span> <span class="o">=</span> <span class="nf">input_slider</span><span class="p">(</span><span class="n">min</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">max</span> <span class="o">=</span> <span class="m">20</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">&quot;Choose a binwidth:&quot;</span><span class="p">))</span>
</code></pre></div>
<p>.gif file:</p>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvisgif9.gif" /></p>
<p><strong>Multi-layered plots and their properties</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add a layer of points to the graph below.</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;skyblue&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">layer_lines</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis49.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Copy and adapt the solution to the first instruction below so that only the lines layer uses a skyblue stroke.</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">(</span><span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;skyblue&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis50.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Rewrite the code below so that only the points layer uses the shape property.</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">(</span><span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;skyblue&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">(</span><span class="n">shape</span> <span class="o">:=</span> <span class="s">&quot;triangle-up&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis51.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Refactor the code for the graph below to make it as concise as possible</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;skyblue&quot;</span><span class="p">,</span> <span class="n">strokeOpacity</span> <span class="o">:=</span> <span class="m">0.5</span><span class="p">,</span> <span class="n">strokeWidth</span> <span class="o">:=</span> <span class="m">5</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="n">shape</span> <span class="o">:=</span> <span class="s">&quot;triangle-up&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">:=</span> <span class="m">300</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis52.png" /></p>
<p><strong>Multi-layered plots and their properties (2)</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Rewrite the code below so that only the points layer uses the shape property.</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">(</span><span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;skyblue&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">(</span><span class="n">shape</span> <span class="o">:=</span> <span class="s">&quot;triangle-up&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis53.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Refactor the code for the graph below to make it as concise as possible</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;skyblue&quot;</span><span class="p">,</span>
        <span class="n">strokeOpacity</span> <span class="o">:=</span> <span class="m">0.5</span><span class="p">,</span> <span class="n">strokeWidth</span> <span class="o">:=</span> <span class="m">5</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="n">shape</span> <span class="o">:=</span> <span class="s">&quot;triangle-up&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">:=</span> <span class="m">300</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis54.png" /></p>
<p><strong>There is no limit on the number of layers!</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create a graph containing a scatterplot, a linear model and a smooth line.</span>
<span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">(</span><span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span> <span class="n">opacity</span> <span class="o">:=</span> <span class="m">0.5</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_model_predictions</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="s">&quot;lm&quot;</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;navy&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_smooths</span><span class="p">(</span><span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;skyblue&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis55.png" /></p>
<p><strong>Taking local and global to the next level</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">pressure</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">temperature</span><span class="p">,</span> <span class="o">~</span><span class="n">pressure</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;darkred&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_lines</span><span class="p">(</span><span class="n">stroke</span> <span class="o">:=</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="n">strokeDash</span> <span class="o">:=</span> <span class="m">5</span><span class="p">,</span> <span class="n">strokeWidth</span> <span class="o">:=</span> <span class="m">5</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">(</span><span class="n">shape</span> <span class="o">:=</span> <span class="s">&quot;circle&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">:=</span> <span class="m">100</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="s">&quot;lightgreen&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_smooths</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis56.png" /></p>
<h2 id="customizing-axes-legends-and-scales">Customizing Axes, Legends, and Scales<a class="headerlink" href="#customizing-axes-legends-and-scales" title="Permanent link">&para;</a></h2>
<p><strong>Axes</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># add the title of the x axis: &quot;Time since previous eruption (m)&quot;</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span> 
  <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Duration of eruption (m)&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Time since previous eruption (m)&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis57.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add to the code to place a labelled tick mark at 50, 60, 70, 80, 90 on the x axis.</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span> 
  <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Duration of eruption (m)&quot;</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">subdivide</span> <span class="o">=</span> <span class="m">9</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Time since previous eruption (m)&quot;</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">50</span><span class="p">,</span> <span class="m">60</span><span class="p">,</span> <span class="m">70</span><span class="p">,</span> <span class="m">80</span><span class="p">,</span> <span class="m">90</span><span class="p">),</span> <span class="n">subdivide</span> <span class="o">=</span> <span class="m">9</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis58.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add to the code below to change the location of the y axis</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s">&quot;top&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">add_axis</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s">&quot;right&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis59.png" /></p>
<p><strong>Legends</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add a legend to the plot below: use the correct title and orientation</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">opacity</span> <span class="o">:=</span> <span class="m">0.6</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="nf">round</span><span class="p">(</span><span class="n">eruptions</span><span class="p">)))</span> <span class="o">%&gt;%</span> 
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">add_legend</span><span class="p">(</span><span class="s">&quot;fill&quot;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;~ duration (m)&quot;</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="s">&quot;left&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis60.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1">#add_legend(vis, scales = NULL, orient = &quot;right&quot;, title = NULL, format = NULL, values = NULL, properties = NULL)</span>

<span class="c1"># Use add_legend() to combine the legends in the plot below. Adjust its properties as instructed.</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">opacity</span> <span class="o">:=</span> <span class="m">0.6</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="nf">round</span><span class="p">(</span><span class="n">eruptions</span><span class="p">)),</span> <span class="n">shape</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="nf">round</span><span class="p">(</span><span class="n">eruptions</span><span class="p">)),</span> 
        <span class="n">size</span> <span class="o">=</span> <span class="o">~</span><span class="nf">round</span><span class="p">(</span><span class="n">eruptions</span><span class="p">))</span>  <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">add_legend</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;fill&quot;</span><span class="p">,</span> <span class="s">&quot;shape&quot;</span><span class="p">,</span> <span class="s">&quot;size&quot;</span><span class="p">),</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;~ duration (m)&quot;</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis61.png" /></p>
<p><strong>Legends (2)</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Fix the legend</span>
<span class="n">faithful</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">waiting</span><span class="p">,</span> <span class="o">~</span><span class="n">eruptions</span><span class="p">,</span> <span class="n">opacity</span> <span class="o">:=</span> <span class="m">0.6</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="nf">round</span><span class="p">(</span><span class="n">eruptions</span><span class="p">)),</span> <span class="n">shape</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="nf">round</span><span class="p">(</span><span class="n">eruptions</span><span class="p">)),</span> 
        <span class="n">size</span> <span class="o">=</span> <span class="o">~</span><span class="nf">round</span><span class="p">(</span><span class="n">eruptions</span><span class="p">))</span> <span class="o">%&gt;%</span> 
    <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span> 
    <span class="nf">add_legend</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;fill&quot;</span><span class="p">,</span> <span class="s">&quot;shape&quot;</span><span class="p">,</span> <span class="s">&quot;size&quot;</span><span class="p">),</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;~ duration (m)&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis62.png" /></p>
<p><strong>Scale types</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add to the code below to make the stroke color range from &quot;darkred&quot; to &quot;orange&quot;.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span> 
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">disp</span><span class="p">,</span> <span class="n">stroke</span> <span class="o">=</span> <span class="o">~</span><span class="n">disp</span><span class="p">,</span> <span class="n">strokeWidth</span> <span class="o">:=</span> <span class="m">2</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;fill&quot;</span><span class="p">,</span> <span class="n">range</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;yellow&quot;</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;stroke&quot;</span><span class="p">,</span> <span class="n">range</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;darkred&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis63.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Change the graph below to make the fill colors range from green to beige.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span> <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">hp</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span> <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;fill&quot;</span><span class="p">,</span> <span class="n">range</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;green&quot;</span><span class="p">,</span> <span class="s">&quot;beige&quot;</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis64.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create a scale that will map `factor(cyl)` to a new range of colors: purple, blue, and green. </span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span> <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span> <span class="nf">scale_nominal</span><span class="p">(</span><span class="s">&quot;fill&quot;</span><span class="p">,</span> <span class="n">range</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;purple&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="s">&quot;green&quot;</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis65.png" /></p>
<p><strong>Adjust any visual property</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add a scale that limits the range of opacity from 0.2 to 1. </span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">),</span> <span class="n">opacity</span> <span class="o">=</span> <span class="o">~</span><span class="n">hp</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;opacity&quot;</span><span class="p">,</span> <span class="n">range</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0.2</span><span class="p">,</span><span class="m">1</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis66.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add a second scale that will expand the x axis to cover data values from 0 to 6.</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">disp</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="kc">NA</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">6</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis67.png" /></p>
<p><strong>Adjust any visual property (2)</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add a second scale to set domain for x</span>
<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">disp</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span> <span class="o">%&gt;%</span>
  <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="kc">NA</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="nf">scale_numeric</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">6</span><span class="p">))</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis68.png" /></p>
<p><strong>&ldquo;<code>=</code>&rdquo; versus &ldquo;<code>:=</code>&ldquo;</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Set the fill value to the color variable instead of mapping it, and see what happens</span>
<span class="n">mtcars</span><span class="o">$</span><span class="n">color</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;teal&quot;</span><span class="p">,</span> <span class="s">&quot;#cccccc&quot;</span><span class="p">,</span> <span class="s">&quot;tan&quot;</span><span class="p">)</span>

<span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="o">~</span><span class="n">color</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis69.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">ggvis</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="o">~</span><span class="n">wt</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="o">~</span><span class="n">mpg</span><span class="p">,</span> <span class="n">fill</span> <span class="o">:=</span> <span class="o">~</span><span class="n">color</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">layer_points</span><span class="p">()</span>
</code></pre></div>
<p><img alt="" src="../img/Plot_snippets_-_ggvis/ggvis70.png" /></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../plot_snippets_ggplot2/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Plot Snippets - ggplot2" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Plot Snippets - ggplot2
            </div>
          </div>
        </a>
      
      
        
        <a href="../plot_snippets_colours/" class="md-footer__link md-footer__link--next" aria-label="Next: Plot Snippets - Colours" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Plot Snippets - Colours
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.f8263e09.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.4fc53ad4.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>