



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A R documentation website.">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>Data Wrangling - ugo_r_doc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-93008985-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#documentation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="ugo_r_doc" class="md-header-nav__button md-logo">
          
            <i class="md-icon">layers</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              ugo_r_doc
            </span>
            <span class="md-header-nav__topic">
              
                Data Wrangling
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ugoproto/ugo_r_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ugo_r_doc
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="ugo_r_doc" class="md-nav__button md-logo">
      
        <i class="md-icon">layers</i>
      
    </a>
    ugo_r_doc
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ugoproto/ugo_r_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ugo_r_doc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Cheat Sheets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Cheat Sheets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../basics_cs/" title="Basics Cheat Sheets" class="md-nav__link">
      Basics Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../specializations_cs/" title="Specialization Cheat Sheets" class="md-nav__link">
      Specialization Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../visualization_cs/" title="Visualization Cheat Sheets" class="md-nav__link">
      Visualization Cheat Sheets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Code and Vade Mecum
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Code and Vade Mecum
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../frequentist_bayesian/" title="Frequentist vs. Bayesian" class="md-nav__link">
      Frequentist vs. Bayesian
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../intermediate_r/" title="Intermediate R" class="md-nav__link">
      Intermediate R
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../intermediate_r_the_apply_family/" title="Intermediate R - The apply Family" class="md-nav__link">
      Intermediate R - The apply Family
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Data Wrangling Snippets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Data Wrangling Snippets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../io_snippets_cleaning/" title="I/O Snippets & Cleaning" class="md-nav__link">
      I/O Snippets & Cleaning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reading_data_into_r_with_readr/" title="Reading Data into R with readr" class="md-nav__link">
      Reading Data into R with readr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data_analysis_in_r_the_data_table_way/" title="Data Analysis in R, the data.table Way" class="md-nav__link">
      Data Analysis in R, the data.table Way
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data_manipulation_in_r_with_dplyr/" title="Data Manipulation in R with dplyr" class="md-nav__link">
      Data Manipulation in R with dplyr
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Data Wrangling
      </label>
    
    <a href="./" title="Data Wrangling" class="md-nav__link md-nav__link--active">
      Data Wrangling
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-analysis-in-r-the-datatable-way" class="md-nav__link">
    Data Analysis in R, the data.table Way
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-datatable-novice" class="md-nav__link">
    1, data.table novice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-datatable-yeoman" class="md-nav__link">
    2, data.table yeoman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-datatable-expert" class="md-nav__link">
    3, data.table expert
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-manipulation-in-r-with-dplyr" class="md-nav__link">
    Data Manipulation in R with dplyr
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-introduction-to-dplyr" class="md-nav__link">
    1, Introduction to dplyr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-select-and-mutate" class="md-nav__link">
    2, select and mutate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-filter-and-arrange" class="md-nav__link">
    3, filter and arrange
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-summarise-and-the-pipe-operator" class="md-nav__link">
    4, summarise and the Pipe Operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-group_by-and-working-with-data" class="md-nav__link">
    5, group_by and working with data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-tidyr-functions" class="md-nav__link">
    Adding tidyr Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-joining-data-in-r-with-dplyr" class="md-nav__link">
    Extension: 'Joining Data in R with dplyr'
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../googlevis/" title="googleVis (embed HTML plots)" class="md-nav__link">
      googleVis (embed HTML plots)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gganimate/" title="gganimate" class="md-nav__link">
      gganimate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fast_and_frugal_decision_trees_in_r_with_fftrees/" title="Fast-and-Frugal Decision Trees" class="md-nav__link">
      Fast-and-Frugal Decision Trees
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../big_data_analysis_with_revolution_r_enterprise/" title="Big Data Analysis with Revolution R Enterprise" class="md-nav__link">
      Big Data Analysis with Revolution R Enterprise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../time_series_in_r_the_power_of_xts_and_zoo/" title="Time Series in R, The Power of xts and zoo" class="md-nav__link">
      Time Series in R, The Power of xts and zoo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Plot Snippets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Plot Snippets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../plot_snippets_basics/" title="Plot Snippets for Exploratory (and some Explanatory) Analyses" class="md-nav__link">
      Plot Snippets for Exploratory (and some Explanatory) Analyses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plot_snippets_ggplot2/" title="Plot Snippets - ggplot2" class="md-nav__link">
      Plot Snippets - ggplot2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plot_snippets_ggvis/" title="Plot Snippets - ggvis" class="md-nav__link">
      Plot Snippets - ggvis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plot_snippets_colours/" title="Plot Snippets - Colours" class="md-nav__link">
      Plot Snippets - Colours
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      RStudio
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        RStudio
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../working_with_rstudio_ide/" title="Working with the RStudio IDE" class="md-nav__link">
      Working with the RStudio IDE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Tables and Figures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Tables and Figures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tables/" title="Tables" class="md-nav__link">
      Tables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../embedding/" title="Embedding HTML into HTML" class="md-nav__link">
      Embedding HTML into HTML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../embedding_2/" title="Embedding Rmd into Rmd" class="md-nav__link">
      Embedding Rmd into Rmd
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      A Hands-on Introduction to Statistics with R
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        A Hands-on Introduction to Statistics with R
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_course_one_introduction/" title="Statistics with R, Course One, Introduction" class="md-nav__link">
      Statistics with R, Course One, Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_course_two_student_s_t-test/" title="Statistics with R, Course Two, Student's t-test" class="md-nav__link">
      Statistics with R, Course Two, Student's t-test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_course_three_analysis_of_variance/" title="Statistics with R, Course Three, Analysis of Variance" class="md-nav__link">
      Statistics with R, Course Three, Analysis of Variance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_course_four_repeated_measures_anova/" title="Statistics with R, Course Four, Repeated Measures ANOVA" class="md-nav__link">
      Statistics with R, Course Four, Repeated Measures ANOVA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_course_five_correlation_and_regression/" title="Statistics with R, Course Five, Correlation and Regression" class="md-nav__link">
      Statistics with R, Course Five, Correlation and Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_course_six_multiple_regression/" title="Statistics with R, Course Six, Multiple Regression" class="md-nav__link">
      Statistics with R, Course Six, Multiple Regression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_course_seven_moderation_and_mediation/" title="Statistics with R, Course Seven, Moderation and Mediation" class="md-nav__link">
      Statistics with R, Course Seven, Moderation and Mediation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../a_hands-on_introduction_to_statistics_with_r_notes/" title="Statistics with R, Notes" class="md-nav__link">
      Statistics with R, Notes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    Documentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-analysis-in-r-the-datatable-way" class="md-nav__link">
    Data Analysis in R, the data.table Way
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-datatable-novice" class="md-nav__link">
    1, data.table novice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-datatable-yeoman" class="md-nav__link">
    2, data.table yeoman
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-datatable-expert" class="md-nav__link">
    3, data.table expert
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-manipulation-in-r-with-dplyr" class="md-nav__link">
    Data Manipulation in R with dplyr
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-introduction-to-dplyr" class="md-nav__link">
    1, Introduction to dplyr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-select-and-mutate" class="md-nav__link">
    2, select and mutate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-filter-and-arrange" class="md-nav__link">
    3, filter and arrange
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-summarise-and-the-pipe-operator" class="md-nav__link">
    4, summarise and the Pipe Operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-group_by-and-working-with-data" class="md-nav__link">
    5, group_by and working with data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-tidyr-functions" class="md-nav__link">
    Adding tidyr Functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-joining-data-in-r-with-dplyr" class="md-nav__link">
    Extension: 'Joining Data in R with dplyr'
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ugoproto/ugo_r_doc.git/edit/master/docs/data_wrangling.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Data Wrangling</h1>
                
                <!--

-   [Documentation](#documentation)
-   [Data Analysis in R, the `data.table` Way](#data-analysis-in-r-the-data.table-way)
    -   [1, `data.table` novice](#data.table-novice)
    -   [2, `data.table` yeoman](#data.table-yeoman)
    -   [3, `data.table` expert](#data.table-expert)
-   [Data Manipulation in R with `dplyr`](#data-manipulation-in-r-with-dplyr)
    -   [1, Introduction to `dplyr`](#introduction-to-dplyr)
    -   [2, `select` and `mutate`](#select-and-mutate)
    -   [3, `filter` and `arrange`](#filter-and-arrange)
    -   [4, `summarise` and the Pipe Operator](#summarise-and-the-pipe-operator)
    -   [5, `group_by` and working with data](#group_by-and-working-with-data)
-   [Adding `tidyr` Functions](#adding-tidyr-functions)
-   [Extension: 'Joining Data in R with `dplyr`'](#extension-joining-data-in-r-with-dplyr)
-->

<hr />
<p><strong>Foreword</strong></p>
<ul>
<li>Output options: the &lsquo;tango&rsquo; syntax and the &lsquo;readable&rsquo; theme.</li>
<li>Snippets and results.</li>
</ul>
<hr />
<h3 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h3>
<p><code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code></p>
<ul>
<li>extension of <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="n">frame</span></code>.</li>
<li>Fast aggregation of large data (e.g. 100GB in RAM), fast ordered<br />
    joins, fast add/modify/delete of columns by group using no copies at<br />
    all, list columns, a fast friendly file reader and parallel<br />
    file writer. Offers a natural and flexible syntax, for<br />
    faster development.</li>
</ul>
<p><code class="codehilite"><span class="n">dplyr</span></code></p>
<ul>
<li>A fast, consistent tool for working with data frame like objects,<br />
    both in memory and out of memory.</li>
<li>Pipelines.</li>
</ul>
<p><code class="codehilite"><span class="n">tidyr</span></code></p>
<ul>
<li>An evolution of &lsquo;reshape2&rsquo;. It&rsquo;s designed specifically for data<br />
    tidying (not general reshaping or aggregating) and works well with<br />
    dplyr data pipelines.</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="left">package</th>
<th align="left">'narrower'</th>
<th align="left">'wider'</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>tidyr</code></td>
<td align="left">gather</td>
<td align="left">spread</td>
</tr>
<tr class="even">
<td align="left"><code>reshape2</code></td>
<td align="left">melt</td>
<td align="left">cast</td>
</tr>
<tr class="odd">
<td align="left">spreadsheets</td>
<td align="left">unpivot</td>
<td align="left">pivot</td>
</tr>
<tr class="even">
<td align="left">databases</td>
<td align="left">fold</td>
<td align="left">unfold</td>
</tr>
</tbody>
</table>

<h2 id="data-analysis-in-r-the-datatable-way">Data Analysis in R, the <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code> Way<a class="headerlink" href="#data-analysis-in-r-the-datatable-way" title="Permanent link">&para;</a></h2>
<h3 id="1-datatable-novice">1, <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code> novice<a class="headerlink" href="#1-datatable-novice" title="Permanent link">&para;</a></h3>
<p>Find out more with <code class="codehilite"><span class="o">?</span><span class="k">data</span><span class="p">.</span><span class="k">table</span></code>.</p>
<p><strong>Create and subset a <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># The data.table package</span>
<span class="nf">library</span><span class="p">(</span><span class="n">data.table</span><span class="p">)</span>

<span class="c1"># Create my_first_data_table</span>
<span class="n">my_first_data_table</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">),</span> <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">))</span>

<span class="c1"># Create a data.table using recycling</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">))</span>

<span class="c1"># Print the third row to the console</span>
<span class="n">DT[3</span><span class="p">,</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">a</span> <span class="n">b</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span> <span class="k">C</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print the second and third row to the console, but do not commas</span>
<span class="n">DT[2</span><span class="o">:</span><span class="m">3</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">a</span> <span class="n">b</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span> <span class="n">B</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span> <span class="k">C</span>
</pre></div>
</td></tr></table>

<p><strong>Getting to know a <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code></strong></p>
<p>Like <code class="codehilite"><span class="n">head</span></code>, <code class="codehilite"><span class="n">tail</span></code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print the penultimate row of DT using .N</span>
<span class="n">DT[.N</span> <span class="o">-</span> <span class="m">1</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">a</span> <span class="n">b</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span> <span class="k">C</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print the column names of DT, and number of rows and number of columns</span>
<span class="nf">colnames</span><span class="p">(</span><span class="n">DT</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ss">&quot;a&quot;</span> <span class="ss">&quot;b&quot;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">dim</span><span class="p">(</span><span class="n">DT</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mi">4</span> <span class="mi">2</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Select row 2 twice and row 3, returning a data.table with three rows where row 2 is a duplicate of row 1.</span>
<span class="n">DT</span><span class="nf">[c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">a</span> <span class="n">b</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span> <span class="n">B</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">2</span> <span class="n">B</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span> <span class="k">C</span>
</pre></div>
</td></tr></table>

<p><code class="codehilite"><span class="n">DT</span></code> is a data.table/data.frame, but <code class="codehilite"><span class="n">DT</span><span class="p">[</span> <span class="p">,</span> <span class="n">B</span><span class="p">]</span></code> is a vector;<br />
<code class="codehilite"><span class="n">DT</span><span class="p">[</span> <span class="p">,</span> <span class="p">.(</span><span class="n">B</span><span class="p">)]</span></code> is a subsetted data.table.</p>
<p><strong>Subsetting data tables</strong></p>
<p><code class="codehilite"><span class="n">DT</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="k">by</span><span class="p">]</span></code> means take <code class="codehilite"><span class="n">DT</span></code>, subset rows using <code class="codehilite"><span class="n">i</span></code>, then calculate<br />
<code class="codehilite"><span class="n">j</span></code> grouped by <code class="codehilite"><span class="k">by</span></code>. You can wrap <code class="codehilite"><span class="n">j</span></code> with <code class="codehilite"><span class="p">.()</span></code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">A</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="n">B</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span>
<span class="n">C</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>

<span class="c1"># Subset rows 1 and 3, and columns B and C</span>
<span class="n">DT</span><span class="nf">[c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)</span> <span class="p">,</span><span class="n">.(B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">B</span> <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="mi">6</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="k">c</span> <span class="mi">8</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Assign to ans the correct value</span>
<span class="n">ans</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">DT[</span><span class="p">,</span> <span class="n">.(B</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">C</span><span class="p">)</span><span class="n">]</span><span class="p">)</span>

<span class="c1"># Fill in the blanks such that ans2 equals target</span>
<span class="c1">#target &lt;- data.table(B = c(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;),  val = as.integer(c(6:10, 1:5)))</span>
<span class="n">ans2</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">DT[</span><span class="p">,</span> <span class="n">.(B</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="nf">as.integer</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)))</span><span class="n">]</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>The <code class="codehilite"><span class="k">by</span></code> basics</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># iris and iris3 are already available in the workspace</span>

<span class="c1"># Convert iris to a data.table: DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">as.data.table</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>

<span class="c1"># For each Species, print the mean Sepal.Length</span>
<span class="n">DT[</span><span class="p">,</span> <span class="nf">.(mean</span><span class="p">(</span><span class="n">Sepal.Length</span><span class="p">)),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(Species</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>       <span class="n">Species</span>    <span class="n">V1</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>     <span class="n">setosa</span> <span class="mi">5</span><span class="p">.</span><span class="mi">006</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">versicolor</span> <span class="mi">5</span><span class="p">.</span><span class="mi">936</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>  <span class="n">virginica</span> <span class="mi">6</span><span class="p">.</span><span class="mi">588</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print mean Sepal.Length, grouping by first letter of Species</span>
<span class="n">DT[</span><span class="p">,</span> <span class="nf">.(mean</span><span class="p">(</span><span class="n">Sepal.Length</span><span class="p">)),</span> <span class="n">by</span> <span class="o">=</span> <span class="nf">.(substr</span><span class="p">(</span><span class="n">Species</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">))</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">substr</span>    <span class="n">V1</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>      <span class="n">s</span> <span class="mi">5</span><span class="p">.</span><span class="mi">006</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>      <span class="n">v</span> <span class="mi">6</span><span class="p">.</span><span class="mi">262</span>
</pre></div>
</td></tr></table>

<p><strong>Using <code class="codehilite"><span class="na">.N</span></code> and <code class="codehilite"><span class="k">by</span></code></strong></p>
<p><code class="codehilite"><span class="na">.N</span></code>, number, in row or column.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># data.table version of iris: DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">as.data.table</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>

<span class="c1"># Group the specimens by Sepal area (to the nearest 10 cm2) and count how many occur in each group.</span>
<span class="n">DT[</span><span class="p">,</span> <span class="n">.N</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="m">10</span> <span class="o">*</span> <span class="nf">round</span><span class="p">(</span><span class="n">Sepal.Length</span> <span class="o">*</span> <span class="n">Sepal.Width</span> <span class="o">/</span> <span class="m">10</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">round</span>   <span class="n">N</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>    <span class="mi">20</span> <span class="mi">117</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>    <span class="mi">10</span>  <span class="mi">29</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>    <span class="mi">30</span>   <span class="mi">4</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Now name the output columns `Area` and `Count`</span>
<span class="n">DT[</span><span class="p">,</span> <span class="n">.(Count</span> <span class="o">=</span> <span class="n">.N</span><span class="p">),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(Area</span> <span class="o">=</span> <span class="m">10</span> <span class="o">*</span> <span class="nf">round</span><span class="p">(</span><span class="n">Sepal.Length</span> <span class="o">*</span> <span class="n">Sepal.Width</span> <span class="o">/</span> <span class="m">10</span><span class="p">))</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">Area</span> <span class="k">Count</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>   <span class="mi">20</span>   <span class="mi">117</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>   <span class="mi">10</span>    <span class="mi">29</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>   <span class="mi">30</span>     <span class="mi">4</span>
</pre></div>
</td></tr></table>

<p><strong>Return multiple numbers in <code class="codehilite"><span class="n">j</span></code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create the data.table DT</span>
<span class="nf">set.seed</span><span class="p">(</span><span class="m">1L</span><span class="p">)</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="nf">rep</span><span class="p">(</span><span class="kc">letters</span><span class="n">[2</span><span class="o">:</span><span class="m">1</span><span class="n">]</span><span class="p">,</span> <span class="n">each</span> <span class="o">=</span> <span class="m">4L</span><span class="p">),</span> <span class="n">B</span> <span class="o">=</span> <span class="nf">rep</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="n">each</span> <span class="o">=</span> <span class="m">2L</span><span class="p">),</span> <span class="n">C</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="m">8</span><span class="p">))</span>

<span class="c1"># Create the new data.table, DT2</span>
<span class="n">DT2</span> <span class="o">&lt;-</span> <span class="n">DT[</span><span class="p">,</span> <span class="n">.(C</span> <span class="o">=</span> <span class="nf">cumsum</span><span class="p">(</span><span class="n">C</span><span class="p">)),</span> <span class="n">by</span><span class="o">=</span><span class="n">.(A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="n">]</span>

<span class="c1"># Select from DT2 the last two values from C while you group by A</span>
<span class="n">DT2[</span><span class="p">,</span> <span class="n">.(C</span> <span class="o">=</span> <span class="nf">tail</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="m">2</span><span class="p">)),</span> <span class="n">by</span><span class="o">=</span><span class="n">A]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">4</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="mi">9</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">a</span> <span class="mi">8</span>
</pre></div>
</td></tr></table>

<h3 id="2-datatable-yeoman">2, <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code> yeoman<a class="headerlink" href="#2-datatable-yeoman" title="Permanent link">&para;</a></h3>
<p><strong>Chaining, the basics</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Build DT</span>
<span class="nf">set.seed</span><span class="p">(</span><span class="m">1L</span><span class="p">)</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="nf">rep</span><span class="p">(</span><span class="kc">letters</span><span class="n">[2</span><span class="o">:</span><span class="m">1</span><span class="n">]</span><span class="p">,</span> <span class="n">each</span> <span class="o">=</span> <span class="m">4L</span><span class="p">),</span> <span class="n">B</span> <span class="o">=</span> <span class="nf">rep</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="n">each</span> <span class="o">=</span> <span class="m">2L</span><span class="p">),</span> <span class="n">C</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="m">8</span><span class="p">))</span> 
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span> <span class="mi">3</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span> <span class="mi">8</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">b</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">b</span> <span class="mi">2</span> <span class="mi">5</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">6</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span> <span class="mi">7</span>
<span class="o">##</span> <span class="mi">7</span><span class="p">:</span> <span class="n">a</span> <span class="mi">4</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">8</span><span class="p">:</span> <span class="n">a</span> <span class="mi">4</span> <span class="mi">6</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Use chaining</span>
<span class="c1"># Cumsum of C while grouping by A and B, and then select last two values of C while grouping by A</span>
<span class="n">DT[</span><span class="p">,</span> <span class="n">.(C</span> <span class="o">=</span> <span class="nf">cumsum</span><span class="p">(</span><span class="n">C</span><span class="p">)),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="n">][</span><span class="p">,</span> <span class="n">.(C</span> <span class="o">=</span> <span class="nf">tail</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="m">2</span><span class="p">)),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(A</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">4</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="mi">9</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">a</span> <span class="mi">8</span>
</pre></div>
</td></tr></table>

<p><strong>Chaining your <code class="codehilite"><span class="n">iris</span></code> dataset</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>

<span class="c1"># Perform chained operations on DT</span>
<span class="n">DT[</span><span class="p">,</span> <span class="n">.(Sepal.Length</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">Sepal.Length</span><span class="p">),</span> <span class="n">Sepal.Width</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">Sepal.Width</span><span class="p">),</span> <span class="n">Petal.Length</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">Petal.Length</span><span class="p">),</span> <span class="n">Petal.Width</span> <span class="o">=</span> <span class="nf">median</span><span class="p">(</span><span class="n">Petal.Width</span><span class="p">)),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(Species</span><span class="p">)</span><span class="n">]</span><span class="nf">[order</span><span class="p">(</span><span class="n">Species</span><span class="p">,</span> <span class="n">decreasing</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>       <span class="n">Species</span> <span class="n">Sepal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Sepal</span><span class="p">.</span><span class="n">Width</span> <span class="n">Petal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Petal</span><span class="p">.</span><span class="n">Width</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>  <span class="n">virginica</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">5</span><span class="p">.</span><span class="mi">55</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">0</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">versicolor</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">8</span>         <span class="mi">4</span><span class="p">.</span><span class="mi">35</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">3</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>     <span class="n">setosa</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">50</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>      <span class="n">Sepal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Sepal</span><span class="p">.</span><span class="n">Width</span> <span class="n">Petal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Petal</span><span class="p">.</span><span class="n">Width</span>   <span class="n">Species</span>
<span class="o">##</span>   <span class="mi">1</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">2</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">3</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">4</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">1</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">5</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">6</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>  <span class="c1">---                                                            </span>
<span class="o">##</span> <span class="mi">146</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">147</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">9</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">148</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">149</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">4</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">150</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">8</span> <span class="n">virginica</span>
</pre></div>
</td></tr></table>

<p><strong>Programming time vs readability</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">11</span><span class="p">,</span> <span class="m">13</span><span class="p">)</span>
<span class="n">z</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">12</span><span class="p">,</span> <span class="m">14</span><span class="p">)</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="c1"># Mean of columns</span>
<span class="n">DT[</span><span class="p">,</span> <span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">mean</span><span class="p">),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(x</span><span class="p">)</span><span class="n">]</span> 
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">x</span>        <span class="n">y</span>        <span class="n">z</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">6</span><span class="p">.</span><span class="mi">500000</span> <span class="mi">7</span><span class="p">.</span><span class="mi">500000</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">7</span><span class="p">.</span><span class="mi">666667</span> <span class="mi">8</span><span class="p">.</span><span class="mi">666667</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Median of columns</span>
<span class="n">DT[</span><span class="p">,</span> <span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">median</span><span class="p">),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(x</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">x</span> <span class="n">y</span> <span class="n">z</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">7</span> <span class="mi">8</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">7</span> <span class="mi">8</span>
</pre></div>
</td></tr></table>

<p><strong>Introducing <code class="codehilite"><span class="na">.SDcols</span></code></strong></p>
<p><code class="codehilite"><span class="na">.SDcols</span></code> specifies the columns of <code class="codehilite"><span class="n">DT</span></code> that are included in <code class="codehilite"><span class="na">.SD</span></code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">grp</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">)</span>
<span class="n">Q1</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="n">Q2</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="n">Q3</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="n">H1</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="n">H2</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">grp</span><span class="p">,</span> <span class="n">Q1</span><span class="p">,</span> <span class="n">Q2</span><span class="p">,</span> <span class="n">Q3</span><span class="p">,</span> <span class="n">H1</span><span class="p">,</span> <span class="n">H2</span><span class="p">)</span>

<span class="c1"># Calculate the sum of the Q columns</span>
<span class="n">DT[</span><span class="p">,</span> <span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">sum</span><span class="p">),</span> <span class="n">.SDcols</span> <span class="o">=</span> <span class="m">2</span><span class="o">:</span><span class="m">4</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">Q1</span> <span class="n">Q2</span> <span class="n">Q3</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">18</span> <span class="mi">14</span> <span class="mi">16</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Calculate the sum of columns H1 and H2 </span>
<span class="n">DT[</span><span class="p">,</span> <span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">sum</span><span class="p">),</span> <span class="n">.SDcols</span> <span class="o">=</span> <span class="m">5</span><span class="o">:</span><span class="m">6</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">H1</span> <span class="n">H2</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">12</span> <span class="mi">15</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Select all but the first row of groups 1 and 2, returning only the grp column and the Q columns. </span>
<span class="n">DT[</span><span class="p">,</span> <span class="n">.SD[</span><span class="m">-1</span><span class="n">]</span><span class="p">,</span> <span class="n">.SDcols</span> <span class="o">=</span> <span class="m">2</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(grp</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">grp</span> <span class="n">Q1</span> <span class="n">Q2</span> <span class="n">Q3</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>   <span class="mi">6</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>   <span class="mi">8</span>  <span class="mi">5</span>  <span class="mi">4</span>  <span class="mi">5</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>   <span class="mi">8</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">2</span>
</pre></div>
</td></tr></table>

<p><strong>Mixing it together: <code class="codehilite"><span class="n">lapply</span></code>, <code class="codehilite"><span class="na">.SD</span></code>, <code class="codehilite"><span class="n">SDcols</span></code> and <code class="codehilite"><span class="na">.N</span></code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">x</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">11</span><span class="p">,</span> <span class="m">13</span><span class="p">)</span>
<span class="n">z</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">12</span><span class="p">,</span> <span class="m">14</span><span class="p">)</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

<span class="c1"># Sum of all columns and the number of rows</span>
<span class="c1"># For the first part, you need to combine the returned list from lapply, .SD and .SDcols and the integer vector of .N. You have to this because the result of the two together has to be a list again, with all values put together.</span>
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">x</span>  <span class="n">y</span>  <span class="n">z</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span>  <span class="mi">1</span>  <span class="mi">2</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span>  <span class="mi">3</span>  <span class="mi">4</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">2</span>  <span class="mi">5</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">1</span>  <span class="mi">7</span>  <span class="mi">8</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span>  <span class="mi">9</span> <span class="mi">10</span>
<span class="o">##</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">11</span> <span class="mi">12</span>
<span class="o">##</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">13</span> <span class="mi">14</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">DT[</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">sum</span><span class="p">),</span> <span class="n">.N</span><span class="p">),</span> <span class="n">.SDcols</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="n">x]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">x</span> <span class="n">x</span>  <span class="n">y</span>  <span class="n">z</span> <span class="n">N</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">8</span> <span class="mi">26</span> <span class="mi">30</span> <span class="mi">4</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">23</span> <span class="mi">26</span> <span class="mi">3</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Cumulative sum of column x and y while grouping by x and z &gt; 8</span>
<span class="n">DT[</span><span class="p">,</span><span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">cumsum</span><span class="p">),</span> <span class="n">.SDcols</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(by1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">by2</span> <span class="o">=</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="m">8</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">by1</span>   <span class="n">by2</span> <span class="n">x</span>  <span class="n">y</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>   <span class="mi">2</span> <span class="k">FALSE</span> <span class="mi">2</span>  <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>   <span class="mi">2</span> <span class="k">FALSE</span> <span class="mi">4</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>   <span class="mi">1</span> <span class="k">FALSE</span> <span class="mi">1</span>  <span class="mi">3</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span>   <span class="mi">1</span> <span class="k">FALSE</span> <span class="mi">2</span> <span class="mi">10</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span>   <span class="mi">2</span>  <span class="k">TRUE</span> <span class="mi">2</span>  <span class="mi">9</span>
<span class="o">##</span> <span class="mi">6</span><span class="p">:</span>   <span class="mi">2</span>  <span class="k">TRUE</span> <span class="mi">4</span> <span class="mi">20</span>
<span class="o">##</span> <span class="mi">7</span><span class="p">:</span>   <span class="mi">1</span>  <span class="k">TRUE</span> <span class="mi">1</span> <span class="mi">13</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Chaining</span>
<span class="n">DT[</span><span class="p">,</span><span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">cumsum</span><span class="p">),</span> <span class="n">.SDcols</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(by1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">by2</span> <span class="o">=</span> <span class="n">z</span> <span class="o">&gt;</span> <span class="m">8</span><span class="p">)</span><span class="n">][</span><span class="p">,</span><span class="nf">lapply</span><span class="p">(</span><span class="n">.SD</span><span class="p">,</span> <span class="n">max</span><span class="p">),</span> <span class="n">.SDcols</span> <span class="o">=</span> <span class="m">3</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="n">by1]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">by1</span> <span class="n">x</span>  <span class="n">y</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>   <span class="mi">2</span> <span class="mi">4</span> <span class="mi">20</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>   <span class="mi">1</span> <span class="mi">2</span> <span class="mi">13</span>
</pre></div>
</td></tr></table>

<p><strong>Adding, updating and removing columns</strong></p>
<p><code class="codehilite"><span class="p">:</span><span class="o">=</span></code> is defined for use in <code class="codehilite"><span class="n">j</span></code> only.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># The data.table DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="kc">letters</span><span class="nf">[c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span>
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">b</span> <span class="mi">4</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add column by reference: Total</span>
<span class="n">DT[</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;Total&#39;</span><span class="p">)</span> <span class="o">:=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">B</span><span class="p">),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(A</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="n">Total</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="mi">2</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">b</span> <span class="mi">4</span>     <span class="mi">9</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>     <span class="mi">9</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add 1 to column B</span>
<span class="n">DT</span><span class="nf">[c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">)</span> <span class="o">:=</span> <span class="nf">as.integer</span><span class="p">(</span><span class="m">1</span> <span class="o">+</span> <span class="n">B</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="n">Total</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>     <span class="mi">9</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>     <span class="mi">9</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add a new column Total2</span>
<span class="n">DT[2</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="s">&#39;:=&#39;</span><span class="p">(</span><span class="n">Total2</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">B</span><span class="p">)),</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.(A</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="n">Total</span> <span class="n">Total2</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>     <span class="mi">6</span>     <span class="n">NA</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>     <span class="mi">6</span>      <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>     <span class="mi">6</span>      <span class="mi">6</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>     <span class="mi">9</span>      <span class="mi">5</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>     <span class="mi">9</span>     <span class="n">NA</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Remove the Total column</span>
<span class="n">DT[</span><span class="p">,</span> <span class="n">Total</span> <span class="o">:=</span> <span class="kc">NULL</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="n">Total2</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>     <span class="n">NA</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>      <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">3</span>      <span class="mi">6</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>      <span class="mi">5</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>     <span class="n">NA</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Select the third column using `[[`</span>
<span class="n">DT[[3]]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">NA</span>  <span class="mi">6</span>  <span class="mi">6</span>  <span class="mi">5</span> <span class="n">NA</span>
</pre></div>
</td></tr></table>

<p><strong>The functional form</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># A data.table DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span> <span class="n">B</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span>

<span class="c1"># Update B, add C and D</span>
<span class="n">DT[</span><span class="p">,</span> <span class="nf">`:=`</span><span class="p">(</span><span class="n">B</span> <span class="o">=</span> <span class="n">B</span> <span class="o">+</span> <span class="m">1</span><span class="p">,</span>  <span class="n">C</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">B</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="m">2</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="k">C</span> <span class="n">D</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">3</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">2</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Delete my_cols</span>
<span class="n">my_cols</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">)</span>
<span class="n">DT[</span><span class="p">,</span> <span class="p">(</span><span class="n">my_cols</span><span class="p">)</span> <span class="o">:=</span> <span class="kc">NULL</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">D</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">2</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Delete column 2 by number</span>
<span class="n">DT[</span><span class="p">,</span> <span class="m">2</span> <span class="o">:=</span> <span class="kc">NULL</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">2</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span>
</pre></div>
</td></tr></table>

<p><strong>Ready, <code class="codehilite"><span class="k">set</span></code>, go!</strong></p>
<p>The <code class="codehilite"><span class="k">set</span></code> function is used to repeatedly update a data.table by<br />
reference. You can think of the <code class="codehilite"><span class="k">set</span></code> function as a loopable.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">A</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<span class="n">B</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="n">C</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="n">D</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">)</span>

<span class="c1"># Set the seed</span>
<span class="nf">set.seed</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>

<span class="c1"># Check the DT</span>
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>     <span class="n">A</span> <span class="n">B</span> <span class="k">C</span> <span class="n">D</span>
<span class="o">##</span>  <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">3</span>
<span class="o">##</span>  <span class="mi">2</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
<span class="o">##</span>  <span class="mi">3</span><span class="p">:</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">4</span> <span class="mi">3</span>
<span class="o">##</span>  <span class="mi">4</span><span class="p">:</span> <span class="mi">5</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="o">##</span>  <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">5</span>
<span class="o">##</span>  <span class="mi">6</span><span class="p">:</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">4</span>
<span class="o">##</span>  <span class="mi">7</span><span class="p">:</span> <span class="mi">5</span> <span class="mi">4</span> <span class="mi">1</span> <span class="mi">4</span>
<span class="o">##</span>  <span class="mi">8</span><span class="p">:</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">2</span> <span class="mi">1</span>
<span class="o">##</span>  <span class="mi">9</span><span class="p">:</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">5</span> <span class="mi">4</span>
<span class="o">##</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">2</span> <span class="mi">3</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># For loop with set</span>
<span class="nf">for </span><span class="p">(</span><span class="n">l</span> <span class="n">in</span> <span class="m">2</span><span class="o">:</span><span class="m">4</span><span class="p">)</span> <span class="nf">set</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span> <span class="nf">sample</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="m">3</span><span class="p">),</span> <span class="n">l</span><span class="p">,</span> <span class="kc">NA</span><span class="p">)</span>

<span class="c1"># Change the column names to lowercase</span>
<span class="nf">setnames</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">))</span>

<span class="c1"># Print the resulting DT to the console</span>
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>     <span class="n">a</span>  <span class="n">b</span>  <span class="k">c</span>  <span class="n">d</span>
<span class="o">##</span>  <span class="mi">1</span><span class="p">:</span> <span class="mi">2</span>  <span class="mi">2</span>  <span class="mi">5</span>  <span class="mi">3</span>
<span class="o">##</span>  <span class="mi">2</span><span class="p">:</span> <span class="mi">2</span>  <span class="mi">1</span> <span class="n">NA</span>  <span class="mi">3</span>
<span class="o">##</span>  <span class="mi">3</span><span class="p">:</span> <span class="mi">3</span> <span class="n">NA</span>  <span class="mi">4</span>  <span class="mi">3</span>
<span class="o">##</span>  <span class="mi">4</span><span class="p">:</span> <span class="mi">5</span> <span class="n">NA</span>  <span class="mi">1</span>  <span class="mi">1</span>
<span class="o">##</span>  <span class="mi">5</span><span class="p">:</span> <span class="mi">2</span> <span class="n">NA</span>  <span class="mi">2</span>  <span class="mi">5</span>
<span class="o">##</span>  <span class="mi">6</span><span class="p">:</span> <span class="mi">5</span>  <span class="mi">3</span>  <span class="mi">2</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">7</span><span class="p">:</span> <span class="mi">5</span>  <span class="mi">4</span>  <span class="mi">1</span>  <span class="mi">4</span>
<span class="o">##</span>  <span class="mi">8</span><span class="p">:</span> <span class="mi">4</span>  <span class="mi">5</span> <span class="n">NA</span>  <span class="mi">1</span>
<span class="o">##</span>  <span class="mi">9</span><span class="p">:</span> <span class="mi">4</span>  <span class="mi">2</span>  <span class="mi">5</span> <span class="n">NA</span>
<span class="o">##</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">1</span>  <span class="mi">4</span> <span class="n">NA</span> <span class="n">NA</span>
</pre></div>
</td></tr></table>

<p><strong>The <code class="codehilite"><span class="k">set</span></code> family</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Define DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="kc">letters</span><span class="nf">[c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="m">1</span><span class="p">)</span>
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">a</span> <span class="n">b</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">a</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add a postfix &#39;_2&#39; to all column names</span>
<span class="nf">setnames</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">),</span> <span class="nf">paste0</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="s">&#39;_2&#39;</span><span class="p">))</span>
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">a_2</span> <span class="n">b_2</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>   <span class="n">a</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>   <span class="n">a</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>   <span class="n">a</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span>   <span class="n">b</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span>   <span class="n">b</span>   <span class="mi">1</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Change column name &#39;a_2&#39; to &#39;A2&#39;</span>
<span class="nf">setnames</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span> <span class="s">&#39;a_2&#39;</span><span class="p">,</span> <span class="s">&#39;A2&#39;</span><span class="p">)</span>
<span class="n">DT</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A2</span> <span class="n">b_2</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span>  <span class="n">a</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span>  <span class="n">a</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span>  <span class="n">a</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span>  <span class="n">b</span>   <span class="mi">1</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span>  <span class="n">b</span>   <span class="mi">1</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Reverse the order of the columns</span>
<span class="nf">setcolorder</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;b_2&#39;</span><span class="p">,</span><span class="s">&#39;A2&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<h3 id="3-datatable-expert">3, <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code> expert<a class="headerlink" href="#3-datatable-expert" title="Permanent link">&para;</a></h3>
<p><strong>Selecting rows the <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="k">table</span></code> way</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Convert iris to a data.table</span>
<span class="n">iris</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="s">&#39;Sepal.Length&#39;</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Sepal.Length</span><span class="p">,</span> <span class="s">&#39;Sepal.Width&#39;</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Sepal.Width</span><span class="p">,</span> <span class="s">&#39;Petal.Length&#39;</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Petal.Length</span><span class="p">,</span> <span class="s">&#39;Petal.Width&#39;</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Petal.Width</span><span class="p">,</span> <span class="s">&#39;Species&#39;</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Species</span><span class="p">)</span>
<span class="n">iris</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>      <span class="n">Sepal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Sepal</span><span class="p">.</span><span class="n">Width</span> <span class="n">Petal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Petal</span><span class="p">.</span><span class="n">Width</span>   <span class="n">Species</span>
<span class="o">##</span>   <span class="mi">1</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">2</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">3</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">4</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">1</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">5</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">6</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>  <span class="c1">---                                                            </span>
<span class="o">##</span> <span class="mi">146</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">147</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">9</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">148</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">149</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">4</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">150</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">8</span> <span class="n">virginica</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Species is &#39;virginica&#39;</span>
<span class="nf">head</span><span class="p">(</span><span class="n">iris[Species</span> <span class="o">==</span> <span class="s">&#39;virginica&#39;</span><span class="n">]</span><span class="p">,</span> <span class="m">20</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>     <span class="n">Sepal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Sepal</span><span class="p">.</span><span class="n">Width</span> <span class="n">Petal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Petal</span><span class="p">.</span><span class="n">Width</span>   <span class="n">Species</span>
<span class="o">##</span>  <span class="mi">1</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">3</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">2</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">8</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">7</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">9</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">3</span><span class="p">:</span>          <span class="mi">7</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">1</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">4</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">9</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">8</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">5</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">8</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">2</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">6</span><span class="p">:</span>          <span class="mi">7</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">1</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">7</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">7</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">8</span><span class="p">:</span>          <span class="mi">7</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">9</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">8</span> <span class="n">virginica</span>
<span class="o">##</span>  <span class="mi">9</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">8</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">8</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">10</span><span class="p">:</span>          <span class="mi">7</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">6</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">11</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">12</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">7</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">9</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">13</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">8</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">1</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">14</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">15</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">8</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">8</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">4</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">16</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">17</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">8</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">18</span><span class="p">:</span>          <span class="mi">7</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">8</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">2</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">19</span><span class="p">:</span>          <span class="mi">7</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">6</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">20</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">5</span> <span class="n">virginica</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Species is either &#39;virginica&#39; or &#39;versicolor&#39;</span>
<span class="nf">head</span><span class="p">(</span><span class="n">iris[Species</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;virginica&#39;</span><span class="p">,</span> <span class="s">&#39;versicolor&#39;</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="m">20</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>     <span class="n">Sepal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Sepal</span><span class="p">.</span><span class="n">Width</span> <span class="n">Petal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Petal</span><span class="p">.</span><span class="n">Width</span>    <span class="n">Species</span>
<span class="o">##</span>  <span class="mi">1</span><span class="p">:</span>          <span class="mi">7</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">4</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">2</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">5</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">3</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">1</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">5</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">4</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">3</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">5</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">8</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">5</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">6</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">8</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">3</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">7</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">3</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">6</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">8</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">4</span>          <span class="mi">3</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="n">versicolor</span>
<span class="o">##</span>  <span class="mi">9</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">9</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">3</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">10</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">7</span>          <span class="mi">3</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">4</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">11</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">3</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">12</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">5</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">13</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">14</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">9</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">4</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">15</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">9</span>          <span class="mi">3</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">3</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">16</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">1</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">4</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">17</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">5</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">18</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">8</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">7</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">19</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">5</span> <span class="n">versicolor</span>
<span class="o">##</span> <span class="mi">20</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">3</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">1</span> <span class="n">versicolor</span>
</pre></div>
</td></tr></table>

<p><strong>Removing columns and adapting your column names</strong></p>
<p>Refer to a regex cheat sheet for metacharacter.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># iris as a data.table</span>
<span class="n">iris</span> <span class="o">&lt;-</span> <span class="nf">as.data.table</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>
<span class="n">iris</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>      <span class="n">Sepal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Sepal</span><span class="p">.</span><span class="n">Width</span> <span class="n">Petal</span><span class="p">.</span><span class="k">Length</span> <span class="n">Petal</span><span class="p">.</span><span class="n">Width</span>   <span class="n">Species</span>
<span class="o">##</span>   <span class="mi">1</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">2</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">3</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">4</span><span class="p">:</span>          <span class="mi">4</span><span class="p">.</span><span class="mi">6</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">1</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">5</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">6</span>          <span class="mi">1</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">0</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>  <span class="c1">---                                                            </span>
<span class="o">##</span> <span class="mi">146</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">7</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">147</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">5</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">9</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">148</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">149</span><span class="p">:</span>          <span class="mi">6</span><span class="p">.</span><span class="mi">2</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">4</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">4</span>         <span class="mi">2</span><span class="p">.</span><span class="mi">3</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">150</span><span class="p">:</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">9</span>         <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>          <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>         <span class="mi">1</span><span class="p">.</span><span class="mi">8</span> <span class="n">virginica</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Remove the &#39;Sepal.&#39; prefix</span>
<span class="c1">#gsub(&#39;([ab])&#39;, &#39;\\1_\\1_&#39;, &#39;abc and ABC&#39;) = pattern, replacement, x</span>
<span class="nf">setnames</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;Sepal.Length&#39;</span><span class="p">,</span> <span class="s">&#39;Sepal.Width&#39;</span><span class="p">),</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;Length&#39;</span><span class="p">,</span><span class="s">&#39;Width&#39;</span><span class="p">))</span> 
<span class="c1">#gsub(&#39;^Sepal\\.&#39;,&#39;&#39;, iris)</span>

<span class="c1"># Remove the two columns starting with &#39;Petal&#39;</span>
<span class="n">iris[</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;Petal.Length&#39;</span><span class="p">,</span> <span class="s">&#39;Petal.Width&#39;</span><span class="p">)</span> <span class="o">:=</span> <span class="kc">NULL</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>      <span class="k">Length</span> <span class="n">Width</span>   <span class="n">Species</span>
<span class="o">##</span>   <span class="mi">1</span><span class="p">:</span>    <span class="mi">5</span><span class="p">.</span><span class="mi">1</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">5</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">2</span><span class="p">:</span>    <span class="mi">4</span><span class="p">.</span><span class="mi">9</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">0</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">3</span><span class="p">:</span>    <span class="mi">4</span><span class="p">.</span><span class="mi">7</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">2</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">4</span><span class="p">:</span>    <span class="mi">4</span><span class="p">.</span><span class="mi">6</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">1</span>    <span class="n">setosa</span>
<span class="o">##</span>   <span class="mi">5</span><span class="p">:</span>    <span class="mi">5</span><span class="p">.</span><span class="mi">0</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">6</span>    <span class="n">setosa</span>
<span class="o">##</span>  <span class="c1">---                       </span>
<span class="o">##</span> <span class="mi">146</span><span class="p">:</span>    <span class="mi">6</span><span class="p">.</span><span class="mi">7</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">147</span><span class="p">:</span>    <span class="mi">6</span><span class="p">.</span><span class="mi">3</span>   <span class="mi">2</span><span class="p">.</span><span class="mi">5</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">148</span><span class="p">:</span>    <span class="mi">6</span><span class="p">.</span><span class="mi">5</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">149</span><span class="p">:</span>    <span class="mi">6</span><span class="p">.</span><span class="mi">2</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">4</span> <span class="n">virginica</span>
<span class="o">##</span> <span class="mi">150</span><span class="p">:</span>    <span class="mi">5</span><span class="p">.</span><span class="mi">9</span>   <span class="mi">3</span><span class="p">.</span><span class="mi">0</span> <span class="n">virginica</span>
</pre></div>
</td></tr></table>

<p><strong>Understanding automatic indexing</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Cleaned up iris data.table</span>
<span class="n">iris2</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">Length</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Sepal.Length</span><span class="p">,</span> <span class="n">Width</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Sepal.Width</span><span class="p">,</span> <span class="n">Species</span> <span class="o">=</span> <span class="n">iris</span><span class="o">$</span><span class="n">Species</span><span class="p">)</span>
<span class="n">iris2</span> <span class="o">&lt;-</span> <span class="nf">as.data.table</span><span class="p">(</span><span class="n">iris2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Area is greater than 20 square centimeters</span>
<span class="n">iris2[</span> <span class="n">Width</span> <span class="o">*</span> <span class="n">Length</span> <span class="o">&gt;</span> <span class="m">20</span> <span class="n">]</span><span class="p">,</span> <span class="m">20</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   Length Width    Species is_large
 1:    5.4   3.9     setosa    FALSE
 2:    5.8   4.0     setosa    FALSE
 3:    5.7   4.4     setosa     TRUE
 4:    5.4   3.9     setosa    FALSE
 5:    5.7   3.8     setosa    FALSE
 6:    5.2   4.1     setosa    FALSE
 7:    5.5   4.2     setosa    FALSE
 8:    7.0   3.2 versicolor    FALSE
 9:    6.4   3.2 versicolor    FALSE
10:    6.9   3.1 versicolor    FALSE
11:    6.3   3.3 versicolor    FALSE
12:    6.7   3.1 versicolor    FALSE
13:    6.7   3.0 versicolor    FALSE
14:    6.0   3.4 versicolor    FALSE
15:    6.7   3.1 versicolor    FALSE
16:    6.3   3.3  virginica    FALSE
17:    7.1   3.0  virginica    FALSE
18:    7.6   3.0  virginica    FALSE
19:    7.3   2.9  virginica    FALSE
20:    7.2   3.6  virginica     TRUE
...
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add new boolean column</span>
<span class="n">iris2[</span><span class="p">,</span> <span class="n">is_large</span> <span class="o">:=</span> <span class="n">Width</span> <span class="o">*</span> <span class="n">Length</span> <span class="o">&gt;</span> <span class="m">25</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Now large observations with is_large</span>
<span class="n">iris2[is_large</span> <span class="o">==</span> <span class="kc">TRUE</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   Length Width   Species is_large
1:    5.7   4.4    setosa     TRUE
2:    7.2   3.6 virginica     TRUE
3:    7.7   3.8 virginica     TRUE
4:    7.9   3.8 virginica     TRUE
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">iris2</span><span class="nf">[</span><span class="p">(</span><span class="n">is_large</span><span class="p">)</span><span class="n">]</span> <span class="c1"># Also OK</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   Length Width   Species is_large
1:    5.7   4.4    setosa     TRUE
2:    7.2   3.6 virginica     TRUE
3:    7.7   3.8 virginica     TRUE
4:    7.9   3.8 virginica     TRUE
</pre></div>
</td></tr></table>

<p><strong>Selecting groups or parts of groups</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># The &#39;keyed&#39; data.table DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="kc">letters</span><span class="nf">[c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span><span class="n">]</span><span class="p">,</span>
                 <span class="n">B</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span><span class="m">8</span> <span class="p">,</span><span class="m">8</span><span class="p">,</span> <span class="m">6</span><span class="p">),</span> 
                 <span class="n">C</span> <span class="o">=</span> <span class="m">6</span><span class="o">:</span><span class="m">12</span><span class="p">)</span>
<span class="nf">setkey</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>

<span class="c1"># Select the &#39;b&#39; group</span>
<span class="n">DT[</span><span class="s">&#39;b&#39;</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">b</span> <span class="mi">8</span> <span class="mi">11</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># &#39;b&#39; and &#39;c&#39; groups</span>
<span class="n">DT</span><span class="nf">[c</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="mi">5</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="n">b</span> <span class="mi">8</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="k">c</span> <span class="mi">6</span> <span class="mi">12</span>
<span class="o">##</span> <span class="mi">5</span><span class="p">:</span> <span class="k">c</span> <span class="mi">9</span>  <span class="mi">9</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># The first row of the &#39;b&#39; and &#39;c&#39; groups</span>
<span class="n">DT</span><span class="nf">[c</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">),</span> <span class="n">mult</span> <span class="o">=</span> <span class="s">&#39;first&#39;</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="k">c</span> <span class="mi">6</span> <span class="mi">12</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># First and last row of the &#39;b&#39; and &#39;c&#39; groups</span>
<span class="n">DT</span><span class="nf">[c</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">),</span> <span class="n">.SD</span><span class="nf">[c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">.N</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.EACHI]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="mi">8</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="k">c</span> <span class="mi">6</span> <span class="mi">12</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="k">c</span> <span class="mi">9</span>  <span class="mi">9</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Copy and extend code for instruction 4: add printout</span>
<span class="n">DT</span><span class="nf">[c</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">),</span> <span class="p">{</span> <span class="nf">print</span><span class="p">(</span><span class="n">.SD</span><span class="p">);</span> <span class="n">.SD</span><span class="nf">[c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">.N</span><span class="p">)</span><span class="n">]</span> <span class="p">},</span> <span class="n">by</span> <span class="o">=</span> <span class="n">.EACHI]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">5</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">8</span> <span class="mi">11</span>
<span class="o">##</span>    <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">6</span> <span class="mi">12</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">9</span>  <span class="mi">9</span>

<span class="o">##</span>    <span class="n">A</span> <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span> <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="mi">8</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">3</span><span class="p">:</span> <span class="k">c</span> <span class="mi">6</span> <span class="mi">12</span>
<span class="o">##</span> <span class="mi">4</span><span class="p">:</span> <span class="k">c</span> <span class="mi">9</span>  <span class="mi">9</span>
</pre></div>
</td></tr></table>

<p><strong>Rolling joins - part one</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Keyed data.table DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="kc">letters</span><span class="nf">[c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span><span class="n">]</span><span class="p">,</span>                  <span class="n">B</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">6</span><span class="p">),</span> 
                 <span class="n">C</span> <span class="o">=</span> <span class="m">6</span><span class="o">:</span><span class="m">12</span><span class="p">,</span> 
                 <span class="n">key</span> <span class="o">=</span> <span class="s">&#39;A,B&#39;</span><span class="p">)</span>

<span class="c1"># Get the key of DT</span>
<span class="nf">key</span><span class="p">(</span><span class="n">DT</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ss">&quot;A&quot;</span> <span class="ss">&quot;B&quot;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Row where A == &#39;b&#39; &amp; B == 6</span>
<span class="nf">setkey</span><span class="p">(</span><span class="n">DT</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
<span class="n">DT</span><span class="nf">[.</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">6</span> <span class="n">NA</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Return the prevailing row</span>
<span class="n">DT</span><span class="nf">[.</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="m">6</span><span class="p">),</span> <span class="n">roll</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">6</span> <span class="mi">6</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Return the nearest row</span>
<span class="n">DT</span><span class="nf">[.</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="m">6</span><span class="p">),</span> <span class="n">roll</span> <span class="o">=+</span> <span class="kc">Inf</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>    <span class="n">A</span> <span class="n">B</span> <span class="k">C</span>
<span class="o">##</span> <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="mi">6</span> <span class="mi">6</span>
</pre></div>
</td></tr></table>

<p><strong>Rolling joins - part two</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Keyed data.table DT</span>
<span class="n">DT</span> <span class="o">&lt;-</span> <span class="nf">data.table</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="kc">letters</span><span class="nf">[c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span><span class="n">]</span><span class="p">,</span>                  <span class="n">B</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">6</span><span class="p">),</span> 
                 <span class="n">C</span> <span class="o">=</span> <span class="m">6</span><span class="o">:</span><span class="m">12</span><span class="p">,</span> 
                 <span class="n">key</span> <span class="o">=</span> <span class="s">&#39;A,B&#39;</span><span class="p">)</span>

<span class="c1"># Look at the sequence (-2):10 for the &#39;b&#39; group</span>
<span class="n">DT</span><span class="nf">[.</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="p">(</span><span class="m">-2</span><span class="p">)</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>     <span class="n">A</span>  <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span>  <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="o">-</span><span class="mi">2</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="o">-</span><span class="mi">1</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">3</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">0</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">4</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">5</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">2</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">6</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">3</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">7</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">4</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">8</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">5</span>  <span class="mi">6</span>
<span class="o">##</span>  <span class="mi">9</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">6</span> <span class="n">NA</span>
<span class="o">##</span> <span class="mi">10</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">7</span> <span class="n">NA</span>
<span class="o">##</span> <span class="mi">11</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">8</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">12</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">9</span> <span class="n">NA</span>
<span class="o">##</span> <span class="mi">13</span><span class="p">:</span> <span class="n">b</span> <span class="mi">10</span> <span class="n">NA</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add code: carry the prevailing values forwards</span>
<span class="n">DT</span><span class="nf">[.</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="p">(</span><span class="m">-2</span><span class="p">)</span><span class="o">:</span><span class="m">10</span><span class="p">),</span> <span class="n">roll</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>     <span class="n">A</span>  <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span>  <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="o">-</span><span class="mi">2</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="o">-</span><span class="mi">1</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">3</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">0</span> <span class="n">NA</span>
<span class="o">##</span>  <span class="mi">4</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">5</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">2</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">6</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">3</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">7</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">4</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">8</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">5</span>  <span class="mi">6</span>
<span class="o">##</span>  <span class="mi">9</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">6</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">10</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">7</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">11</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">8</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">12</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">9</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">13</span><span class="p">:</span> <span class="n">b</span> <span class="mi">10</span> <span class="mi">11</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add code: carry the first observation backwards</span>
<span class="n">DT</span><span class="nf">[.</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="p">(</span><span class="m">-2</span><span class="p">)</span><span class="o">:</span><span class="m">10</span><span class="p">),</span> <span class="n">roll</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">rollends</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="n">]</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>     <span class="n">A</span>  <span class="n">B</span>  <span class="k">C</span>
<span class="o">##</span>  <span class="mi">1</span><span class="p">:</span> <span class="n">b</span> <span class="o">-</span><span class="mi">2</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">2</span><span class="p">:</span> <span class="n">b</span> <span class="o">-</span><span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">3</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">0</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">4</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">1</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">5</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">2</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">6</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">3</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">7</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">4</span>  <span class="mi">8</span>
<span class="o">##</span>  <span class="mi">8</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">5</span>  <span class="mi">6</span>
<span class="o">##</span>  <span class="mi">9</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">6</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">10</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">7</span>  <span class="mi">6</span>
<span class="o">##</span> <span class="mi">11</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">8</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">12</span><span class="p">:</span> <span class="n">b</span>  <span class="mi">9</span> <span class="mi">11</span>
<span class="o">##</span> <span class="mi">13</span><span class="p">:</span> <span class="n">b</span> <span class="mi">10</span> <span class="mi">11</span>
</pre></div>
</td></tr></table>

<hr />
<h2 id="data-manipulation-in-r-with-dplyr">Data Manipulation in R with <code class="codehilite"><span class="n">dplyr</span></code><a class="headerlink" href="#data-manipulation-in-r-with-dplyr" title="Permanent link">&para;</a></h2>
<h3 id="1-introduction-to-dplyr">1, Introduction to <code class="codehilite"><span class="n">dplyr</span></code><a class="headerlink" href="#1-introduction-to-dplyr" title="Permanent link">&para;</a></h3>
<p><strong>Load the <code class="codehilite"><span class="n">dplyr</span></code> and <code class="codehilite"><span class="n">hflights</span></code> package</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Load the dplyr package</span>
<span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">dtplyr</span><span class="p">)</span>

<span class="c1"># Load the hflights package</span>
<span class="c1"># A data only package containing commercial domestic flights that departed Houston (IAH and HOU) in 2011</span>
<span class="nf">library</span><span class="p">(</span><span class="n">hflights</span><span class="p">)</span>

<span class="c1"># Call both head() and summary() on hflights</span>
<span class="nf">head</span><span class="p">(</span><span class="n">hflights</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>      <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span> <span class="mi">5424</span> <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>    <span class="mi">1400</span>    <span class="mi">1500</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">5425</span> <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>    <span class="mi">1401</span>    <span class="mi">1501</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">5426</span> <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">3</span>         <span class="mi">1</span>    <span class="mi">1352</span>    <span class="mi">1502</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">5427</span> <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>    <span class="mi">1403</span>    <span class="mi">1513</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">5428</span> <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>    <span class="mi">1405</span>    <span class="mi">1507</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">5429</span> <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">6</span>         <span class="mi">4</span>    <span class="mi">1359</span>    <span class="mi">1503</span>            <span class="n">AA</span>
<span class="o">##</span>      <span class="n">FlightNum</span> <span class="n">TailNum</span> <span class="n">ActualElapsedTime</span> <span class="n">AirTime</span> <span class="n">ArrDelay</span> <span class="n">DepDelay</span> <span class="n">Origin</span>
<span class="o">##</span> <span class="mi">5424</span>       <span class="mi">428</span>  <span class="n">N576AA</span>                <span class="mi">60</span>      <span class="mi">40</span>      <span class="o">-</span><span class="mi">10</span>        <span class="mi">0</span>    <span class="n">IAH</span>
<span class="o">##</span> <span class="mi">5425</span>       <span class="mi">428</span>  <span class="n">N557AA</span>                <span class="mi">60</span>      <span class="mi">45</span>       <span class="o">-</span><span class="mi">9</span>        <span class="mi">1</span>    <span class="n">IAH</span>
<span class="o">##</span> <span class="mi">5426</span>       <span class="mi">428</span>  <span class="n">N541AA</span>                <span class="mi">70</span>      <span class="mi">48</span>       <span class="o">-</span><span class="mi">8</span>       <span class="o">-</span><span class="mi">8</span>    <span class="n">IAH</span>
<span class="o">##</span> <span class="mi">5427</span>       <span class="mi">428</span>  <span class="n">N403AA</span>                <span class="mi">70</span>      <span class="mi">39</span>        <span class="mi">3</span>        <span class="mi">3</span>    <span class="n">IAH</span>
<span class="o">##</span> <span class="mi">5428</span>       <span class="mi">428</span>  <span class="n">N492AA</span>                <span class="mi">62</span>      <span class="mi">44</span>       <span class="o">-</span><span class="mi">3</span>        <span class="mi">5</span>    <span class="n">IAH</span>
<span class="o">##</span> <span class="mi">5429</span>       <span class="mi">428</span>  <span class="n">N262AA</span>                <span class="mi">64</span>      <span class="mi">45</span>       <span class="o">-</span><span class="mi">7</span>       <span class="o">-</span><span class="mi">1</span>    <span class="n">IAH</span>
<span class="o">##</span>      <span class="n">Dest</span> <span class="n">Distance</span> <span class="n">TaxiIn</span> <span class="n">TaxiOut</span> <span class="n">Cancelled</span> <span class="n">CancellationCode</span> <span class="n">Diverted</span>
<span class="o">##</span> <span class="mi">5424</span>  <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">7</span>      <span class="mi">13</span>         <span class="mi">0</span>                         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">5425</span>  <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">6</span>       <span class="mi">9</span>         <span class="mi">0</span>                         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">5426</span>  <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">5</span>      <span class="mi">17</span>         <span class="mi">0</span>                         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">5427</span>  <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">9</span>      <span class="mi">22</span>         <span class="mi">0</span>                         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">5428</span>  <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">9</span>       <span class="mi">9</span>         <span class="mi">0</span>                         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">5429</span>  <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">6</span>      <span class="mi">13</span>         <span class="mi">0</span>                         <span class="mi">0</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">summary</span><span class="p">(</span><span class="n">hflights</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="s s-Atom">##</span>       <span class="nv">Year</span>          <span class="nv">Month</span>          <span class="nv">DayofMonth</span>      <span class="nv">DayOfWeek</span>    
<span class="s s-Atom">##</span>  <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mi">2011</span>   <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span> <span class="mf">1.000</span>   <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span> <span class="mf">1.00</span>   <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">1.000</span>  
<span class="s s-Atom">##</span>  <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mi">2011</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">4.000</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">8.00</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">2.000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mi">2011</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span> <span class="mf">7.000</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mf">16.00</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mf">4.000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mi">2011</span>   <span class="nv">Mean</span>   <span class="s s-Atom">:</span> <span class="mf">6.514</span>   <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mf">15.74</span>   <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mf">3.948</span>  
<span class="s s-Atom">##</span>  <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mi">2011</span>   <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">9.000</span>   <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">23.00</span>   <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">6.000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mi">2011</span>   <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">12.000</span>   <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">31.00</span>   <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">7.000</span>  
<span class="s s-Atom">##</span>                                                                 
<span class="s s-Atom">##</span>     <span class="nv">DepTime</span>        <span class="nv">ArrTime</span>     <span class="nv">UniqueCarrier</span>        <span class="nv">FlightNum</span>   
<span class="s s-Atom">##</span>  <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span>   <span class="mi">1</span>   <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span>   <span class="mi">1</span>   <span class="nv">Length</span><span class="s s-Atom">:</span><span class="mi">227496</span>      <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span>   <span class="mi">1</span>  
<span class="s s-Atom">##</span>  <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mi">1021</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mi">1215</span>   <span class="nv">Class</span> <span class="s s-Atom">:character</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mi">855</span>  
<span class="s s-Atom">##</span>  <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mi">1416</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mi">1617</span>   <span class="nv">Mode</span>  <span class="s s-Atom">:character</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mi">1696</span>  
<span class="s s-Atom">##</span>  <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mi">1396</span>   <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mi">1578</span>                      <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mi">1962</span>  
<span class="s s-Atom">##</span>  <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mi">1801</span>   <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mi">1953</span>                      <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mi">2755</span>  
<span class="s s-Atom">##</span>  <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mi">2400</span>   <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mi">2400</span>                      <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mi">7290</span>  
<span class="s s-Atom">##</span>  <span class="nv">NA</span><span class="s s-Atom">&#39;s   :2905   NA&#39;s</span>   <span class="s s-Atom">:</span><span class="mi">3066</span>                                    
<span class="s s-Atom">##</span>    <span class="nv">TailNum</span>          <span class="nv">ActualElapsedTime</span>    <span class="nv">AirTime</span>         <span class="nv">ArrDelay</span>      
<span class="s s-Atom">##</span>  <span class="nv">Length</span><span class="s s-Atom">:</span><span class="mi">227496</span>      <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span> <span class="mf">34.0</span>     <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span> <span class="mf">11.0</span>   <span class="nv">Min</span><span class="p">.</span>   <span class="p">:-</span><span class="mf">70.000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Class</span> <span class="s s-Atom">:character</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">77.0</span>     <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">58.0</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="o">-</span><span class="mf">8.000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Mode</span>  <span class="s s-Atom">:character</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mf">128.0</span>     <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mf">107.0</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span>  <span class="mf">0.000</span>  
<span class="s s-Atom">##</span>                     <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mf">129.3</span>     <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mf">108.1</span>   <span class="nv">Mean</span>   <span class="s s-Atom">:</span>  <span class="mf">7.094</span>  
<span class="s s-Atom">##</span>                     <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">165.0</span>     <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">141.0</span>   <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">11.000</span>  
<span class="s s-Atom">##</span>                     <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">575.0</span>     <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">549.0</span>   <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">978.000</span>  
<span class="s s-Atom">##</span>                     <span class="nv">NA</span><span class="s s-Atom">&#39;s   :3622      NA&#39;s</span>   <span class="s s-Atom">:</span><span class="mi">3622</span>    <span class="nv">NA</span><span class="s s-Atom">&#39;s   :3622     </span>
<span class="s s-Atom">##     DepDelay          Origin              Dest              Distance     </span>
<span class="s s-Atom">##  Min.   :-33.000   Length:227496      Length:227496      Min.   :  79.0  </span>
<span class="s s-Atom">##  1st Qu.: -3.000   Class :character   Class :character   1st Qu.: 376.0  </span>
<span class="s s-Atom">##  Median :  0.000   Mode  :character   Mode  :character   Median : 809.0  </span>
<span class="s s-Atom">##  Mean   :  9.445                                         Mean   : 787.8  </span>
<span class="s s-Atom">##  3rd Qu.:  9.000                                         3rd Qu.:1042.0  </span>
<span class="s s-Atom">##  Max.   :981.000                                         Max.   :3904.0  </span>
<span class="s s-Atom">##  NA&#39;s</span>   <span class="s s-Atom">:</span><span class="mi">2905</span>                                                            
<span class="s s-Atom">##</span>      <span class="nv">TaxiIn</span>           <span class="nv">TaxiOut</span>         <span class="nv">Cancelled</span>       <span class="nv">CancellationCode</span>  
<span class="s s-Atom">##</span>  <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span>  <span class="mf">1.000</span>   <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span>  <span class="mf">1.00</span>   <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">0.00000</span>   <span class="nv">Length</span><span class="s s-Atom">:</span><span class="mi">227496</span>     
<span class="s s-Atom">##</span>  <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span>  <span class="mf">4.000</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">10.00</span>   <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">0.00000</span>   <span class="nv">Class</span> <span class="s s-Atom">:character</span>  
<span class="s s-Atom">##</span>  <span class="nv">Median</span> <span class="s s-Atom">:</span>  <span class="mf">5.000</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span> <span class="mf">14.00</span>   <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mf">0.00000</span>   <span class="nv">Mode</span>  <span class="s s-Atom">:character</span>  
<span class="s s-Atom">##</span>  <span class="nv">Mean</span>   <span class="s s-Atom">:</span>  <span class="mf">6.099</span>   <span class="nv">Mean</span>   <span class="s s-Atom">:</span> <span class="mf">15.09</span>   <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mf">0.01307</span>                     
<span class="s s-Atom">##</span>  <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span>  <span class="mf">7.000</span>   <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span> <span class="mf">18.00</span>   <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">0.00000</span>                     
<span class="s s-Atom">##</span>  <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">165.000</span>   <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">163.00</span>   <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">1.00000</span>                     
<span class="s s-Atom">##</span>  <span class="nv">NA</span><span class="s s-Atom">&#39;s   :3066      NA&#39;s</span>   <span class="s s-Atom">:</span><span class="mi">2947</span>                                         
<span class="s s-Atom">##</span>     <span class="nv">Diverted</span>       
<span class="s s-Atom">##</span>  <span class="nv">Min</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">0.000000</span>  
<span class="s s-Atom">##</span>  <span class="mi">1</span><span class="s s-Atom">st</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">0.000000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Median</span> <span class="s s-Atom">:</span><span class="mf">0.000000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Mean</span>   <span class="s s-Atom">:</span><span class="mf">0.002853</span>  
<span class="s s-Atom">##</span>  <span class="mi">3</span><span class="s s-Atom">rd</span> <span class="nv">Qu</span><span class="p">.</span><span class="s s-Atom">:</span><span class="mf">0.000000</span>  
<span class="s s-Atom">##</span>  <span class="nv">Max</span><span class="p">.</span>   <span class="s s-Atom">:</span><span class="mf">1.000000</span>  
<span class="s s-Atom">##</span>
</pre></div>
</td></tr></table>

<p><strong>Convert <code class="codehilite"><span class="k">data</span><span class="p">.</span><span class="n">frame</span></code> to table</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Convert the hflights data.frame into a hflights tbl</span>
<span class="n">hflights</span> <span class="o">&lt;-</span> <span class="nf">tbl_df</span><span class="p">(</span><span class="n">hflights</span><span class="p">)</span>

<span class="c1"># Display the hflights tbl</span>
<span class="n">hflights</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span> <span class="o">*</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>    <span class="mi">1400</span>    <span class="mi">1500</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>    <span class="mi">1401</span>    <span class="mi">1501</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">3</span>         <span class="mi">1</span>    <span class="mi">1352</span>    <span class="mi">1502</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>    <span class="mi">1403</span>    <span class="mi">1513</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>    <span class="mi">1405</span>    <span class="mi">1507</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">6</span>         <span class="mi">4</span>    <span class="mi">1359</span>    <span class="mi">1503</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">7</span>         <span class="mi">5</span>    <span class="mi">1359</span>    <span class="mi">1509</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">8</span>         <span class="mi">6</span>    <span class="mi">1355</span>    <span class="mi">1454</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>    <span class="mi">1443</span>    <span class="mi">1554</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">10</span>         <span class="mi">1</span>    <span class="mi">1443</span>    <span class="mi">1553</span>            <span class="n">AA</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create the object carriers, containing only the UniqueCarrier variable of hflights</span>
<span class="n">carriers</span> <span class="o">&lt;-</span> <span class="n">hflights</span><span class="o">$</span><span class="n">UniqueCarrier</span>
</pre></div>
</td></tr></table>

<p><strong>Changing labels of <code class="codehilite"><span class="n">hflights</span></code>, part 1 of 2</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># add</span>
<span class="n">lut</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;AA&#39;</span> <span class="o">=</span> <span class="s">&#39;American&#39;</span><span class="p">,</span> <span class="s">&#39;AS&#39;</span> <span class="o">=</span> <span class="s">&#39;Alaska&#39;</span><span class="p">,</span> <span class="s">&#39;B6&#39;</span> <span class="o">=</span> <span class="s">&#39;JetBlue&#39;</span><span class="p">,</span> <span class="s">&#39;CO&#39;</span> <span class="o">=</span> <span class="s">&#39;Continental&#39;</span><span class="p">,</span> 
         <span class="s">&#39;DL&#39;</span> <span class="o">=</span> <span class="s">&#39;Delta&#39;</span><span class="p">,</span> <span class="s">&#39;OO&#39;</span> <span class="o">=</span> <span class="s">&#39;SkyWest&#39;</span><span class="p">,</span> <span class="s">&#39;UA&#39;</span> <span class="o">=</span> <span class="s">&#39;United&#39;</span><span class="p">,</span> <span class="s">&#39;US&#39;</span> <span class="o">=</span> <span class="s">&#39;US_Airways&#39;</span><span class="p">,</span> 
         <span class="s">&#39;WN&#39;</span> <span class="o">=</span> <span class="s">&#39;Southwest&#39;</span><span class="p">,</span> <span class="s">&#39;EV&#39;</span> <span class="o">=</span> <span class="s">&#39;Atlantic_Southeast&#39;</span><span class="p">,</span> <span class="s">&#39;F9&#39;</span> <span class="o">=</span> <span class="s">&#39;Frontier&#39;</span><span class="p">,</span> 
         <span class="s">&#39;FL&#39;</span> <span class="o">=</span> <span class="s">&#39;AirTran&#39;</span><span class="p">,</span> <span class="s">&#39;MQ&#39;</span> <span class="o">=</span> <span class="s">&#39;American_Eagle&#39;</span><span class="p">,</span> <span class="s">&#39;XE&#39;</span> <span class="o">=</span> <span class="s">&#39;ExpressJet&#39;</span><span class="p">,</span> <span class="s">&#39;YV&#39;</span> <span class="o">=</span> <span class="s">&#39;Mesa&#39;</span><span class="p">)</span>

<span class="c1"># Use lut to translate the UniqueCarrier column of hflights</span>
<span class="n">hflights</span><span class="o">$</span><span class="n">UniqueCarrier</span> <span class="o">&lt;-</span> <span class="n">lut[hflights</span><span class="o">$</span><span class="n">UniqueCarrier]</span>

<span class="c1"># Inspect the resulting raw values of your variables</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">hflights</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="n">Observations</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span>
<span class="o">##</span> <span class="n">Variables</span><span class="p">:</span> <span class="mi">21</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Year</span>              <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">20</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Month</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayofMonth</span>        <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayOfWeek</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1400</span><span class="p">,</span> <span class="mi">1401</span><span class="p">,</span> <span class="mi">1352</span><span class="p">,</span> <span class="mi">1403</span><span class="p">,</span> <span class="mi">1405</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">13</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">1501</span><span class="p">,</span> <span class="mi">1502</span><span class="p">,</span> <span class="mi">1513</span><span class="p">,</span> <span class="mi">1507</span><span class="p">,</span> <span class="mi">1503</span><span class="p">,</span> <span class="mi">1509</span><span class="p">,</span> <span class="mi">14</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">UniqueCarrier</span>     <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;America...</span>
<span class="ss">## $ FlightNum         &lt;int&gt; 428, 428, 428, 428, 428, 428, 428, 428, 428,...</span>
<span class="ss">## $ TailNum           &lt;chr&gt; &quot;</span><span class="n">N576AA</span><span class="ss">&quot;, &quot;</span><span class="n">N557AA</span><span class="ss">&quot;, &quot;</span><span class="n">N541AA</span><span class="ss">&quot;, &quot;</span><span class="n">N403AA</span><span class="ss">&quot;, &quot;</span><span class="n">N49</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">AirTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Origin</span>            <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;I...</span>
<span class="ss">## $ Dest              &lt;chr&gt; &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">D</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Distance</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiIn</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiOut</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Cancelled</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">CancellationCode</span>  <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Diverted</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
</pre></div>
</td></tr></table>

<p><strong>Changing labels of <code class="codehilite"><span class="n">hflights</span></code>, part 2 of 2</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Build the lookup table: lut</span>
<span class="n">lut</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;A&quot;</span> <span class="o">=</span> <span class="s">&quot;carrier&quot;</span><span class="p">,</span> <span class="s">&quot;B&quot;</span> <span class="o">=</span> <span class="s">&quot;weather&quot;</span> <span class="p">,</span><span class="s">&quot;C&quot;</span> <span class="o">=</span> <span class="s">&quot;FFA&quot;</span> <span class="p">,</span><span class="s">&quot;D&quot;</span> <span class="o">=</span> <span class="s">&quot;security&quot;</span><span class="p">,</span> <span class="s">&quot;E&quot;</span> <span class="o">=</span> <span class="s">&quot;not cancelled&quot;</span><span class="p">)</span>

<span class="c1"># Add the Code column</span>
<span class="n">hflights</span><span class="o">$</span><span class="n">Code</span> <span class="o">&lt;-</span> <span class="n">lut[hflights</span><span class="o">$</span><span class="n">CancellationCode]</span>

<span class="c1"># Glimpse at hflights</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">hflights</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Result.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Observations: 227,496
Variables: 22
$ Year              &lt;int&gt; 2011, 2011, 2011, 2011, 2011, 2011,...
$ Month             &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,...
$ DayofMonth        &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ...
$ DayOfWeek         &lt;int&gt; 6, 7, 1, 2, 3, 4, 5, 6, 7, 1, 2, 3,...
$ DepTime           &lt;int&gt; 1400, 1401, 1352, 1403, 1405, 1359,...
$ ArrTime           &lt;int&gt; 1500, 1501, 1502, 1513, 1507, 1503,...
$ UniqueCarrier     &lt;chr&gt; &quot;American&quot;, &quot;American&quot;, &quot;American&quot;,...
$ FlightNum         &lt;int&gt; 428, 428, 428, 428, 428, 428, 428, ...
$ TailNum           &lt;chr&gt; &quot;N576AA&quot;, &quot;N557AA&quot;, &quot;N541AA&quot;, &quot;N403...
$ ActualElapsedTime &lt;int&gt; 60, 60, 70, 70, 62, 64, 70, 59, 71,...
$ AirTime           &lt;int&gt; 40, 45, 48, 39, 44, 45, 43, 40, 41,...
$ ArrDelay          &lt;int&gt; -10, -9, -8, 3, -3, -7, -1, -16, 44...
$ DepDelay          &lt;int&gt; 0, 1, -8, 3, 5, -1, -1, -5, 43, 43,...
$ Origin            &lt;chr&gt; &quot;IAH&quot;, &quot;IAH&quot;, &quot;IAH&quot;, &quot;IAH&quot;, &quot;IAH&quot;, ...
$ Dest              &lt;chr&gt; &quot;DFW&quot;, &quot;DFW&quot;, &quot;DFW&quot;, &quot;DFW&quot;, &quot;DFW&quot;, ...
$ Distance          &lt;int&gt; 224, 224, 224, 224, 224, 224, 224, ...
$ TaxiIn            &lt;int&gt; 7, 6, 5, 9, 9, 6, 12, 7, 8, 6, 8, 4...
$ TaxiOut           &lt;int&gt; 13, 9, 17, 22, 9, 13, 15, 12, 22, 1...
$ Cancelled         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
$ CancellationCode  &lt;chr&gt; &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;,...
$ Diverted          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
$ Code              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA,...
</pre></div>
</td></tr></table>

<h3 id="2-select-and-mutate">2, <code class="codehilite"><span class="k">select</span></code> and <code class="codehilite"><span class="n">mutate</span></code><a class="headerlink" href="#2-select-and-mutate" title="Permanent link">&para;</a></h3>
<p><strong>The five verbs and their meaning</strong></p>
<ul>
<li><code class="codehilite"><span class="k">select</span></code>; which returns a subset of the columns.</li>
<li><code class="codehilite"><span class="n">filter</span></code>; that is able to return a subset of the rows.</li>
<li><code class="codehilite"><span class="n">arrange</span></code>; that reorders the rows according to single or<br />
    multiple variables.</li>
<li><code class="codehilite"><span class="n">mutate</span></code>; used to add columns from existing data.</li>
<li><code class="codehilite"><span class="n">summarise</span></code>; which reduces each group to a single row by calculating<br />
    aggregate measures.</li>
</ul>
<p><strong>Choosing is not losing! The <code class="codehilite"><span class="k">select</span></code> verb</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out a tbl with the four columns of hflights related to delay</span>
<span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">ActualElapsedTime</span><span class="p">,</span> <span class="n">AirTime</span><span class="p">,</span> <span class="n">ArrDelay</span><span class="p">,</span> <span class="n">DepDelay</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">4</span>
<span class="o">##</span>    <span class="n">ActualElapsedTime</span> <span class="n">AirTime</span> <span class="n">ArrDelay</span> <span class="n">DepDelay</span>
<span class="o">##</span> <span class="o">*</span>              <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>                 <span class="mi">60</span>      <span class="mi">40</span>      <span class="o">-</span><span class="mi">10</span>        <span class="mi">0</span>
<span class="o">##</span> <span class="mi">2</span>                 <span class="mi">60</span>      <span class="mi">45</span>       <span class="o">-</span><span class="mi">9</span>        <span class="mi">1</span>
<span class="o">##</span> <span class="mi">3</span>                 <span class="mi">70</span>      <span class="mi">48</span>       <span class="o">-</span><span class="mi">8</span>       <span class="o">-</span><span class="mi">8</span>
<span class="o">##</span> <span class="mi">4</span>                 <span class="mi">70</span>      <span class="mi">39</span>        <span class="mi">3</span>        <span class="mi">3</span>
<span class="o">##</span> <span class="mi">5</span>                 <span class="mi">62</span>      <span class="mi">44</span>       <span class="o">-</span><span class="mi">3</span>        <span class="mi">5</span>
<span class="o">##</span> <span class="mi">6</span>                 <span class="mi">64</span>      <span class="mi">45</span>       <span class="o">-</span><span class="mi">7</span>       <span class="o">-</span><span class="mi">1</span>
<span class="o">##</span> <span class="mi">7</span>                 <span class="mi">70</span>      <span class="mi">43</span>       <span class="o">-</span><span class="mi">1</span>       <span class="o">-</span><span class="mi">1</span>
<span class="o">##</span> <span class="mi">8</span>                 <span class="mi">59</span>      <span class="mi">40</span>      <span class="o">-</span><span class="mi">16</span>       <span class="o">-</span><span class="mi">5</span>
<span class="o">##</span> <span class="mi">9</span>                 <span class="mi">71</span>      <span class="mi">41</span>       <span class="mi">44</span>       <span class="mi">43</span>
<span class="o">##</span> <span class="mi">10</span>                <span class="mi">70</span>      <span class="mi">45</span>       <span class="mi">43</span>       <span class="mi">43</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out hflights, nothing has changed!</span>
<span class="n">hflights</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span> <span class="o">*</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>    <span class="mi">1400</span>    <span class="mi">1500</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>    <span class="mi">1401</span>    <span class="mi">1501</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">3</span>         <span class="mi">1</span>    <span class="mi">1352</span>    <span class="mi">1502</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>    <span class="mi">1403</span>    <span class="mi">1513</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>    <span class="mi">1405</span>    <span class="mi">1507</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">6</span>         <span class="mi">4</span>    <span class="mi">1359</span>    <span class="mi">1503</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">7</span>         <span class="mi">5</span>    <span class="mi">1359</span>    <span class="mi">1509</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">8</span>         <span class="mi">6</span>    <span class="mi">1355</span>    <span class="mi">1454</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>    <span class="mi">1443</span>    <span class="mi">1554</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">10</span>         <span class="mi">1</span>    <span class="mi">1443</span>    <span class="mi">1553</span>      <span class="n">American</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out the columns Origin up to Cancelled of hflights</span>
<span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="m">14</span><span class="o">:</span><span class="m">19</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">6</span>
<span class="o">##</span>    <span class="n">Origin</span>  <span class="n">Dest</span> <span class="n">Distance</span> <span class="n">TaxiIn</span> <span class="n">TaxiOut</span> <span class="n">Cancelled</span>
<span class="o">##</span> <span class="o">*</span>   <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">7</span>      <span class="mi">13</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">2</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">6</span>       <span class="mi">9</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">3</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">5</span>      <span class="mi">17</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">4</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">9</span>      <span class="mi">22</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">5</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">9</span>       <span class="mi">9</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">6</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">6</span>      <span class="mi">13</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">7</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>     <span class="mi">12</span>      <span class="mi">15</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">8</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">7</span>      <span class="mi">12</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">9</span>     <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">8</span>      <span class="mi">22</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="mi">10</span>    <span class="n">IAH</span>   <span class="n">DFW</span>      <span class="mi">224</span>      <span class="mi">6</span>      <span class="mi">19</span>         <span class="mi">0</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Answer to last question: be concise!</span>
<span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="m">12</span><span class="o">:</span><span class="m">21</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">14</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">ArrDelay</span> <span class="n">DepDelay</span> <span class="n">Origin</span>  <span class="n">Dest</span>
<span class="o">##</span> <span class="o">*</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>      <span class="o">-</span><span class="mi">10</span>        <span class="mi">0</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>       <span class="o">-</span><span class="mi">9</span>        <span class="mi">1</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">3</span>         <span class="mi">1</span>       <span class="o">-</span><span class="mi">8</span>       <span class="o">-</span><span class="mi">8</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>        <span class="mi">3</span>        <span class="mi">3</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>       <span class="o">-</span><span class="mi">3</span>        <span class="mi">5</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">6</span>         <span class="mi">4</span>       <span class="o">-</span><span class="mi">7</span>       <span class="o">-</span><span class="mi">1</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">7</span>         <span class="mi">5</span>       <span class="o">-</span><span class="mi">1</span>       <span class="o">-</span><span class="mi">1</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">8</span>         <span class="mi">6</span>      <span class="o">-</span><span class="mi">16</span>       <span class="o">-</span><span class="mi">5</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>       <span class="mi">44</span>       <span class="mi">43</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">10</span>         <span class="mi">1</span>       <span class="mi">43</span>       <span class="mi">43</span>    <span class="n">IAH</span>   <span class="n">DFW</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">6</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>Helper functions for variable selection</strong></p>
<p><code class="codehilite"><span class="k">select</span></code>:</p>
<ul>
<li><code class="codehilite"><span class="n">starts_with</span><span class="p">(</span><span class="ss">&quot;X&quot;</span><span class="p">)</span></code>; every name that starts with <code class="codehilite"><span class="ss">&quot;X&quot;</span></code>,</li>
<li><code class="codehilite"><span class="n">ends_with</span><span class="p">(</span><span class="ss">&quot;X&quot;</span><span class="p">)</span></code>; every name that ends with <code class="codehilite"><span class="ss">&quot;X&quot;</span></code>,</li>
<li><code class="codehilite"><span class="k">contains</span><span class="p">(</span><span class="ss">&quot;X&quot;</span><span class="p">)</span></code>; every name that contains <code class="codehilite"><span class="ss">&quot;X&quot;</span></code>,</li>
<li><code class="codehilite"><span class="n">matches</span><span class="p">(</span><span class="ss">&quot;X&quot;</span><span class="p">)</span></code>; every name that matches <code class="codehilite"><span class="ss">&quot;X&quot;</span></code>, where <code class="codehilite"><span class="ss">&quot;X&quot;</span></code> can be a<br />
    regular expression,</li>
<li><code class="codehilite"><span class="n">num_range</span><span class="p">(</span><span class="ss">&quot;x&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">)</span></code>; the variables named <code class="codehilite"><span class="n">x01</span></code>, <code class="codehilite"><span class="n">x02</span></code>, <code class="codehilite"><span class="n">x03</span></code>, -<br />
<code class="codehilite"><span class="n">x04</span></code> and <code class="codehilite"><span class="n">x05</span></code>,</li>
<li><code class="codehilite"><span class="n">one_of</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; every name that appears in <code class="codehilite"><span class="n">x</span></code>, which should be a<br />
    character vector.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out a tbl containing just ArrDelay and DepDelay</span>
<span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">ArrDelay</span><span class="p">,</span> <span class="n">DepDelay</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">2</span>
<span class="o">##</span>    <span class="n">ArrDelay</span> <span class="n">DepDelay</span>
<span class="o">##</span> <span class="o">*</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>       <span class="o">-</span><span class="mi">10</span>        <span class="mi">0</span>
<span class="o">##</span> <span class="mi">2</span>        <span class="o">-</span><span class="mi">9</span>        <span class="mi">1</span>
<span class="o">##</span> <span class="mi">3</span>        <span class="o">-</span><span class="mi">8</span>       <span class="o">-</span><span class="mi">8</span>
<span class="o">##</span> <span class="mi">4</span>         <span class="mi">3</span>        <span class="mi">3</span>
<span class="o">##</span> <span class="mi">5</span>        <span class="o">-</span><span class="mi">3</span>        <span class="mi">5</span>
<span class="o">##</span> <span class="mi">6</span>        <span class="o">-</span><span class="mi">7</span>       <span class="o">-</span><span class="mi">1</span>
<span class="o">##</span> <span class="mi">7</span>        <span class="o">-</span><span class="mi">1</span>       <span class="o">-</span><span class="mi">1</span>
<span class="o">##</span> <span class="mi">8</span>       <span class="o">-</span><span class="mi">16</span>       <span class="o">-</span><span class="mi">5</span>
<span class="o">##</span> <span class="mi">9</span>        <span class="mi">44</span>       <span class="mi">43</span>
<span class="o">##</span> <span class="mi">10</span>       <span class="mi">43</span>       <span class="mi">43</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out a tbl as described in the second instruction, using both helper functions and variable names</span>
<span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">UniqueCarrier</span><span class="p">,</span> <span class="nf">ends_with</span><span class="p">(</span><span class="s">&#39;Num&#39;</span><span class="p">),</span> <span class="nf">starts_with</span><span class="p">(</span><span class="s">&#39;Cancel&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">5</span>
<span class="o">##</span>    <span class="n">UniqueCarrier</span> <span class="n">FlightNum</span> <span class="n">TailNum</span> <span class="n">Cancelled</span> <span class="n">CancellationCode</span>
<span class="o">##</span> <span class="o">*</span>          <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>            <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N576AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">2</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N557AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">3</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N541AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">4</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N403AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">5</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N492AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">6</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N262AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">7</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N493AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">8</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N477AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">9</span>       <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N476AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="mi">10</span>      <span class="n">American</span>       <span class="mi">428</span>  <span class="n">N504AA</span>         <span class="mi">0</span>                 
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out a tbl as described in the third instruction, using only helper functions.</span>
<span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="nf">ends_with</span><span class="p">(</span><span class="s">&#39;Time&#39;</span><span class="p">),</span> <span class="nf">ends_with</span><span class="p">(</span><span class="s">&#39;Delay&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">6</span>
<span class="o">##</span>    <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">ActualElapsedTime</span> <span class="n">AirTime</span> <span class="n">ArrDelay</span> <span class="n">DepDelay</span>
<span class="o">##</span> <span class="o">*</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>     <span class="mi">1400</span>    <span class="mi">1500</span>                <span class="mi">60</span>      <span class="mi">40</span>      <span class="o">-</span><span class="mi">10</span>        <span class="mi">0</span>
<span class="o">##</span> <span class="mi">2</span>     <span class="mi">1401</span>    <span class="mi">1501</span>                <span class="mi">60</span>      <span class="mi">45</span>       <span class="o">-</span><span class="mi">9</span>        <span class="mi">1</span>
<span class="o">##</span> <span class="mi">3</span>     <span class="mi">1352</span>    <span class="mi">1502</span>                <span class="mi">70</span>      <span class="mi">48</span>       <span class="o">-</span><span class="mi">8</span>       <span class="o">-</span><span class="mi">8</span>
<span class="o">##</span> <span class="mi">4</span>     <span class="mi">1403</span>    <span class="mi">1513</span>                <span class="mi">70</span>      <span class="mi">39</span>        <span class="mi">3</span>        <span class="mi">3</span>
<span class="o">##</span> <span class="mi">5</span>     <span class="mi">1405</span>    <span class="mi">1507</span>                <span class="mi">62</span>      <span class="mi">44</span>       <span class="o">-</span><span class="mi">3</span>        <span class="mi">5</span>
<span class="o">##</span> <span class="mi">6</span>     <span class="mi">1359</span>    <span class="mi">1503</span>                <span class="mi">64</span>      <span class="mi">45</span>       <span class="o">-</span><span class="mi">7</span>       <span class="o">-</span><span class="mi">1</span>
<span class="o">##</span> <span class="mi">7</span>     <span class="mi">1359</span>    <span class="mi">1509</span>                <span class="mi">70</span>      <span class="mi">43</span>       <span class="o">-</span><span class="mi">1</span>       <span class="o">-</span><span class="mi">1</span>
<span class="o">##</span> <span class="mi">8</span>     <span class="mi">1355</span>    <span class="mi">1454</span>                <span class="mi">59</span>      <span class="mi">40</span>      <span class="o">-</span><span class="mi">16</span>       <span class="o">-</span><span class="mi">5</span>
<span class="o">##</span> <span class="mi">9</span>     <span class="mi">1443</span>    <span class="mi">1554</span>                <span class="mi">71</span>      <span class="mi">41</span>       <span class="mi">44</span>       <span class="mi">43</span>
<span class="o">##</span> <span class="mi">10</span>    <span class="mi">1443</span>    <span class="mi">1553</span>                <span class="mi">70</span>      <span class="mi">45</span>       <span class="mi">43</span>       <span class="mi">43</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span>
</pre></div>
</td></tr></table>

<p><strong>Comparison to basic R</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># add</span>
<span class="n">ex1r</span> <span class="o">&lt;-</span> <span class="n">hflights</span><span class="nf">[c</span><span class="p">(</span><span class="s">&#39;TaxiIn&#39;</span><span class="p">,</span><span class="s">&#39;TaxiOut&#39;</span><span class="p">,</span><span class="s">&#39;Distance&#39;</span><span class="p">)</span><span class="n">]</span>

<span class="n">ex1d</span> <span class="o">&lt;-</span> <span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="nf">starts_with</span><span class="p">(</span><span class="s">&#39;Taxi&#39;</span><span class="p">),</span> <span class="n">Distance</span><span class="p">)</span>

<span class="n">ex2r</span> <span class="o">&lt;-</span> <span class="n">hflights</span><span class="nf">[c</span><span class="p">(</span><span class="s">&#39;Year&#39;</span><span class="p">,</span><span class="s">&#39;Month&#39;</span><span class="p">,</span><span class="s">&#39;DayOfWeek&#39;</span><span class="p">,</span><span class="s">&#39;DepTime&#39;</span><span class="p">,</span><span class="s">&#39;ArrTime&#39;</span><span class="p">)</span><span class="n">]</span>

<span class="n">ex2d</span> <span class="o">&lt;-</span> <span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">Year</span><span class="p">,</span> <span class="n">Month</span><span class="p">,</span> <span class="n">DayOfWeek</span><span class="p">,</span> <span class="n">DepTime</span><span class="p">,</span> <span class="n">ArrTime</span><span class="p">)</span>

<span class="n">ex3r</span> <span class="o">&lt;-</span> <span class="n">hflights</span><span class="nf">[c</span><span class="p">(</span><span class="s">&#39;TailNum&#39;</span><span class="p">,</span><span class="s">&#39;TaxiIn&#39;</span><span class="p">,</span><span class="s">&#39;TaxiOut&#39;</span><span class="p">)</span><span class="n">]</span>

<span class="n">ex3d</span> <span class="o">&lt;-</span> <span class="nf">select</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">TailNum</span><span class="p">,</span> <span class="nf">starts_with</span><span class="p">(</span><span class="s">&#39;Taxi&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong>Mutating is creating</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add the new variable ActualGroundTime to a copy of hflights and save the result as g1</span>
<span class="n">g1</span> <span class="o">&lt;-</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">ActualGroundTime</span> <span class="o">=</span> <span class="n">ActualElapsedTime</span> <span class="o">-</span> <span class="n">AirTime</span><span class="p">)</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">hflights</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="n">Observations</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span>
<span class="o">##</span> <span class="n">Variables</span><span class="p">:</span> <span class="mi">21</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Year</span>              <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">20</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Month</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayofMonth</span>        <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayOfWeek</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1400</span><span class="p">,</span> <span class="mi">1401</span><span class="p">,</span> <span class="mi">1352</span><span class="p">,</span> <span class="mi">1403</span><span class="p">,</span> <span class="mi">1405</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">13</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">1501</span><span class="p">,</span> <span class="mi">1502</span><span class="p">,</span> <span class="mi">1513</span><span class="p">,</span> <span class="mi">1507</span><span class="p">,</span> <span class="mi">1503</span><span class="p">,</span> <span class="mi">1509</span><span class="p">,</span> <span class="mi">14</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">UniqueCarrier</span>     <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;America...</span>
<span class="ss">## $ FlightNum         &lt;int&gt; 428, 428, 428, 428, 428, 428, 428, 428, 428,...</span>
<span class="ss">## $ TailNum           &lt;chr&gt; &quot;</span><span class="n">N576AA</span><span class="ss">&quot;, &quot;</span><span class="n">N557AA</span><span class="ss">&quot;, &quot;</span><span class="n">N541AA</span><span class="ss">&quot;, &quot;</span><span class="n">N403AA</span><span class="ss">&quot;, &quot;</span><span class="n">N49</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">AirTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Origin</span>            <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;I...</span>
<span class="ss">## $ Dest              &lt;chr&gt; &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">D</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Distance</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiIn</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiOut</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Cancelled</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">CancellationCode</span>  <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Diverted</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nf">glimpse</span><span class="p">(</span><span class="n">g1</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="n">Observations</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span>
<span class="o">##</span> <span class="n">Variables</span><span class="p">:</span> <span class="mi">22</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Year</span>              <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">20</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Month</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayofMonth</span>        <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayOfWeek</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1400</span><span class="p">,</span> <span class="mi">1401</span><span class="p">,</span> <span class="mi">1352</span><span class="p">,</span> <span class="mi">1403</span><span class="p">,</span> <span class="mi">1405</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">13</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">1501</span><span class="p">,</span> <span class="mi">1502</span><span class="p">,</span> <span class="mi">1513</span><span class="p">,</span> <span class="mi">1507</span><span class="p">,</span> <span class="mi">1503</span><span class="p">,</span> <span class="mi">1509</span><span class="p">,</span> <span class="mi">14</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">UniqueCarrier</span>     <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;America...</span>
<span class="ss">## $ FlightNum         &lt;int&gt; 428, 428, 428, 428, 428, 428, 428, 428, 428,...</span>
<span class="ss">## $ TailNum           &lt;chr&gt; &quot;</span><span class="n">N576AA</span><span class="ss">&quot;, &quot;</span><span class="n">N557AA</span><span class="ss">&quot;, &quot;</span><span class="n">N541AA</span><span class="ss">&quot;, &quot;</span><span class="n">N403AA</span><span class="ss">&quot;, &quot;</span><span class="n">N49</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">AirTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Origin</span>            <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;I...</span>
<span class="ss">## $ Dest              &lt;chr&gt; &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">D</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Distance</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiIn</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiOut</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Cancelled</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">CancellationCode</span>  <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Diverted</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ActualGroundTime</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="p">...</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add the new variable GroundTime to a g1; save the result as g2</span>
<span class="n">g2</span> <span class="o">&lt;-</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">g1</span><span class="p">,</span> <span class="n">GroundTime</span> <span class="o">=</span> <span class="n">TaxiIn</span> <span class="o">+</span> <span class="n">TaxiOut</span><span class="p">)</span>

<span class="nf">head</span><span class="p">(</span><span class="n">g1</span><span class="o">$</span><span class="n">ActualGroundTime</span> <span class="o">==</span> <span class="n">g2</span><span class="o">$</span><span class="n">GroundTime</span><span class="p">,</span> <span class="m">20</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span>  <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span>
<span class="o">##</span> <span class="p">[</span><span class="mi">15</span><span class="p">]</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span> <span class="k">TRUE</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add the new variable AverageSpeed to g2; save the result as g3</span>
<span class="n">g3</span> <span class="o">&lt;-</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">g2</span><span class="p">,</span> <span class="n">AverageSpeed</span> <span class="o">=</span> <span class="n">Distance</span> <span class="o">/</span> <span class="n">AirTime</span> <span class="o">*</span> <span class="m">60</span><span class="p">)</span>
<span class="n">g3</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">24</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>    <span class="mi">1400</span>    <span class="mi">1500</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>    <span class="mi">1401</span>    <span class="mi">1501</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">3</span>         <span class="mi">1</span>    <span class="mi">1352</span>    <span class="mi">1502</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>    <span class="mi">1403</span>    <span class="mi">1513</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>    <span class="mi">1405</span>    <span class="mi">1507</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">6</span>         <span class="mi">4</span>    <span class="mi">1359</span>    <span class="mi">1503</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">7</span>         <span class="mi">5</span>    <span class="mi">1359</span>    <span class="mi">1509</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">8</span>         <span class="mi">6</span>    <span class="mi">1355</span>    <span class="mi">1454</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>    <span class="mi">1443</span>    <span class="mi">1554</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">10</span>         <span class="mi">1</span>    <span class="mi">1443</span>    <span class="mi">1553</span>      <span class="n">American</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">17</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualGroundTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">GroundTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">AverageSpeed</span> <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>Add multiple variables using mutate</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Add a second variable loss_percent to the dataset: m1</span>
<span class="n">m1</span> <span class="o">&lt;-</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">loss</span> <span class="o">=</span> <span class="n">ArrDelay</span> <span class="o">-</span> <span class="n">DepDelay</span><span class="p">,</span> <span class="n">loss_percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">ArrDelay</span> <span class="o">-</span> <span class="n">DepDelay</span><span class="p">)</span><span class="o">/</span><span class="n">DepDelay</span><span class="o">*</span><span class="m">100</span><span class="p">)</span>

<span class="c1"># Copy and adapt the previous command to reduce redendancy: m2</span>
<span class="n">m2</span> <span class="o">&lt;-</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">loss</span> <span class="o">=</span> <span class="n">ArrDelay</span> <span class="o">-</span> <span class="n">DepDelay</span><span class="p">,</span> <span class="n">loss_percent</span> <span class="o">=</span> <span class="n">loss</span><span class="o">/</span><span class="n">DepDelay</span> <span class="o">*</span> <span class="m">100</span><span class="p">)</span>

<span class="c1"># Add the three variables as described in the third instruction: m3</span>
<span class="n">m3</span> <span class="o">&lt;-</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">TotalTaxi</span> <span class="o">=</span> <span class="n">TaxiIn</span> <span class="o">+</span> <span class="n">TaxiOut</span><span class="p">,</span> <span class="n">ActualGroundTime</span> <span class="o">=</span> <span class="n">ActualElapsedTime</span> <span class="o">-</span> <span class="n">AirTime</span><span class="p">,</span> <span class="n">Diff</span> <span class="o">=</span> <span class="n">TotalTaxi</span> <span class="o">-</span> <span class="n">ActualGroundTime</span><span class="p">)</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">m3</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="n">Observations</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span>
<span class="o">##</span> <span class="n">Variables</span><span class="p">:</span> <span class="mi">24</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Year</span>              <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">2011</span><span class="p">,</span> <span class="mi">20</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="k">Month</span>             <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayofMonth</span>        <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DayOfWeek</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1400</span><span class="p">,</span> <span class="mi">1401</span><span class="p">,</span> <span class="mi">1352</span><span class="p">,</span> <span class="mi">1403</span><span class="p">,</span> <span class="mi">1405</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">1359</span><span class="p">,</span> <span class="mi">13</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">1501</span><span class="p">,</span> <span class="mi">1502</span><span class="p">,</span> <span class="mi">1513</span><span class="p">,</span> <span class="mi">1507</span><span class="p">,</span> <span class="mi">1503</span><span class="p">,</span> <span class="mi">1509</span><span class="p">,</span> <span class="mi">14</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">UniqueCarrier</span>     <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;American&quot;</span><span class="p">,</span> <span class="ss">&quot;America...</span>
<span class="ss">## $ FlightNum         &lt;int&gt; 428, 428, 428, 428, 428, 428, 428, 428, 428,...</span>
<span class="ss">## $ TailNum           &lt;chr&gt; &quot;</span><span class="n">N576AA</span><span class="ss">&quot;, &quot;</span><span class="n">N557AA</span><span class="ss">&quot;, &quot;</span><span class="n">N541AA</span><span class="ss">&quot;, &quot;</span><span class="n">N403AA</span><span class="ss">&quot;, &quot;</span><span class="n">N49</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">AirTime</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ArrDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">DepDelay</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Origin</span>            <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;IAH&quot;</span><span class="p">,</span> <span class="ss">&quot;I...</span>
<span class="ss">## $ Dest              &lt;chr&gt; &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">DFW</span><span class="ss">&quot;, &quot;</span><span class="n">D</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Distance</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiIn</span>            <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TaxiOut</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">11</span><span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Cancelled</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">CancellationCode</span>  <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="ss">&quot;&quot;</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Diverted</span>          <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">TotalTaxi</span>         <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">ActualGroundTime</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="p">...</span>
<span class="o">##</span> <span class="err">$</span> <span class="n">Diff</span>              <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,...</span>
</pre></div>
</td></tr></table>

<h3 id="3-filter-and-arrange">3, <code class="codehilite"><span class="n">filter</span></code> and <code class="codehilite"><span class="n">arrange</span></code><a class="headerlink" href="#3-filter-and-arrange" title="Permanent link">&para;</a></h3>
<p><strong>Logical operators</strong></p>
<p><code class="codehilite"><span class="n">filter</span></code>:</p>
<ul>
<li><code class="codehilite"><span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span></code>; <code class="codehilite"><span class="k">TRUE</span></code> if <code class="codehilite"><span class="n">x</span></code> is less than <code class="codehilite"><span class="n">y</span></code>.</li>
<li><code class="codehilite"><span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span></code>; <code class="codehilite"><span class="k">TRUE</span></code> if <code class="codehilite"><span class="n">x</span></code> is less than or equal to <code class="codehilite"><span class="n">y</span></code>.</li>
<li><code class="codehilite"><span class="n">x</span> <span class="o">==</span> <span class="n">y</span></code>; <code class="codehilite"><span class="k">TRUE</span></code> if <code class="codehilite"><span class="n">x</span></code> equals <code class="codehilite"><span class="n">y</span></code>.</li>
<li><code class="codehilite"><span class="n">x</span> <span class="o">!=</span> <span class="n">y</span></code>; <code class="codehilite"><span class="k">TRUE</span></code> if <code class="codehilite"><span class="n">x</span></code> does not equal <code class="codehilite"><span class="n">y</span></code>.</li>
<li><code class="codehilite"><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">y</span></code>; <code class="codehilite"><span class="k">TRUE</span></code> if <code class="codehilite"><span class="n">x</span></code> is greater than or equal to <code class="codehilite"><span class="n">y</span></code>.</li>
<li><code class="codehilite"><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span></code>; <code class="codehilite"><span class="k">TRUE</span></code> if <code class="codehilite"><span class="n">x</span></code> is greater than <code class="codehilite"><span class="n">y</span></code>.</li>
<li><code class="codehilite"><span class="n">x</span> <span class="o">%</span><span class="k">in</span><span class="o">%</span> <span class="k">c</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="k">c</span><span class="p">)</span></code>; <code class="codehilite"><span class="k">TRUE</span></code> if <code class="codehilite"><span class="n">x</span></code> is in the vector <code class="codehilite"><span class="k">c</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="k">c</span><span class="p">)</span></code>.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># All flights that traveled 3000 miles or more</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&gt;=</span> <span class="m">3000</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">527</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>     <span class="mi">924</span>    <span class="mi">1413</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">30</span>         <span class="mi">7</span>     <span class="mi">925</span>    <span class="mi">1410</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">29</span>         <span class="mi">6</span>    <span class="mi">1045</span>    <span class="mi">1445</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">28</span>         <span class="mi">5</span>    <span class="mi">1516</span>    <span class="mi">1916</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">27</span>         <span class="mi">4</span>     <span class="mi">950</span>    <span class="mi">1344</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">26</span>         <span class="mi">3</span>     <span class="mi">944</span>    <span class="mi">1350</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">25</span>         <span class="mi">2</span>     <span class="mi">924</span>    <span class="mi">1337</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">24</span>         <span class="mi">1</span>    <span class="mi">1144</span>    <span class="mi">1605</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">23</span>         <span class="mi">7</span>     <span class="mi">926</span>    <span class="mi">1335</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">22</span>         <span class="mi">6</span>     <span class="mi">942</span>    <span class="mi">1340</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">517</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># All flights flown by one of JetBlue, Southwest, or Delta</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">UniqueCarrier</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;JetBlue&#39;</span><span class="p">,</span><span class="s">&#39;Southwest&#39;</span><span class="p">,</span><span class="s">&#39;Delta&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span><span class="mi">679</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>     <span class="mi">654</span>    <span class="mi">1124</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>    <span class="mi">1639</span>    <span class="mi">2110</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>     <span class="mi">703</span>    <span class="mi">1113</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>    <span class="mi">1604</span>    <span class="mi">2040</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">3</span>         <span class="mi">1</span>     <span class="mi">659</span>    <span class="mi">1100</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">3</span>         <span class="mi">1</span>    <span class="mi">1801</span>    <span class="mi">2200</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>     <span class="mi">654</span>    <span class="mi">1103</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>    <span class="mi">1608</span>    <span class="mi">2034</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>     <span class="mi">700</span>    <span class="mi">1103</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>    <span class="mi">1544</span>    <span class="mi">1954</span>       <span class="n">JetBlue</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">48</span><span class="p">,</span><span class="mi">669</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># All flights where taxiing took longer than flying</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="p">(</span><span class="n">TaxiIn</span> <span class="o">+</span> <span class="n">TaxiOut</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">AirTime</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span><span class="mi">389</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">24</span>         <span class="mi">1</span>     <span class="mi">731</span>     <span class="mi">904</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">30</span>         <span class="mi">7</span>    <span class="mi">1959</span>    <span class="mi">2132</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">24</span>         <span class="mi">1</span>    <span class="mi">1621</span>    <span class="mi">1749</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">10</span>         <span class="mi">1</span>     <span class="mi">941</span>    <span class="mi">1113</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>    <span class="mi">1301</span>    <span class="mi">1356</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>    <span class="mi">2113</span>    <span class="mi">2215</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>    <span class="mi">1434</span>    <span class="mi">1539</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>     <span class="mi">900</span>    <span class="mi">1006</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">30</span>         <span class="mi">7</span>    <span class="mi">1304</span>    <span class="mi">1408</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">30</span>         <span class="mi">7</span>    <span class="mi">2004</span>    <span class="mi">2128</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">1</span><span class="p">,</span><span class="mi">379</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>Combining tests using boolean operators</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># All flights that departed before 5am or arrived after 10pm</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">DepTime</span> <span class="o">&lt;</span> <span class="m">500</span> <span class="o">|</span> <span class="n">ArrTime</span> <span class="o">&gt;</span> <span class="m">2200</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span><span class="mi">799</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">4</span>         <span class="mi">2</span>    <span class="mi">2100</span>    <span class="mi">2207</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">14</span>         <span class="mi">5</span>    <span class="mi">2119</span>    <span class="mi">2229</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">10</span>         <span class="mi">1</span>    <span class="mi">1934</span>    <span class="mi">2235</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">26</span>         <span class="mi">3</span>    <span class="mi">1905</span>    <span class="mi">2211</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">30</span>         <span class="mi">7</span>    <span class="mi">1856</span>    <span class="mi">2209</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>    <span class="mi">1938</span>    <span class="mi">2228</span>        <span class="n">Alaska</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>    <span class="mi">1919</span>    <span class="mi">2231</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>    <span class="mi">2116</span>    <span class="mi">2344</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>    <span class="mi">1850</span>    <span class="mi">2211</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">31</span>         <span class="mi">1</span>    <span class="mi">2102</span>    <span class="mi">2216</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">27</span><span class="p">,</span><span class="mi">789</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># All flights that departed late but arrived ahead of schedule</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">DepDelay</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="o">&amp;</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span> <span class="m">0</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span><span class="mi">712</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>    <span class="mi">1401</span>    <span class="mi">1501</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">5</span>         <span class="mi">3</span>    <span class="mi">1405</span>    <span class="mi">1507</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">18</span>         <span class="mi">2</span>    <span class="mi">1408</span>    <span class="mi">1508</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">18</span>         <span class="mi">2</span>     <span class="mi">721</span>     <span class="mi">827</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">12</span>         <span class="mi">3</span>    <span class="mi">2015</span>    <span class="mi">2113</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">13</span>         <span class="mi">4</span>    <span class="mi">2020</span>    <span class="mi">2116</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">26</span>         <span class="mi">3</span>    <span class="mi">2009</span>    <span class="mi">2103</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>    <span class="mi">1631</span>    <span class="mi">1736</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">10</span>         <span class="mi">1</span>    <span class="mi">1639</span>    <span class="mi">1740</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">12</span>         <span class="mi">3</span>    <span class="mi">1631</span>    <span class="mi">1739</span>      <span class="n">American</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">27</span><span class="p">,</span><span class="mi">702</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># All cancelled weekend flights</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">DayOfWeek</span> <span class="o">%in%</span> <span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Cancelled</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">585</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span>      <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>              <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>      <span class="n">NA</span>      <span class="n">NA</span>           <span class="n">American</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">29</span>         <span class="mi">6</span>      <span class="n">NA</span>      <span class="n">NA</span>        <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>      <span class="n">NA</span>      <span class="n">NA</span>        <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>      <span class="n">NA</span>      <span class="n">NA</span>              <span class="n">Delta</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>      <span class="n">NA</span>      <span class="n">NA</span>            <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">2</span>         <span class="mi">7</span>      <span class="n">NA</span>      <span class="n">NA</span>          <span class="n">Southwest</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">29</span>         <span class="mi">6</span>      <span class="n">NA</span>      <span class="n">NA</span>              <span class="n">Delta</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>      <span class="n">NA</span>      <span class="n">NA</span> <span class="n">Atlantic_Southeast</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">1</span>         <span class="mi">6</span>      <span class="n">NA</span>      <span class="n">NA</span>            <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">9</span>         <span class="mi">7</span>      <span class="n">NA</span>      <span class="n">NA</span>            <span class="n">AirTran</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">575</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># All flights that were cancelled after being delayed</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">DepDelay</span> <span class="o">&gt;</span> <span class="m">0</span> <span class="o">&amp;</span> <span class="n">Cancelled</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">40</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">26</span>         <span class="mi">3</span>    <span class="mi">1926</span>      <span class="n">NA</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">11</span>         <span class="mi">2</span>    <span class="mi">1100</span>      <span class="n">NA</span>    <span class="n">US_Airways</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">19</span>         <span class="mi">3</span>    <span class="mi">1811</span>      <span class="n">NA</span>    <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">7</span>         <span class="mi">5</span>    <span class="mi">2028</span>      <span class="n">NA</span>    <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">4</span>         <span class="mi">5</span>    <span class="mi">1638</span>      <span class="n">NA</span>      <span class="n">American</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">8</span>         <span class="mi">2</span>    <span class="mi">1057</span>      <span class="n">NA</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">2</span>         <span class="mi">3</span>     <span class="mi">802</span>      <span class="n">NA</span>    <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">9</span>         <span class="mi">3</span>     <span class="mi">904</span>      <span class="n">NA</span>    <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">1</span>         <span class="mi">2</span>    <span class="mi">1508</span>      <span class="n">NA</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">3</span>         <span class="mi">31</span>         <span class="mi">4</span>    <span class="mi">1016</span>      <span class="n">NA</span>   <span class="n">Continental</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">30</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>Blend together what you&rsquo;ve learned!</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Select the flights that had JFK as their destination: c1</span>
<span class="n">c1</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">==</span> <span class="s">&#39;JFK&#39;</span><span class="p">)</span>

<span class="c1"># Combine the Year, Month and DayofMonth variables to create a Date column: c2</span>
<span class="n">c2</span> <span class="o">&lt;-</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">Date</span> <span class="o">=</span> <span class="nf">paste</span><span class="p">(</span><span class="n">Year</span><span class="p">,</span> <span class="n">Month</span><span class="p">,</span> <span class="n">DayofMonth</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;-&#39;</span><span class="p">))</span>

<span class="c1"># Print out a selection of columns of c2</span>
<span class="nf">select</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="n">Date</span><span class="p">,</span> <span class="n">DepTime</span><span class="p">,</span> <span class="n">ArrTime</span><span class="p">,</span> <span class="n">TailNum</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">695</span> <span class="err">×</span> <span class="mi">4</span>
<span class="o">##</span>        <span class="nb">Date</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">TailNum</span>
<span class="o">##</span>       <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span>     <span class="mi">654</span>    <span class="mi">1124</span>  <span class="n">N324JB</span>
<span class="o">##</span> <span class="mi">2</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span>    <span class="mi">1639</span>    <span class="mi">2110</span>  <span class="n">N324JB</span>
<span class="o">##</span> <span class="mi">3</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span>     <span class="mi">703</span>    <span class="mi">1113</span>  <span class="n">N324JB</span>
<span class="o">##</span> <span class="mi">4</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span>    <span class="mi">1604</span>    <span class="mi">2040</span>  <span class="n">N324JB</span>
<span class="o">##</span> <span class="mi">5</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">3</span>     <span class="mi">659</span>    <span class="mi">1100</span>  <span class="n">N229JB</span>
<span class="o">##</span> <span class="mi">6</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">3</span>    <span class="mi">1801</span>    <span class="mi">2200</span>  <span class="n">N206JB</span>
<span class="o">##</span> <span class="mi">7</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">4</span>     <span class="mi">654</span>    <span class="mi">1103</span>  <span class="n">N267JB</span>
<span class="o">##</span> <span class="mi">8</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">4</span>    <span class="mi">1608</span>    <span class="mi">2034</span>  <span class="n">N267JB</span>
<span class="o">##</span> <span class="mi">9</span>  <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">5</span>     <span class="mi">700</span>    <span class="mi">1103</span>  <span class="n">N708JB</span>
<span class="o">##</span> <span class="mi">10</span> <span class="mi">2011</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">5</span>    <span class="mi">1544</span>    <span class="mi">1954</span>  <span class="n">N644JB</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">685</span> <span class="k">more</span> <span class="k">rows</span>
</pre></div>
</td></tr></table>

<p><strong>Arranging your data</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Definition of dtc</span>
<span class="n">dtc</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">==</span> <span class="m">1</span><span class="p">,</span> <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">DepDelay</span><span class="p">))</span>

<span class="c1"># Arrange dtc by departure delays</span>
<span class="nf">arrange</span><span class="p">(</span><span class="n">dtc</span><span class="p">,</span> <span class="n">DepDelay</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">68</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span>  <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>          <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">7</span>         <span class="mi">23</span>         <span class="mi">6</span>     <span class="mi">605</span>      <span class="n">NA</span>       <span class="n">Frontier</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">17</span>         <span class="mi">1</span>     <span class="mi">916</span>      <span class="n">NA</span>     <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>    <span class="mi">12</span>          <span class="mi">1</span>         <span class="mi">4</span>     <span class="mi">541</span>      <span class="n">NA</span>     <span class="n">US_Airways</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>    <span class="mi">10</span>         <span class="mi">12</span>         <span class="mi">3</span>    <span class="mi">2022</span>      <span class="n">NA</span> <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">7</span>         <span class="mi">29</span>         <span class="mi">5</span>    <span class="mi">1424</span>      <span class="n">NA</span>    <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">9</span>         <span class="mi">29</span>         <span class="mi">4</span>    <span class="mi">1639</span>      <span class="n">NA</span>        <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">9</span>         <span class="mi">3</span>     <span class="mi">555</span>      <span class="n">NA</span> <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">5</span>          <span class="mi">9</span>         <span class="mi">1</span>     <span class="mi">715</span>      <span class="n">NA</span>        <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">20</span>         <span class="mi">4</span>    <span class="mi">1413</span>      <span class="n">NA</span>         <span class="n">United</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">17</span>         <span class="mi">1</span>     <span class="mi">831</span>      <span class="n">NA</span>      <span class="n">Southwest</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">58</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Arrange dtc so that cancellation reasons are grouped</span>
<span class="nf">arrange</span><span class="p">(</span><span class="n">dtc</span><span class="p">,</span> <span class="n">CancellationCode</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">68</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span>  <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>          <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">20</span>         <span class="mi">4</span>    <span class="mi">1413</span>      <span class="n">NA</span>         <span class="n">United</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">1</span>          <span class="mi">7</span>         <span class="mi">5</span>    <span class="mi">2028</span>      <span class="n">NA</span>     <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">4</span>         <span class="mi">5</span>    <span class="mi">1638</span>      <span class="n">NA</span>       <span class="n">American</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">8</span>         <span class="mi">2</span>    <span class="mi">1057</span>      <span class="n">NA</span>    <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">1</span>         <span class="mi">2</span>    <span class="mi">1508</span>      <span class="n">NA</span>        <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">2</span>         <span class="mi">21</span>         <span class="mi">1</span>    <span class="mi">2257</span>      <span class="n">NA</span>        <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">9</span>         <span class="mi">3</span>     <span class="mi">555</span>      <span class="n">NA</span> <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">3</span>         <span class="mi">18</span>         <span class="mi">5</span>     <span class="mi">727</span>      <span class="n">NA</span>         <span class="n">United</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">4</span>          <span class="mi">4</span>         <span class="mi">1</span>    <span class="mi">1632</span>      <span class="n">NA</span>          <span class="n">Delta</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">4</span>          <span class="mi">8</span>         <span class="mi">5</span>    <span class="mi">1608</span>      <span class="n">NA</span>      <span class="n">Southwest</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">58</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Arrange dtc according to carrier and departure delays</span>
<span class="nf">arrange</span><span class="p">(</span><span class="n">dtc</span><span class="p">,</span> <span class="n">UniqueCarrier</span><span class="p">,</span> <span class="n">DepDelay</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">68</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span>      <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>              <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">6</span>         <span class="mi">11</span>         <span class="mi">6</span>    <span class="mi">1649</span>      <span class="n">NA</span>            <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">8</span>         <span class="mi">18</span>         <span class="mi">4</span>    <span class="mi">1808</span>      <span class="n">NA</span>           <span class="n">American</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">4</span>         <span class="mi">5</span>    <span class="mi">1638</span>      <span class="n">NA</span>           <span class="n">American</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>    <span class="mi">10</span>         <span class="mi">12</span>         <span class="mi">3</span>    <span class="mi">2022</span>      <span class="n">NA</span>     <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">2</span>          <span class="mi">9</span>         <span class="mi">3</span>     <span class="mi">555</span>      <span class="n">NA</span>     <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">7</span>         <span class="mi">17</span>         <span class="mi">7</span>    <span class="mi">1917</span>      <span class="n">NA</span>     <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">4</span>         <span class="mi">30</span>         <span class="mi">6</span>     <span class="mi">612</span>      <span class="n">NA</span> <span class="n">Atlantic_Southeast</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">4</span>         <span class="mi">10</span>         <span class="mi">7</span>    <span class="mi">1147</span>      <span class="n">NA</span> <span class="n">Atlantic_Southeast</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">5</span>         <span class="mi">23</span>         <span class="mi">1</span>     <span class="mi">657</span>      <span class="n">NA</span> <span class="n">Atlantic_Southeast</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">9</span>         <span class="mi">29</span>         <span class="mi">4</span>     <span class="mi">723</span>      <span class="n">NA</span> <span class="n">Atlantic_Southeast</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">58</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>Reverse the order of arranging</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Arrange according to carrier and decreasing departure delays</span>
<span class="nf">arrange</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">UniqueCarrier</span><span class="p">,</span> <span class="nf">desc</span><span class="p">(</span><span class="n">DepDelay</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">2</span>         <span class="mi">19</span>         <span class="mi">6</span>    <span class="mi">1902</span>    <span class="mi">2143</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">3</span>         <span class="mi">14</span>         <span class="mi">1</span>    <span class="mi">2024</span>    <span class="mi">2309</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">2</span>         <span class="mi">16</span>         <span class="mi">3</span>    <span class="mi">2349</span>     <span class="mi">227</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>    <span class="mi">11</span>         <span class="mi">13</span>         <span class="mi">7</span>    <span class="mi">2312</span>     <span class="mi">213</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">5</span>         <span class="mi">26</span>         <span class="mi">4</span>    <span class="mi">2353</span>     <span class="mi">305</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">5</span>         <span class="mi">26</span>         <span class="mi">4</span>    <span class="mi">1922</span>    <span class="mi">2229</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">4</span>         <span class="mi">28</span>         <span class="mi">4</span>    <span class="mi">1045</span>    <span class="mi">1328</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">6</span>          <span class="mi">5</span>         <span class="mi">7</span>    <span class="mi">2207</span>      <span class="mi">52</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">5</span>          <span class="mi">7</span>         <span class="mi">6</span>    <span class="mi">1009</span>    <span class="mi">1256</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">7</span>         <span class="mi">25</span>         <span class="mi">1</span>    <span class="mi">2107</span>      <span class="mi">14</span>       <span class="n">AirTran</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Arrange flights by total delay (normal order).</span>
<span class="nf">arrange</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="p">(</span><span class="n">ArrDelay</span><span class="o">+</span><span class="n">DepDelay</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span><span class="mi">496</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span> <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>         <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>     <span class="mi">7</span>          <span class="mi">3</span>         <span class="mi">7</span>    <span class="mi">1914</span>    <span class="mi">2039</span>    <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">8</span>         <span class="mi">31</span>         <span class="mi">3</span>     <span class="mi">934</span>    <span class="mi">1039</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>     <span class="mi">8</span>         <span class="mi">21</span>         <span class="mi">7</span>     <span class="mi">935</span>    <span class="mi">1039</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">8</span>         <span class="mi">28</span>         <span class="mi">7</span>    <span class="mi">2059</span>    <span class="mi">2206</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">8</span>         <span class="mi">29</span>         <span class="mi">1</span>     <span class="mi">935</span>    <span class="mi">1041</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>    <span class="mi">12</span>         <span class="mi">25</span>         <span class="mi">7</span>     <span class="mi">741</span>     <span class="mi">926</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">1</span>         <span class="mi">30</span>         <span class="mi">7</span>     <span class="mi">620</span>     <span class="mi">812</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">8</span>          <span class="mi">3</span>         <span class="mi">3</span>    <span class="mi">1741</span>    <span class="mi">1810</span>    <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">8</span>          <span class="mi">4</span>         <span class="mi">4</span>     <span class="mi">930</span>    <span class="mi">1041</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>     <span class="mi">8</span>         <span class="mi">18</span>         <span class="mi">4</span>     <span class="mi">939</span>    <span class="mi">1043</span>       <span class="n">SkyWest</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">227</span><span class="p">,</span><span class="mi">486</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Keep flights leaving to DFW before 8am and arrange according to decreasing AirTime </span>
<span class="nf">arrange</span><span class="p">(</span><span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">==</span> <span class="s">&#39;DFW&#39;</span> <span class="o">&amp;</span> <span class="n">DepTime</span><span class="o">&lt;</span><span class="m">800</span><span class="p">),</span> <span class="nf">desc</span><span class="p">(</span><span class="n">AirTime</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">799</span> <span class="err">×</span> <span class="mi">21</span>
<span class="o">##</span>     <span class="k">Year</span> <span class="k">Month</span> <span class="n">DayofMonth</span> <span class="n">DayOfWeek</span> <span class="n">DepTime</span> <span class="n">ArrTime</span>  <span class="n">UniqueCarrier</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>          <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">2011</span>    <span class="mi">11</span>         <span class="mi">22</span>         <span class="mi">2</span>     <span class="mi">635</span>     <span class="mi">825</span>       <span class="n">American</span>
<span class="o">##</span> <span class="mi">2</span>   <span class="mi">2011</span>     <span class="mi">8</span>         <span class="mi">25</span>         <span class="mi">4</span>     <span class="mi">602</span>     <span class="mi">758</span> <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">3</span>   <span class="mi">2011</span>    <span class="mi">10</span>         <span class="mi">12</span>         <span class="mi">3</span>     <span class="mi">559</span>     <span class="mi">738</span> <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">4</span>   <span class="mi">2011</span>     <span class="mi">5</span>          <span class="mi">2</span>         <span class="mi">1</span>     <span class="mi">716</span>     <span class="mi">854</span>       <span class="n">American</span>
<span class="o">##</span> <span class="mi">5</span>   <span class="mi">2011</span>     <span class="mi">4</span>          <span class="mi">4</span>         <span class="mi">1</span>     <span class="mi">741</span>     <span class="mi">949</span>       <span class="n">American</span>
<span class="o">##</span> <span class="mi">6</span>   <span class="mi">2011</span>     <span class="mi">4</span>          <span class="mi">4</span>         <span class="mi">1</span>     <span class="mi">627</span>     <span class="mi">742</span> <span class="n">American_Eagle</span>
<span class="o">##</span> <span class="mi">7</span>   <span class="mi">2011</span>     <span class="mi">6</span>         <span class="mi">21</span>         <span class="mi">2</span>     <span class="mi">726</span>     <span class="mi">848</span>     <span class="n">ExpressJet</span>
<span class="o">##</span> <span class="mi">8</span>   <span class="mi">2011</span>     <span class="mi">9</span>          <span class="mi">1</span>         <span class="mi">4</span>     <span class="mi">715</span>     <span class="mi">844</span>       <span class="n">American</span>
<span class="o">##</span> <span class="mi">9</span>   <span class="mi">2011</span>     <span class="mi">3</span>         <span class="mi">14</span>         <span class="mi">1</span>     <span class="mi">729</span>     <span class="mi">917</span>    <span class="n">Continental</span>
<span class="o">##</span> <span class="mi">10</span>  <span class="mi">2011</span>    <span class="mi">12</span>          <span class="mi">5</span>         <span class="mi">1</span>     <span class="mi">724</span>     <span class="mi">847</span>    <span class="n">Continental</span>
<span class="o">##</span> <span class="o">#</span> <span class="p">...</span> <span class="k">with</span> <span class="mi">789</span> <span class="k">more</span> <span class="k">rows</span><span class="p">,</span> <span class="k">and</span> <span class="mi">14</span> <span class="k">more</span> <span class="n">variables</span><span class="p">:</span> <span class="n">FlightNum</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TailNum</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ActualElapsedTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">AirTime</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ArrDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">DepDelay</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Origin</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Dest</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Distance</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">TaxiIn</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">TaxiOut</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Cancelled</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CancellationCode</span> <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">##</span> <span class="o">#</span>   <span class="n">Diverted</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
</pre></div>
</td></tr></table>

<h3 id="4-summarise-and-the-pipe-operator">4, <code class="codehilite"><span class="n">summarise</span></code> and the Pipe Operator<a class="headerlink" href="#4-summarise-and-the-pipe-operator" title="Permanent link">&para;</a></h3>
<p><strong>The syntax of summarise</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out a summary with variables min_dist and max_dist</span>
<span class="nf">summarise</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">min_dist</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">Distance</span><span class="p">),</span> <span class="n">max_dist</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">Distance</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">2</span>
<span class="o">##</span>   <span class="n">min_dist</span> <span class="n">max_dist</span>
<span class="o">##</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>       <span class="mi">79</span>     <span class="mi">3904</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out a summary with variable max_div</span>
<span class="nf">summarise</span><span class="p">(</span><span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">Diverted</span> <span class="o">==</span> <span class="m">1</span><span class="p">),</span> <span class="n">max_div</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">Distance</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">1</span>
<span class="o">##</span>   <span class="n">max_div</span>
<span class="o">##</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>    <span class="mi">3904</span>
</pre></div>
</td></tr></table>

<p><strong>Aggregate functions</strong></p>
<p><code class="codehilite"><span class="n">summarise</span></code>:</p>
<ul>
<li><code class="codehilite"><span class="k">min</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; minimum value of vector x.</li>
<li><code class="codehilite"><span class="k">max</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; maximum value of vector x.</li>
<li><code class="codehilite"><span class="n">mean</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; mean value of vector x.</li>
<li><code class="codehilite"><span class="n">median</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; median value of vector x.</li>
<li><code class="codehilite"><span class="n">quantile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span></code>; pth quantile of vector x.</li>
<li><code class="codehilite"><span class="n">sd</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; standard deviation of vector x.</li>
<li><code class="codehilite"><span class="n">var</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; variance of vector x.</li>
<li><code class="codehilite"><span class="n">IQR</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; Inter Quartile Range (IQR) of vector x.</li>
<li><code class="codehilite"><span class="n">diff</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="n">x</span><span class="p">))</span></code>; total range of vector x.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Remove rows that have NA ArrDelay: temp1</span>
<span class="n">temp1</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">))</span>

<span class="c1"># Generate summary about ArrDelay column of temp1</span>
<span class="nf">summarise</span><span class="p">(</span><span class="n">temp1</span><span class="p">,</span> <span class="n">earliest</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">),</span> <span class="n">average</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">),</span> <span class="n">latest</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">),</span> <span class="n">sd</span> <span class="o">=</span> <span class="nf">sd</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">4</span>
<span class="o">##</span>   <span class="n">earliest</span>  <span class="n">average</span> <span class="n">latest</span>       <span class="n">sd</span>
<span class="o">##</span>      <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>      <span class="o">-</span><span class="mi">70</span> <span class="mi">7</span><span class="p">.</span><span class="mi">094334</span>    <span class="mi">978</span> <span class="mi">30</span><span class="p">.</span><span class="mi">70852</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Keep rows that have no NA TaxiIn and no NA TaxiOut: temp2</span>
<span class="n">temp2</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">TaxiIn</span><span class="p">),</span> <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">TaxiOut</span><span class="p">))</span>

<span class="c1"># Print the maximum taxiing difference of temp2 with summarise()</span>
<span class="nf">summarise</span><span class="p">(</span><span class="n">temp2</span><span class="p">,</span> <span class="n">max_taxi_diff</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">TaxiIn</span> <span class="o">-</span> <span class="n">TaxiOut</span><span class="p">)))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">1</span>
<span class="o">##</span>   <span class="n">max_taxi_diff</span>
<span class="o">##</span>           <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>           <span class="mi">160</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite"><span class="n">dplyr</span></code> aggregate functions</strong></p>
<ul>
<li><code class="codehilite"><span class="k">first</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; the first element of vector <code class="codehilite"><span class="n">x</span></code>.</li>
<li><code class="codehilite"><span class="k">last</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; the last element of vector <code class="codehilite"><span class="n">x</span></code>.</li>
<li><code class="codehilite"><span class="n">nth</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span></code>; The <code class="codehilite"><span class="n">n</span></code>th element of vector <code class="codehilite"><span class="n">x</span></code>.</li>
<li><code class="codehilite"><span class="n">n</span><span class="p">()</span></code>; The number of rows in the data.frame or group of observations<br />
    that <code class="codehilite"><span class="n">summarise</span><span class="p">()</span></code> describes.</li>
<li><code class="codehilite"><span class="n">n_distinct</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>; The number of unique values in vector <code class="codehilite"><span class="n">x</span></code>.</li>
</ul>
<!-- -->

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Generate summarizing statistics for hflights</span>
<span class="nf">summarise</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">n_obs</span> <span class="o">=</span> <span class="nf">n</span><span class="p">(),</span> <span class="n">n_carrier</span> <span class="o">=</span> <span class="nf">n_distinct</span><span class="p">(</span><span class="n">UniqueCarrier</span><span class="p">),</span> <span class="n">n_dest</span> <span class="o">=</span> <span class="nf">n_distinct</span><span class="p">(</span><span class="n">Dest</span><span class="p">),</span> <span class="n">dest100</span> <span class="o">=</span> <span class="nf">nth</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="m">100</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">4</span>
<span class="o">##</span>    <span class="n">n_obs</span> <span class="n">n_carrier</span> <span class="n">n_dest</span> <span class="n">dest100</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>   <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span> <span class="mi">227496</span>        <span class="mi">15</span>    <span class="mi">116</span>     <span class="n">DFW</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Filter hflights to keep all American Airline flights: aa</span>
<span class="n">aa</span> <span class="o">&lt;-</span> <span class="nf">filter</span><span class="p">(</span><span class="n">hflights</span><span class="p">,</span> <span class="n">UniqueCarrier</span> <span class="o">==</span> <span class="s">&#39;American&#39;</span><span class="p">)</span>

<span class="c1"># Generate summarizing statistics for aa </span>
<span class="nf">summarise</span><span class="p">(</span><span class="n">aa</span><span class="p">,</span> <span class="n">n_flights</span> <span class="o">=</span> <span class="nf">n</span><span class="p">(),</span> <span class="n">n_canc</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">Cancelled</span><span class="p">),</span> <span class="n">p_canc</span> <span class="o">=</span> <span class="n">n_canc</span><span class="o">/</span><span class="n">n_flights</span><span class="o">*</span><span class="m">100</span><span class="p">,</span> <span class="n">avg_delay</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">4</span>
<span class="o">##</span>   <span class="n">n_flights</span> <span class="n">n_canc</span>   <span class="n">p_canc</span> <span class="n">avg_delay</span>
<span class="o">##</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>      <span class="mi">3244</span>     <span class="mi">60</span> <span class="mi">1</span><span class="p">.</span><span class="mi">849568</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8917558</span>
</pre></div>
</td></tr></table>

<p><strong>Overview of syntax</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Write the &#39;piped&#39; version of the English sentences</span>
<span class="n">hflights</span> <span class="o">%&gt;%</span>
    <span class="nf">mutate</span><span class="p">(</span><span class="n">diff</span> <span class="o">=</span> <span class="n">TaxiOut</span> <span class="o">-</span> <span class="n">TaxiIn</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">diff</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">summarise</span><span class="p">(</span> <span class="n">avg</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">diff</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">1</span>
<span class="o">##</span>        <span class="k">avg</span>
<span class="o">##</span>      <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span> <span class="mi">8</span><span class="p">.</span><span class="mi">992064</span>
</pre></div>
</td></tr></table>

<p><strong>Drive or fly? Part 1 of 2</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Part 1, concerning the selection and creation of columns</span>
<span class="n">d</span> <span class="o">&lt;-</span> <span class="n">hflights</span> <span class="o">%&gt;%</span>
  <span class="nf">select</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="n">UniqueCarrier</span><span class="p">,</span> <span class="n">Distance</span><span class="p">,</span> <span class="n">ActualElapsedTime</span><span class="p">)</span> <span class="o">%&gt;%</span>  
  <span class="nf">mutate</span><span class="p">(</span><span class="n">RealTime</span> <span class="o">=</span> <span class="n">ActualElapsedTime</span> <span class="o">+</span> <span class="m">100</span><span class="p">,</span> <span class="n">mph</span> <span class="o">=</span> <span class="n">Distance</span> <span class="o">/</span> <span class="n">RealTime</span> <span class="o">*</span> <span class="m">60</span><span class="p">)</span>

<span class="c1"># Part 2, concerning flights that had an actual average speed of &lt; 70 mph.</span>
<span class="n">d</span> <span class="o">%&gt;%</span>
  <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">mph</span><span class="p">),</span> <span class="n">mph</span> <span class="o">&lt;</span> <span class="m">70</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">summarise</span><span class="p">(</span> <span class="n">n_less</span> <span class="o">=</span> <span class="nf">n</span><span class="p">(),</span> 
             <span class="n">n_dest</span> <span class="o">=</span> <span class="nf">n_distinct</span><span class="p">(</span><span class="n">Dest</span><span class="p">),</span> 
             <span class="n">min_dist</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">Distance</span><span class="p">),</span> 
             <span class="n">max_dist</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">Distance</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">4</span>
<span class="o">##</span>   <span class="n">n_less</span> <span class="n">n_dest</span> <span class="n">min_dist</span> <span class="n">max_dist</span>
<span class="o">##</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>   <span class="mi">6726</span>     <span class="mi">13</span>       <span class="mi">79</span>      <span class="mi">305</span>
</pre></div>
</td></tr></table>

<p><strong>Drive or fly? Part 2 of 2</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Solve the exercise using a combination of dplyr verbs and %&gt;%</span>
<span class="n">hflights</span> <span class="o">%&gt;%</span>
    <span class="c1">#summarise(all_flights = n()) %&gt;%</span>
    <span class="nf">filter</span><span class="p">(((</span><span class="n">Distance</span> <span class="o">/</span> <span class="p">(</span><span class="n">ActualElapsedTime</span> <span class="o">+</span> <span class="m">100</span><span class="p">)</span> <span class="o">*</span> <span class="m">60</span><span class="p">)</span> <span class="o">&lt;</span> <span class="m">105</span><span class="p">)</span> <span class="o">|</span> <span class="n">Cancelled</span> <span class="o">==</span> <span class="m">1</span> <span class="o">|</span> <span class="n">Diverted</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">summarise</span><span class="p">(</span><span class="n">n_non</span> <span class="o">=</span> <span class="nf">n</span><span class="p">(),</span> <span class="n">p_non</span> <span class="o">=</span> <span class="n">n_non</span> <span class="o">/</span> <span class="m">22751</span> <span class="o">*</span><span class="m">100</span><span class="p">,</span> <span class="n">n_dest</span> <span class="o">=</span> <span class="nf">n_distinct</span><span class="p">(</span><span class="n">Dest</span><span class="p">),</span> <span class="n">min_dist</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">Distance</span><span class="p">),</span> <span class="n">max_dist</span> <span class="o">=</span> <span class="nf">max</span><span class="p">(</span><span class="n">Distance</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">5</span>
<span class="o">##</span>   <span class="n">n_non</span>    <span class="n">p_non</span> <span class="n">n_dest</span> <span class="n">min_dist</span> <span class="n">max_dist</span>
<span class="o">##</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span> <span class="mi">42400</span> <span class="mi">186</span><span class="p">.</span><span class="mi">3654</span>    <span class="mi">113</span>       <span class="mi">79</span>     <span class="mi">3904</span>
</pre></div>
</td></tr></table>

<p><strong>Advanced piping exercise</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Count the number of overnight flights</span>
<span class="n">hflights</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="n">ArrTime</span> <span class="o">&lt;</span> <span class="n">DepTime</span> <span class="o">&amp;</span> <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">DepTime</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">ArrTime</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">summarise</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="nf">n</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">1</span> <span class="err">×</span> <span class="mi">1</span>
<span class="o">##</span>       <span class="n">n</span>
<span class="o">##</span>   <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>  <span class="mi">2718</span>
</pre></div>
</td></tr></table>

<h3 id="5-group_by-and-working-with-data">5, <code class="codehilite"><span class="n">group_by</span></code> and working with data<a class="headerlink" href="#5-group_by-and-working-with-data" title="Permanent link">&para;</a></h3>
<p><strong>Unite and conquer using <code class="codehilite"><span class="n">group_by</span></code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Make an ordered per-carrier summary of hflights</span>
<span class="n">hflights</span> <span class="o">%&gt;%</span>
   <span class="nf">group_by</span><span class="p">(</span><span class="n">UniqueCarrier</span><span class="p">)</span> <span class="o">%&gt;%</span>
   <span class="nf">summarise</span><span class="p">(</span><span class="n">n_flights</span> <span class="o">=</span> <span class="nf">n</span><span class="p">(),</span> 
             <span class="n">n_canc</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">Cancelled</span> <span class="o">==</span> <span class="m">1</span><span class="p">),</span> 
             <span class="n">p_canc</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">Cancelled</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> <span class="m">100</span><span class="p">,</span> 
             <span class="n">avg_delay</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span> <span class="o">%&gt;%</span>
   <span class="nf">arrange</span><span class="p">(</span><span class="n">avg_delay</span><span class="p">,</span> <span class="n">p_canc</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">15</span> <span class="err">×</span> <span class="mi">5</span>
<span class="o">##</span>         <span class="n">UniqueCarrier</span> <span class="n">n_flights</span> <span class="n">n_canc</span>    <span class="n">p_canc</span>  <span class="n">avg_delay</span>
<span class="o">##</span>                 <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>  <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>      <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>          <span class="n">US_Airways</span>      <span class="mi">4082</span>     <span class="mi">46</span> <span class="mi">1</span><span class="p">.</span><span class="mi">1268986</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">6307692</span>
<span class="o">##</span> <span class="mi">2</span>            <span class="n">American</span>      <span class="mi">3244</span>     <span class="mi">60</span> <span class="mi">1</span><span class="p">.</span><span class="mi">8495684</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">8917558</span>
<span class="o">##</span> <span class="mi">3</span>             <span class="n">AirTran</span>      <span class="mi">2139</span>     <span class="mi">21</span> <span class="mi">0</span><span class="p">.</span><span class="mi">9817672</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">8536239</span>
<span class="o">##</span> <span class="mi">4</span>              <span class="n">Alaska</span>       <span class="mi">365</span>      <span class="mi">0</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0000000</span>  <span class="mi">3</span><span class="p">.</span><span class="mi">1923077</span>
<span class="o">##</span> <span class="mi">5</span>                <span class="n">Mesa</span>        <span class="mi">79</span>      <span class="mi">1</span> <span class="mi">1</span><span class="p">.</span><span class="mi">2658228</span>  <span class="mi">4</span><span class="p">.</span><span class="mi">0128205</span>
<span class="o">##</span> <span class="mi">6</span>               <span class="n">Delta</span>      <span class="mi">2641</span>     <span class="mi">42</span> <span class="mi">1</span><span class="p">.</span><span class="mi">5903067</span>  <span class="mi">6</span><span class="p">.</span><span class="mi">0841374</span>
<span class="o">##</span> <span class="mi">7</span>         <span class="n">Continental</span>     <span class="mi">70032</span>    <span class="mi">475</span> <span class="mi">0</span><span class="p">.</span><span class="mi">6782614</span>  <span class="mi">6</span><span class="p">.</span><span class="mi">0986983</span>
<span class="o">##</span> <span class="mi">8</span>      <span class="n">American_Eagle</span>      <span class="mi">4648</span>    <span class="mi">135</span> <span class="mi">2</span><span class="p">.</span><span class="mi">9044750</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">1529751</span>
<span class="o">##</span> <span class="mi">9</span>  <span class="n">Atlantic_Southeast</span>      <span class="mi">2204</span>     <span class="mi">76</span> <span class="mi">3</span><span class="p">.</span><span class="mi">4482759</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">2569543</span>
<span class="o">##</span> <span class="mi">10</span>          <span class="n">Southwest</span>     <span class="mi">45343</span>    <span class="mi">703</span> <span class="mi">1</span><span class="p">.</span><span class="mi">5504047</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">5871430</span>
<span class="o">##</span> <span class="mi">11</span>           <span class="n">Frontier</span>       <span class="mi">838</span>      <span class="mi">6</span> <span class="mi">0</span><span class="p">.</span><span class="mi">7159905</span>  <span class="mi">7</span><span class="p">.</span><span class="mi">6682692</span>
<span class="o">##</span> <span class="mi">12</span>         <span class="n">ExpressJet</span>     <span class="mi">73053</span>   <span class="mi">1132</span> <span class="mi">1</span><span class="p">.</span><span class="mi">5495599</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">1865242</span>
<span class="o">##</span> <span class="mi">13</span>            <span class="n">SkyWest</span>     <span class="mi">16061</span>    <span class="mi">224</span> <span class="mi">1</span><span class="p">.</span><span class="mi">3946828</span>  <span class="mi">8</span><span class="p">.</span><span class="mi">6934922</span>
<span class="o">##</span> <span class="mi">14</span>            <span class="n">JetBlue</span>       <span class="mi">695</span>     <span class="mi">18</span> <span class="mi">2</span><span class="p">.</span><span class="mi">5899281</span>  <span class="mi">9</span><span class="p">.</span><span class="mi">8588410</span>
<span class="o">##</span> <span class="mi">15</span>             <span class="n">United</span>      <span class="mi">2072</span>     <span class="mi">34</span> <span class="mi">1</span><span class="p">.</span><span class="mi">6409266</span> <span class="mi">10</span><span class="p">.</span><span class="mi">4628628</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Make an ordered per-day summary of hflights</span>
<span class="n">hflights</span> <span class="o">%&gt;%</span> 
   <span class="nf">group_by</span><span class="p">(</span><span class="n">DayOfWeek</span><span class="p">)</span> <span class="o">%&gt;%</span>
   <span class="nf">summarise</span><span class="p">(</span><span class="n">avg_taxi</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">TaxiIn</span> <span class="o">+</span> <span class="n">TaxiOut</span><span class="p">,</span> <span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span> <span class="o">%&gt;%</span>
   <span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">avg_taxi</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">7</span> <span class="err">×</span> <span class="mi">2</span>
<span class="o">##</span>   <span class="n">DayOfWeek</span> <span class="n">avg_taxi</span>
<span class="o">##</span>       <span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>         <span class="mi">1</span> <span class="mi">21</span><span class="p">.</span><span class="mi">77027</span>
<span class="o">##</span> <span class="mi">2</span>         <span class="mi">2</span> <span class="mi">21</span><span class="p">.</span><span class="mi">43505</span>
<span class="o">##</span> <span class="mi">3</span>         <span class="mi">4</span> <span class="mi">21</span><span class="p">.</span><span class="mi">26076</span>
<span class="o">##</span> <span class="mi">4</span>         <span class="mi">3</span> <span class="mi">21</span><span class="p">.</span><span class="mi">19055</span>
<span class="o">##</span> <span class="mi">5</span>         <span class="mi">5</span> <span class="mi">21</span><span class="p">.</span><span class="mi">15805</span>
<span class="o">##</span> <span class="mi">6</span>         <span class="mi">7</span> <span class="mi">20</span><span class="p">.</span><span class="mi">93726</span>
<span class="o">##</span> <span class="mi">7</span>         <span class="mi">6</span> <span class="mi">20</span><span class="p">.</span><span class="mi">43061</span>
</pre></div>
</td></tr></table>

<p><strong>Combine <code class="codehilite"><span class="n">group_by</span></code> with <code class="codehilite"><span class="n">mutate</span></code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Solution to first instruction</span>
<span class="n">hflights</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">UniqueCarrier</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">summarise</span><span class="p">(</span><span class="n">p_delay</span> <span class="o">=</span> <span class="nf">sum</span><span class="p">(</span><span class="n">ArrDelay</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> <span class="o">/</span> <span class="nf">n</span><span class="p">())</span> <span class="o">%&gt;%</span>
    <span class="nf">mutate</span><span class="p">(</span><span class="n">rank</span> <span class="o">=</span> <span class="nf">rank</span><span class="p">(</span><span class="n">p_delay</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">arrange</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">15</span> <span class="err">×</span> <span class="mi">3</span>
<span class="o">##</span>         <span class="n">UniqueCarrier</span>   <span class="n">p_delay</span>  <span class="n">rank</span>
<span class="o">##</span>                 <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>     <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>            <span class="n">American</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3030208</span>     <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span>             <span class="n">AirTran</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3112269</span>     <span class="mi">2</span>
<span class="o">##</span> <span class="mi">3</span>          <span class="n">US_Airways</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3267990</span>     <span class="mi">3</span>
<span class="o">##</span> <span class="mi">4</span>  <span class="n">Atlantic_Southeast</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3677511</span>     <span class="mi">4</span>
<span class="o">##</span> <span class="mi">5</span>      <span class="n">American_Eagle</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3696714</span>     <span class="mi">5</span>
<span class="o">##</span> <span class="mi">6</span>               <span class="n">Delta</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3871092</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">7</span>             <span class="n">JetBlue</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3952452</span>     <span class="mi">7</span>
<span class="o">##</span> <span class="mi">8</span>              <span class="n">Alaska</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4368132</span>     <span class="mi">8</span>
<span class="o">##</span> <span class="mi">9</span>           <span class="n">Southwest</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4644557</span>     <span class="mi">9</span>
<span class="o">##</span> <span class="mi">10</span>               <span class="n">Mesa</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4743590</span>    <span class="mi">10</span>
<span class="o">##</span> <span class="mi">11</span>        <span class="n">Continental</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4907385</span>    <span class="mi">11</span>
<span class="o">##</span> <span class="mi">12</span>         <span class="n">ExpressJet</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4943420</span>    <span class="mi">12</span>
<span class="o">##</span> <span class="mi">13</span>             <span class="n">United</span> <span class="mi">0</span><span class="p">.</span><span class="mi">4963109</span>    <span class="mi">13</span>
<span class="o">##</span> <span class="mi">14</span>            <span class="n">SkyWest</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5350105</span>    <span class="mi">14</span>
<span class="o">##</span> <span class="mi">15</span>           <span class="n">Frontier</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5564904</span>    <span class="mi">15</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Solution to second instruction</span>
<span class="n">hflights</span> <span class="o">%&gt;%</span>
    <span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">),</span> <span class="n">ArrDelay</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">UniqueCarrier</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">summarise</span><span class="p">(</span><span class="n">avg</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">ArrDelay</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">mutate</span><span class="p">(</span><span class="n">rank</span> <span class="o">=</span> <span class="nf">rank</span><span class="p">(</span><span class="n">avg</span><span class="p">))</span> <span class="o">%&gt;%</span>
    <span class="nf">arrange</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">##</span> <span class="o">#</span> <span class="n">A</span> <span class="n">tibble</span><span class="p">:</span> <span class="mi">15</span> <span class="err">×</span> <span class="mi">3</span>
<span class="o">##</span>         <span class="n">UniqueCarrier</span>      <span class="k">avg</span>  <span class="n">rank</span>
<span class="o">##</span>                 <span class="o">&lt;</span><span class="n">chr</span><span class="o">&gt;</span>    <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">dbl</span><span class="o">&gt;</span>
<span class="o">##</span> <span class="mi">1</span>                <span class="n">Mesa</span> <span class="mi">18</span><span class="p">.</span><span class="mi">67568</span>     <span class="mi">1</span>
<span class="o">##</span> <span class="mi">2</span>            <span class="n">Frontier</span> <span class="mi">18</span><span class="p">.</span><span class="mi">68683</span>     <span class="mi">2</span>
<span class="o">##</span> <span class="mi">3</span>          <span class="n">US_Airways</span> <span class="mi">20</span><span class="p">.</span><span class="mi">70235</span>     <span class="mi">3</span>
<span class="o">##</span> <span class="mi">4</span>         <span class="n">Continental</span> <span class="mi">22</span><span class="p">.</span><span class="mi">13374</span>     <span class="mi">4</span>
<span class="o">##</span> <span class="mi">5</span>              <span class="n">Alaska</span> <span class="mi">22</span><span class="p">.</span><span class="mi">91195</span>     <span class="mi">5</span>
<span class="o">##</span> <span class="mi">6</span>             <span class="n">SkyWest</span> <span class="mi">24</span><span class="p">.</span><span class="mi">14663</span>     <span class="mi">6</span>
<span class="o">##</span> <span class="mi">7</span>          <span class="n">ExpressJet</span> <span class="mi">24</span><span class="p">.</span><span class="mi">19337</span>     <span class="mi">7</span>
<span class="o">##</span> <span class="mi">8</span>           <span class="n">Southwest</span> <span class="mi">25</span><span class="p">.</span><span class="mi">27750</span>     <span class="mi">8</span>
<span class="o">##</span> <span class="mi">9</span>             <span class="n">AirTran</span> <span class="mi">27</span><span class="p">.</span><span class="mi">85693</span>     <span class="mi">9</span>
<span class="o">##</span> <span class="mi">10</span>           <span class="n">American</span> <span class="mi">28</span><span class="p">.</span><span class="mi">49740</span>    <span class="mi">10</span>
<span class="o">##</span> <span class="mi">11</span>              <span class="n">Delta</span> <span class="mi">32</span><span class="p">.</span><span class="mi">12463</span>    <span class="mi">11</span>
<span class="o">##</span> <span class="mi">12</span>             <span class="n">United</span> <span class="mi">32</span><span class="p">.</span><span class="mi">48067</span>    <span class="mi">12</span>
<span class="o">##</span> <span class="mi">13</span>     <span class="n">American_Eagle</span> <span class="mi">38</span><span class="p">.</span><span class="mi">75135</span>    <span class="mi">13</span>
<span class="o">##</span> <span class="mi">14</span> <span class="n">Atlantic_Southeast</span> <span class="mi">40</span><span class="p">.</span><span class="mi">24231</span>    <span class="mi">14</span>
<span class="o">##</span> <span class="mi">15</span>            <span class="n">JetBlue</span> <span class="mi">45</span><span class="p">.</span><span class="mi">47744</span>    <span class="mi">15</span>
</pre></div>
</td></tr></table>

<p><strong>Advanced <code class="codehilite"><span class="n">group_by</span></code> exercises</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Which plane (by tail number) flew out of Houston the most times? How many times? adv1</span>
<span class="n">adv1</span> <span class="o">&lt;-</span> <span class="n">hflights</span> <span class="o">%&gt;%</span>
          <span class="nf">group_by</span><span class="p">(</span><span class="n">TailNum</span><span class="p">)</span> <span class="o">%&gt;%</span>
          <span class="nf">summarise</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="nf">n</span><span class="p">())</span> <span class="o">%&gt;%</span>
          <span class="nf">filter</span><span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="nf">max</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>

<span class="c1"># How many airplanes only flew to one destination from Houston? adv2</span>
<span class="n">adv2</span> <span class="o">&lt;-</span> <span class="n">hflights</span> <span class="o">%&gt;%</span>
          <span class="nf">group_by</span><span class="p">(</span><span class="n">TailNum</span><span class="p">)</span> <span class="o">%&gt;%</span>
          <span class="nf">summarise</span><span class="p">(</span><span class="n">ndest</span> <span class="o">=</span> <span class="nf">n_distinct</span><span class="p">(</span><span class="n">Dest</span><span class="p">))</span> <span class="o">%&gt;%</span>
          <span class="nf">filter</span><span class="p">(</span><span class="n">ndest</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span> <span class="o">%&gt;%</span>
          <span class="nf">summarise</span><span class="p">(</span><span class="n">nplanes</span> <span class="o">=</span> <span class="nf">n</span><span class="p">())</span>

<span class="c1"># Find the most visited destination for each carrier: adv3</span>
<span class="n">adv3</span> <span class="o">&lt;-</span> <span class="n">hflights</span> <span class="o">%&gt;%</span> 
          <span class="nf">group_by</span><span class="p">(</span><span class="n">UniqueCarrier</span><span class="p">,</span> <span class="n">Dest</span><span class="p">)</span> <span class="o">%&gt;%</span>
          <span class="nf">summarise</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="nf">n</span><span class="p">())</span> <span class="o">%&gt;%</span>
          <span class="nf">mutate</span><span class="p">(</span><span class="n">rank</span> <span class="o">=</span> <span class="nf">rank</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span> <span class="o">%&gt;%</span>
          <span class="nf">filter</span><span class="p">(</span><span class="n">rank</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span>

<span class="c1"># Find the carrier that travels to each destination the most: adv4</span>
<span class="n">adv4</span> <span class="o">&lt;-</span> <span class="n">hflights</span> <span class="o">%&gt;%</span> 
          <span class="nf">group_by</span><span class="p">(</span><span class="n">Dest</span><span class="p">,</span> <span class="n">UniqueCarrier</span><span class="p">)</span> <span class="o">%&gt;%</span>
          <span class="nf">summarise</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="nf">n</span><span class="p">())</span> <span class="o">%&gt;%</span>
          <span class="nf">mutate</span><span class="p">(</span><span class="n">rank</span> <span class="o">=</span> <span class="nf">rank</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">n</span><span class="p">)))</span> <span class="o">%&gt;%</span>
          <span class="nf">filter</span><span class="p">(</span><span class="n">rank</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite"><span class="n">dplyr</span></code> deals with different types</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Use summarise to calculate n_carrier</span>
<span class="n">s2</span> <span class="o">&lt;-</span> <span class="n">hflights</span> <span class="o">%&gt;%</span>
    <span class="nf">summarise</span><span class="p">(</span><span class="n">n_carrier</span> <span class="o">=</span> <span class="nf">n_distinct</span><span class="p">(</span><span class="n">UniqueCarrier</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite"><span class="n">dplyr</span></code> and mySQL databases</strong></p>
<p>Code only.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># set up a src that connects to the mysql database (src_mysql is provided by dplyr)</span>
<span class="n">my_db</span> <span class="o">&lt;-</span> <span class="nf">src_mysql</span><span class="p">(</span><span class="n">dbname</span> <span class="o">=</span> <span class="s">&#39;dplyr&#39;</span><span class="p">,</span> 
                  <span class="n">host</span> <span class="o">=</span> <span class="s">&#39;dplyr.csrrinzqubik.us-east-1.rds.amazonaws.com&#39;</span><span class="p">,</span> 
                  <span class="n">port</span> <span class="o">=</span> <span class="m">3306</span><span class="p">,</span>
                  <span class="n">user</span> <span class="o">=</span> <span class="s">&#39;dplyr&#39;</span><span class="p">,</span>
                  <span class="n">password</span> <span class="o">=</span> <span class="s">&#39;dplyr&#39;</span><span class="p">)</span>

<span class="c1"># and reference a table within that src: nycflights is now available as an R object that references to the remote nycflights table</span>
<span class="n">nycflights</span> <span class="o">&lt;-</span> <span class="nf">tbl</span><span class="p">(</span><span class="n">my_db</span><span class="p">,</span> <span class="s">&#39;dplyr&#39;</span><span class="p">)</span>

<span class="c1"># glimpse at nycflights</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">nycflights</span><span class="p">)</span>

<span class="c1"># Calculate the grouped summaries detailed in the instructions</span>
<span class="n">nycflights</span> <span class="o">%&gt;%</span>
   <span class="nf">group_by</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span> <span class="o">%&gt;%</span>
   <span class="nf">summarise</span><span class="p">(</span><span class="n">n_flights</span> <span class="o">=</span> <span class="nf">n</span><span class="p">(),</span> <span class="n">avg_delay</span> <span class="o">=</span> <span class="nf">mean</span><span class="p">(</span><span class="n">arr_delay</span><span class="p">))</span> <span class="o">%&gt;%</span>
   <span class="nf">arrange</span><span class="p">(</span><span class="n">avg_delay</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<h2 id="adding-tidyr-functions">Adding <code class="codehilite"><span class="n">tidyr</span></code> Functions<a class="headerlink" href="#adding-tidyr-functions" title="Permanent link">&para;</a></h2>
<ul>
<li><code class="codehilite"><span class="n">complete</span></code></li>
<li><code class="codehilite"><span class="n">drop_na</span></code></li>
<li><code class="codehilite"><span class="n">expand</span></code></li>
<li><code class="codehilite"><span class="k">extract</span></code></li>
<li><code class="codehilite"><span class="n">extract_numeric</span></code></li>
<li><code class="codehilite"><span class="n">complete</span></code></li>
<li><code class="codehilite"><span class="n">fill</span></code></li>
<li><code class="codehilite"><span class="n">full_seq</span></code></li>
<li><code class="codehilite"><span class="n">gather</span></code></li>
<li><code class="codehilite"><span class="n">nest</span></code></li>
<li><code class="codehilite"><span class="n">replace_na</span></code></li>
<li><code class="codehilite"><span class="n">separate</span></code></li>
<li><code class="codehilite"><span class="n">separate_rows</span></code></li>
<li><code class="codehilite"><span class="n">separate_rows_</span></code></li>
<li><code class="codehilite"><span class="n">smiths</span></code></li>
<li><code class="codehilite"><span class="n">spread</span></code></li>
<li><code class="codehilite"><span class="n">table1</span></code></li>
<li><code class="codehilite"><span class="n">unite</span></code></li>
<li><code class="codehilite"><span class="k">unnest</span></code></li>
<li><code class="codehilite"><span class="n">who</span></code></li>
</ul>
<hr />
<h2 id="extension-joining-data-in-r-with-dplyr">Extension: &lsquo;Joining Data in R with <code class="codehilite"><span class="n">dplyr</span></code>&lsquo;<a class="headerlink" href="#extension-joining-data-in-r-with-dplyr" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>## 1, Mutating Joins

## 2, Filtering Joins and Set Operations

## 3, Assembling Data

## 4, Advanced Joining

## 5, Case Study
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../data_manipulation_in_r_with_dplyr/" title="Data Manipulation in R with dplyr" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Data Manipulation in R with dplyr
              </span>
            </div>
          </a>
        
        
          <a href="../googlevis/" title="googleVis (embed HTML plots)" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                googleVis (embed HTML plots)
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>